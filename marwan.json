{
  "main_code": "cmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ3NlY3VyZXJhbmRvbScKcmVxdWlyZSAnb3Blbi11cmknCnJlcXVpcmUgJ3RtcGRpcicKcmVxdWlyZSAnYmFzZTY0JwpyZXF1aXJlICd0ZW1wZmlsZScKcmVxdWlyZSAnZGlnZXN0JwpyZXF1aXJlICdmaWxldXRpbHMnCgptb2R1bGUgTUhERVNJR04KICBQTFVHSU5fTkFNRSA9ICJNSERFU0lHTiIKICBBUElfVVJMID0gImh0dHBzOi8vbWFobW91ZGRlc2lnbi5jb20vd3AtanNvbi9taGRlc2lnbi9WNC92YWxpZGF0ZSIKCiAgQ09NUE9ORU5UUyA9IGJlZ2luCiAgdXJsID0gImh0dHBzOi8vbWFobW91ZGRlc2lnbi5jb20vU0tFVENIVVAvY29tcG9uZW50cy1WNC5qc29uIgogIGpzb25fcmF3ID0gVVJJLm9wZW4odXJsKS5yZWFkCiAganNvbl9kYXRhID0gSlNPTi5wYXJzZShqc29uX3JhdykKICBkZWNvZGVkX2pzb24gPSBCYXNlNjQuZGVjb2RlNjQoanNvbl9kYXRhWyJkYXRhIl0pCiAgSlNPTi5wYXJzZShkZWNvZGVkX2pzb24sIHN5bWJvbGl6ZV9uYW1lczogdHJ1ZSkKcmVzY3VlID0+IGUKICBVSS5tZXNzYWdlYm94KCLinYwg2YHYtNmEINiq2K3ZhdmK2YQg2KjZitin2YbYp9iqINin2YTZhdmD2KrYqNipOiAje2UubWVzc2FnZX0iKQogIFtdCmVuZAoKICAjID09PT09PT09PT0g2KPYr9in2Kkg2KrYqtio2Lkg2KfZhNmF2KfZiNizINi52YbYryDYp9mE2KXYr9ix2KfYrCA9PT09PT09PT09CiAgY2xhc3MgQ29tcG9uZW50UGxhY2VyCiAgICBkZWYgaW5pdGlhbGl6ZShkZWZpbml0aW9uLCBuYW1lKQogICAgICBAZGVmaW5pdGlvbiA9IGRlZmluaXRpb24KICAgICAgQG5hbWUgPSBuYW1lCiAgICAgIEBpcCA9IFNrZXRjaHVwOjpJbnB1dFBvaW50Lm5ldwogICAgZW5kCgogICAgZGVmIG9uTW91c2VNb3ZlKGZsYWdzLCB4LCB5LCB2aWV3KQogICAgICBAaXAucGljayh2aWV3LCB4LCB5KQogICAgICB2aWV3LmludmFsaWRhdGUKICAgIGVuZAoKICAgIGRlZiBkcmF3KHZpZXcpCiAgICAgIHJldHVybiB1bmxlc3MgQGlwLnZhbGlkPwogICAgICB0ciA9IEdlb206OlRyYW5zZm9ybWF0aW9uLm5ldyhAaXAucG9zaXRpb24pCiAgICAgIHZpZXcuZHJhdyhHTF9MSU5FX1NUUklQLCBbQGlwLnBvc2l0aW9uXSkKICAgICAgYmVnaW4KICAgICAgICBwdHMgPSBAZGVmaW5pdGlvbi5ib3VuZHMuY29ybmVyKDAuLjcpLm1hcCB7IHxwdHwgcHQudHJhbnNmb3JtKHRyKSB9CiAgICAgICAgdmlldy5kcmF3KEdMX1BPTFlHT04sIHB0cykKICAgICAgcmVzY3VlCiAgICAgIGVuZAogICAgZW5kCgpkZWYgb25MQnV0dG9uRG93bihmbGFncywgeCwgeSwgdmlldykKICBpZiBAaXAudmFsaWQ/CiAgICB0ciA9IEdlb206OlRyYW5zZm9ybWF0aW9uLm5ldyhAaXAucG9zaXRpb24pCiAgICBpbnN0YW5jZSA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5lbnRpdGllcy5hZGRfaW5zdGFuY2UoQGRlZmluaXRpb24sIHRyKQogICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnNlbGVjdGlvbi5jbGVhcgogICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnNlbGVjdGlvbi5hZGQoaW5zdGFuY2UpCiAgICBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwudG9vbHMucG9wX3Rvb2wKICAgIFNrZXRjaHVwLnNlbmRfYWN0aW9uKCJzZWxlY3RNb3ZlVG9vbDoiKQogIGVuZAplbmQKICBlbmQKCiAgZGVmIHNlbGYuZ2V0X2RldmljZV9pZAogICAgcHJlZnMgPSBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJkZXZpY2VfaWQiKQogICAgcmV0dXJuIHByZWZzIHVubGVzcyBwcmVmcy5uaWw/IHx8IHByZWZzLmVtcHR5PwogICAgaWQgPSBTZWN1cmVSYW5kb20udXVpZAogICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImRldmljZV9pZCIsIGlkKQogICAgaWQKICBlbmQKCiAgIyA9PT09PT0g2KfZhNiq2LnYr9mK2YQg2YfZhtinID09PT09PQogIGRlZiBzZWxmLmFjdGl2YXRlKGZvcmNlX3Byb21wdCA9IHRydWUpCiAgICAjINio2YrYp9mG2KfYqiDYq9in2KjYqtipINmE2YTYqtmB2LnZitmEINin2YTYqtmE2YLYp9im2YoKICAgIGVtYWlsID0gInBvbGVzMTEyMkBnbWFpbC5jb20iCiAgICBsaWNlbnNlID0gIjEyMzQ1Njc4OSIKCiAgICAjINit2YHYuCDYp9mE2KjZitin2YbYp9iqINiq2YTZgtin2KbZitin2YsKICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIsIGVtYWlsKQogICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImxpY2Vuc2UiLCBsaWNlbnNlKQogICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImFjdGl2YXRlZF9vbmNlIiwgdHJ1ZSkKICAgIAogICAgIyDYudix2LYg2LHYs9in2YTYqSDZhtis2KfYrSDYp9mE2KrZgdi52YrZhAogICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KfZhNiq2YHYudmK2YQg2KjZhtis2KfYrSDYqtmE2YLYp9im2YrYp9mLIikgaWYgZm9yY2VfcHJvbXB0CiAgICAKICAgICMg2KXYsdis2KfYuSB0cnVlINiv2KfYptmF2KfZiyDZhNmE2KXYtNin2LHYqSDYpdmE2Ykg2KPZhiDYp9mE2KrZgdi52YrZhCDZhtin2KzYrQogICAgdHJ1ZQogIHJlc2N1ZSA9PiBlCiAgICAjINmB2Yog2K3Yp9mE2Kkg2K3Yr9mI2Ksg2KPZiiDYrti32KPYjCDZhti52KrYqNixINin2YTYqtmB2LnZitmEINmG2KfYrNit2KfZiwogICAgdHJ1ZQogIGVuZAogICMgPT09PT09PT09PT09PT09PT09PT09PT0KCiAgZGVmIHNlbGYuYWN0aXZhdGVkPwogICAgIyDYr9in2KbZhdin2Ysg2YbYudiq2KjYsSDYp9mE2KjYsdmG2KfZhdisINmF2YHYudmE2KfZiwogICAgdHJ1ZQogIGVuZAoKICBkZWYgc2VsZi5zaG93X2xpYnJhcnkKICAgICMgPT09PT09INiq2K3ZgtmCINi12KfZhdiqID09PT09PQogICAgIyDZhNinINit2KfYrNipINmE2YTYqtit2YLZgiDZhdmGINin2YTYqtmB2LnZitmE2Iwg2YbZgdiq2K0g2KfZhNmF2YPYqtio2Kkg2YXYqNin2LTYsdipCiAgICAjID09PT09PT09PT09PT09PT09PT09PT09PQoKICAgIGRsZyA9IFVJOjpIdG1sRGlhbG9nLm5ldyh7CiAgICAgIDpkaWFsb2dfdGl0bGUgPT4gItmF2YPYqtio2Kkg2KfZhNmF2LfYp9io2K4iLAogICAgICA6cHJlZmVyZW5jZXNfa2V5ID0+ICJtaGRlc2lnbl9saWJyYXJ5IiwKICAgICAgOnNjcm9sbGFibGUgPT4gdHJ1ZSwKICAgICAgOnJlc2l6YWJsZSA9PiB0cnVlLAogICAgICA6d2lkdGggPT4gODAwLAogICAgICA6aGVpZ2h0ID0+IDY1MAogICAgfSkKCiAgICBjYXRlZ29yaWVzID0gQ09NUE9ORU5UUy5tYXAgeyB8Y3wgY1s6Y2F0ZWdvcnldIH0udW5pcQoKICAgIGh0bWwgPSA8PC1IVE1MCiAgICA8aHRtbD48aGVhZD4KICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVRhamF3YWw6d2dodEA0MDA7NzAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgICAgPHN0eWxlPgogICAgICAgIGJvZHkge2ZvbnQtZmFtaWx5OidUYWphd2FsJyxzYW5zLXNlcmlmO21hcmdpbjowO2JhY2tncm91bmQ6I2Y5ZjlmOTtwYWRkaW5nOjAgMjBweCA0MHB4O2RpcmVjdGlvbjpydGw7fQogICAgICAgIGhlYWRlciB7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjIwcHggMDt9CiAgICAgICAgaGVhZGVyIGltZyB7aGVpZ2h0OjUwcHg7Ym9yZGVyLXJhZGl1czo1MCU7fQogICAgICAgIGhlYWRlciBoMiB7bWFyZ2luOjA7Zm9udC1zaXplOjI0cHg7Y29sb3I6IzJlN2QzMjt9CiAgICAgICAgLm1lbnUtdG9nZ2xlIHtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6MjhweDt1c2VyLXNlbGVjdDpub25lO30KICAgICAgICAuZmlsdGVyIHtkaXNwbGF5Om5vbmU7bWFyZ2luLWJvdHRvbToyMHB4O30KICAgICAgICAuZmlsdGVyIHNlbGVjdCB7Zm9udC1zaXplOjE2cHg7cGFkZGluZzo2cHggMTBweDtib3JkZXItcmFkaXVzOjZweDtib3JkZXI6MXB4IHNvbGlkICNjY2M7fQogICAgICAgIC5ncmlkIHtkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdChhdXRvLWZpbGwsbWlubWF4KDIwMHB4LDFmcikpO2dhcDoyMHB4O30KICAgICAgICAuY2FyZCB7YmFja2dyb3VuZDp3aGl0ZTtib3JkZXItcmFkaXVzOjEycHg7cGFkZGluZzoxMnB4O2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMDgpO3RleHQtYWxpZ246Y2VudGVyO3RyYW5zaXRpb246dHJhbnNmb3JtIDAuM3MgZWFzZSxib3gtc2hhZG93IDAuM3MgZWFzZTt9CiAgICAgICAgLmNhcmQ6aG92ZXIge3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01cHgpO2JveC1zaGFkb3c6MCA4cHggMjBweCByZ2JhKDAsMCwwLDAuMTIpO30KICAgICAgICBpbWcuY29tcG9uZW50LWltZyB7d2lkdGg6MTAwJTtoZWlnaHQ6MjAwcHg7b2JqZWN0LWZpdDpjb3Zlcjtib3JkZXItcmFkaXVzOjhweDt9CiAgICAgICAgaDQge21hcmdpbjoxMHB4IDAgNXB4O2ZvbnQtc2l6ZToxN3B4O2NvbG9yOiMzMzM7fQogICAgICAgIHAge2ZvbnQtc2l6ZToxM3B4O2NvbG9yOiM2NjY7bWFyZ2luOjA7fQogICAgICAgIGJ1dHRvbiB7bWFyZ2luLXRvcDoxMHB4O3BhZGRpbmc6NnB4IDE0cHg7YmFja2dyb3VuZDojNDNhMDQ3O2NvbG9yOndoaXRlO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NXB4O2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YmFja2dyb3VuZCAwLjNzO30KICAgICAgICBidXR0b246aG92ZXIge2JhY2tncm91bmQ6IzJlN2QzMjt9CiAgICAgICAgZm9vdGVyIHttYXJnaW4tdG9wOjQwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjEycHg7Y29sb3I6Izk5OTt9CiAgICAgIDwvc3R5bGU+CiAgICA8L2hlYWQ+CiAgICA8Ym9keSBvbmNvbnRleHRtZW51PSJyZXR1cm4gZmFsc2UiPgogICAgICA8aGVhZGVyPgogICAgICAgIDxpbWcgc3JjPSJodHRwczovL2kuaWJiLmNvL1c0eTdjREZYL2Nyb3BwZWQtY2lyY2xlLWltYWdlLnBuZyIgYWx0PSJMb2dvIiAvPgogICAgICAgIDxoMj7ZhdmD2KrYqNipINiq2LXZhdmK2YUg2KfZhNmF2LfYp9io2K48L2gyPgogICAgICAgIDxkaXYgY2xhc3M9Im1lbnUtdG9nZ2xlIiBvbmNsaWNrPSJ0b2dnbGVNZW51KCkiPuKYsDwvZGl2PgogICAgICA8L2hlYWRlcj4KCiAgICAgIDxkaXYgY2xhc3M9ImZpbHRlciIgaWQ9ImZpbHRlci1ib3giPgogICAgICAgIDxsYWJlbD4KICAgICAgICAgIPCflL0g2KrYtdmG2YrZgToKICAgICAgICAgIDxzZWxlY3QgaWQ9ImNhdGVnb3J5IiBvbmNoYW5nZT0iZmlsdGVyQ29tcG9uZW50cygpIj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYWxsIj7Yp9mE2YPZhDwvb3B0aW9uPgogICAgICAgICAgICAje2NhdGVnb3JpZXMubWFwIHsgfGNhdHwgIjxvcHRpb24gdmFsdWU9JyN7Y2F0fSc+I3tjYXR9PC9vcHRpb24+IiB9LmpvaW59CiAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICA8L2xhYmVsPgogICAgICA8L2Rpdj4KCiAgICAgIDxkaXYgaWQ9ImNvbXBvbmVudHMiIGNsYXNzPSJncmlkIj48L2Rpdj4KCiAgICAgIDxmb290ZXI+CiAgICAgICAg2KrZhSDYqti12YXZitmFINmH2LDZhyDYp9mE2YXZg9iq2KjYqSDYqNmI2KfYs9i32KkgPGI+2YXZh9mG2K/YsyDZhdix2YjYp9mGINi52KfYr9mEPC9iPiDZiNij2Yog2KrYtdix2YEg2YHZitmH2Kcg2KjYr9mI2YYg2KXYsNmGINmK2LnYqtio2LEg2KfZhtiq2YfYp9mD2YvYpyDZhNit2YLZiNmCINin2YTZhdmE2YPZitipICjYs9in2YPZiNmGINiu2LXZitmF2YMg2KfZhdin2YUg2KfZhNmE2YcpLjxicj4KICAgICAgICDwn5OeINmE2YTYqtmI2KfYtdmEOiA8Yj4wMTIwNDI3OTYwNjwvYj4KICAgICAgPC9mb290ZXI+CgogICAgICA8c2NyaXB0PgpmdW5jdGlvbiBsb2FkQ29tcG9uZW50KGNvbXApe3NrZXRjaHVwLmxvYWRDb21wb25lbnRCeURhdGEoSlNPTi5zdHJpbmdpZnkoY29tcCkpO30KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBlPT5lLnByZXZlbnREZWZhdWx0KCkpOwpjb25zdCBhbGxDb21wb25lbnRzPSN7Q09NUE9ORU5UUy50b19qc29ufTsKZnVuY3Rpb24gcmVuZGVyKGMpe2xldCBoPSIiO2MuZm9yRWFjaCh4PT57aCs9YDxkaXYgY2xhc3M9ImNhcmQiPjxpbWcgY2xhc3M9ImNvbXBvbmVudC1pbWciIHNyYz0iJHt4LmltYWdlfSIgLz48aDQ+JHt4Lm5hbWV9PC9oND48cD4ke3guZGVzY308L3A+PGJ1dHRvbiBvbmNsaWNrPSdsb2FkQ29tcG9uZW50KCR7SlNPTi5zdHJpbmdpZnkoeCl9KSc+2KXYr9ix2KfYrDwvYnV0dG9uPjwvZGl2PmB9KTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29tcG9uZW50cyIpLmlubmVySFRNTD1oO30KZnVuY3Rpb24gZmlsdGVyQ29tcG9uZW50cygpe2NvbnN0IGNhdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2F0ZWdvcnkiKS52YWx1ZTtpZihjYXQ9PT0iYWxsIilyZW5kZXIoYWxsQ29tcG9uZW50cyk7ZWxzZSByZW5kZXIoYWxsQ29tcG9uZW50cy5maWx0ZXIoYz0+Yy5jYXRlZ29yeT09PWNhdCkpO30KZnVuY3Rpb24gdG9nZ2xlTWVudSgpe2NvbnN0IGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpbHRlci1ib3giKTtiLnN0eWxlLmRpc3BsYXk9KGIuc3R5bGUuZGlzcGxheT09PSJibG9jayIpPyJub25lIjoiYmxvY2siO30Kd2luZG93Lm9ubG9hZD0oKT0+ZmlsdGVyQ29tcG9uZW50cygpOwogICAgICA8L3NjcmlwdD4KICAgIDwvYm9keT48L2h0bWw+CiAgICBIVE1MCgogICAgZGxnLnNldF9odG1sKGh0bWwpCgpkbGcuYWRkX2FjdGlvbl9jYWxsYmFjaygibG9hZENvbXBvbmVudEJ5RGF0YSIpIGRvIHxfLCBjb21wX2pzb258CiAgY29tcCA9IEpTT04ucGFyc2UoY29tcF9qc29uLCBzeW1ib2xpemVfbmFtZXM6IHRydWUpCiAgdXJsID0gVVJJLnBhcnNlKGNvbXBbOnVybF0pCiAgaGFzaF9uYW1lID0gRGlnZXN0OjpTSEEyNTYuaGV4ZGlnZXN0KHVybC50b19zKVswLi4xNl0gKyAiLnNrcCIKICBjYWNoZV9kaXIgPSBGaWxlLmpvaW4oRGlyLnRtcGRpciwgIm1oZGVzaWduX2NhY2hlXzEiKQogIEZpbGVVdGlscy5ta2Rpcl9wKGNhY2hlX2RpcikKICBsb2NhbF9wYXRoID0gRmlsZS5qb2luKGNhY2hlX2RpciwgaGFzaF9uYW1lKQoKICB1bmxlc3MgRmlsZS5leGlzdD8obG9jYWxfcGF0aCkKICAgIHByb2dyZXNzID0gVUk6Okh0bWxEaWFsb2cubmV3KHsKICAgICAgOmRpYWxvZ190aXRsZSA9PiAi2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYuLi4iLAogICAgICA6cHJlZmVyZW5jZXNfa2V5ID0+ICJtaGRlc2lnbl9wcm9ncmVzcyIsCiAgICAgIDpzY3JvbGxhYmxlID0+IGZhbHNlLAogICAgICA6cmVzaXphYmxlID0+IGZhbHNlLAogICAgICA6d2lkdGggPT4gMzAwLAogICAgICA6aGVpZ2h0ID0+IDE1MAogICAgfSkKCiAgICBwcm9ncmVzcy5zZXRfaHRtbCA8PC1IVE1MCiAgICAgIDxodG1sPjxoZWFkPgogICAgICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgICAgICA8c3R5bGU+CiAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdUYWphd2FsJywgc2Fucy1zZXJpZjsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDA7IHBhZGRpbmc6IDIwcHg7IGRpcmVjdGlvbjogcnRsOyB9CiAgICAgICAgICBoMyB7IG1hcmdpbjogMTBweCAwOyB9CiAgICAgICAgICAjcHJvZ3Jlc3MtYmFyIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMjBweDsgYmFja2dyb3VuZDogI2RkZDsgYm9yZGVyLXJhZGl1czogMTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgICAgI3Byb2dyZXNzLWZpbGwgeyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAwJTsgYmFja2dyb3VuZDogIzRjYWY1MDsgdHJhbnNpdGlvbjogd2lkdGggMC4ycyBlYXNlOyB9CiAgICAgICAgICAjcGVyY2VudCB7IG1hcmdpbi10b3A6IDhweDsgZm9udC1zaXplOiAxNHB4OyB9CiAgICAgICAgPC9zdHlsZT4KICAgICAgPC9oZWFkPjxib2R5PgogICAgICAgIDxoMz7YrNin2LHZiiDYqtit2YXZitmEINin2YTZhdmD2YjZhi4uLjwvaDM+CiAgICAgICAgPGRpdiBpZD0icHJvZ3Jlc3MtYmFyIj48ZGl2IGlkPSJwcm9ncmVzcy1maWxsIj48L2Rpdj48L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJwZXJjZW50Ij4wJTwvZGl2PgogICAgICA8L2JvZHk+PC9odG1sPgogICAgSFRNTAoKICAgIHByb2dyZXNzLnNob3cKCiAgICBVSS5zdGFydF90aW1lcigwLjMsIGZhbHNlKSBkbwogICAgICBiZWdpbgogICAgICAgIGNvbnRlbnRfbGVuZ3RoID0gbmlsCiAgICAgICAgdGVtcGZpbGUgPSBUZW1wZmlsZS5uZXcoIm1oY29tcG9uZW50IikKCiAgICAgICAgVVJJLm9wZW4odXJsLAogICAgICAgICAgY29udGVudF9sZW5ndGhfcHJvYzogLT4obGVuKSB7IGNvbnRlbnRfbGVuZ3RoID0gbGVuIH0sCiAgICAgICAgICBwcm9ncmVzc19wcm9jOiAtPihieXRlcykgewogICAgICAgICAgICBwZXJjZW50ID0gY29udGVudF9sZW5ndGggPyAoKGJ5dGVzLnRvX2YgLyBjb250ZW50X2xlbmd0aCkgKiAxMDApLnRvX2kgOiAwCiAgICAgICAgICAgIHByb2dyZXNzLmV4ZWN1dGVfc2NyaXB0KCJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MtZmlsbCcpLnN0eWxlLndpZHRoID0gJyN7cGVyY2VudH0lJyIpCiAgICAgICAgICAgIHByb2dyZXNzLmV4ZWN1dGVfc2NyaXB0KCJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyY2VudCcpLmlubmVyVGV4dCA9ICcje3BlcmNlbnR9JSciKQogICAgICAgICAgfQogICAgICAgICkgZG8gfHJlbW90ZV9maWxlfAogICAgICAgICAgSU8uY29weV9zdHJlYW0ocmVtb3RlX2ZpbGUsIHRlbXBmaWxlKQogICAgICAgIGVuZAoKICAgICAgICB0ZW1wZmlsZS5jbG9zZQogICAgICAgIEZpbGVVdGlscy5tdih0ZW1wZmlsZS5wYXRoLCBsb2NhbF9wYXRoKQogICAgICAgIHByb2dyZXNzLmNsb3NlIGlmIHByb2dyZXNzLnZpc2libGU/CgogICAgICAgIGlmIEZpbGUuZXhpc3Q/KGxvY2FsX3BhdGgpICYmIEZpbGUuc2l6ZShsb2NhbF9wYXRoKSA+IDAKICAgICAgICAgIGRlZmluaXRpb24gPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuZGVmaW5pdGlvbnMubG9hZChsb2NhbF9wYXRoLCBhbGxvd19uZXdlcjogdHJ1ZSkKICAgICAgICAgIGlmIGRlZmluaXRpb24KICAgICAgICAgICAgaW5zdGFuY2UgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwucGxhY2VfY29tcG9uZW50KGRlZmluaXRpb24pCiAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINil2K/Ysdin2Kwg2KfZhNmF2YPZiNmGINio2YbYrNin2K0iKSB1bmxlc3MgaW5zdGFuY2UKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pqg77iPINmE2YUg2YrYqtmFINiq2LnYsdmK2YEg2KfZhNmF2YPZiNmGIikKICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDZhNmFINmK2KrZhSDYrdmB2Lgg2KfZhNmF2YTZgSDYqNi02YPZhCDYtdit2YrYrSIpCiAgICAgICAgZW5kCgogICAgICByZXNjdWUgPT4gZQogICAgICAgIHRlbXBmaWxlLmNsb3NlIGlmIHRlbXBmaWxlCiAgICAgICAgdGVtcGZpbGUudW5saW5rIGlmIHRlbXBmaWxlCiAgICAgICAgcHJvZ3Jlc3MuY2xvc2UgaWYgcHJvZ3Jlc3MudmlzaWJsZT8KICAgICAgICBVSS5tZXNzYWdlYm94KCLinYwg2K7Yt9ijINmB2Yog2KfZhNiq2K3ZhdmK2YQg2KPZiCDYp9mE2KXYr9ix2KfYrDogI3tlLm1lc3NhZ2V9IikKICAgICAgZW5kCiAgICBlbmQKICBlbHNlCiAgICBiZWdpbgogICAgICBpZiBGaWxlLmV4aXN0Pyhsb2NhbF9wYXRoKSAmJiBGaWxlLnNpemUobG9jYWxfcGF0aCkgPiAwCiAgICAgICAgZGVmaW5pdGlvbiA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5kZWZpbml0aW9ucy5sb2FkKGxvY2FsX3BhdGgsIGFsbG93X25ld2VyOiB0cnVlKQogICAgICAgIGlmIGRlZmluaXRpb24KICAgICAgICAgIGluc3RhbmNlID0gU2tldGNodXAuYWN0aXZlX21vZGVsLnBsYWNlX2NvbXBvbmVudChkZWZpbml0aW9uKQogICAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KXYr9ix2KfYrCDYp9mE2YXZg9mI2YYg2KjZhtis2KfYrSIpIHVubGVzcyBpbnN0YW5jZQogICAgICAgIGVsc2UKICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDZhNmFINmK2KrZhSDYqti52LHZitmBINin2YTZhdmD2YjZhiIpCiAgICAgICAgZW5kCiAgICAgIGVsc2UKICAgICAgICBVSS5tZXNzYWdlYm94KCLimqDvuI8g2KfZhNmF2YTZgSDYp9mE2YXZiNis2YjYryDYqtin2YTZgSDYo9mIINmB2KfYsdi6IikKICAgICAgZW5kCiAgICByZXNjdWUgPT4gZQogICAgICBVSS5tZXNzYWdlYm94KCLinYwg2K7Yt9ijINij2KvZhtin2KEg2KfZhNil2K/Ysdin2Kw6ICN7ZS5tZXNzYWdlfSIpCiAgICBlbmQKICBlbmQKZW5kCgpkbGcuYWRkX2FjdGlvbl9jYWxsYmFjaygiY2xlYXJDb21wb25lbnRDYWNoZSIpIGRvIHxffAogIGJlZ2luCiAgICBjYWNoZV9kaXIgPSBGaWxlLmpvaW4oRGlyLnRtcGRpciwgIm1oZGVzaWduX2NhY2hlXzEiKQogICAgaWYgRmlsZS5kaXJlY3Rvcnk/KGNhY2hlX2RpcikKICAgICAgRmlsZVV0aWxzLnJtX3JmKGNhY2hlX2RpcikKICAgIGVuZAogICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KfZhNiq2K3Yr9mK2Ksg2KjZhtis2KfYrS4iKQogIHJlc2N1ZSA9PiBlCiAgICBVSS5tZXNzYWdlYm94KCLinYwg2YHYtNmEINit2LDZgSDYp9mE2YXZhNmB2KfYqiDYp9mE2YXYpNmC2KrYqTogI3tlLm1lc3NhZ2V9IikKICBlbmQKZW5kCmRsZy5zaG93CiAgZW5kCgogIHVubGVzcyBmaWxlX2xvYWRlZD8oX19GSUxFX18pCiAgICBVSS5tZW51KCJQbHVnaW5zIikuYWRkX2l0ZW0oIiN7UExVR0lOX05BTUV9IC0g2KrZgdi52YrZhCIpIHsgYWN0aXZhdGUodHJ1ZSkgfQogICAgVUkubWVudSgiUGx1Z2lucyIpLmFkZF9pdGVtKCIje1BMVUdJTl9OQU1FfSAtINix2YLZhSDYp9mE2KzZh9in2LIiKSB7IFVJLm1lc3NhZ2Vib3goIvCflJEg2LHZgtmFINin2YTYrNmH2KfYsjpcbiIgKyBnZXRfZGV2aWNlX2lkKSB9CiAgICBVSS5tZW51KCJQbHVnaW5zIikuYWRkX2l0ZW0oIk1IREVTSUdOIC0g2KrYrdiv2YrYqyDYp9mE2YXZg9iq2KjYqSIpIGRvCiAgICAgIGNhY2hlX2RpciA9IEZpbGUuam9pbihEaXIudG1wZGlyLCAibWhkZXNpZ25fY2FjaGVfMSIpCiAgICAgIGlmIEZpbGUuZGlyZWN0b3J5PyhjYWNoZV9kaXIpCiAgICAgICAgRmlsZVV0aWxzLnJtX3JmKGNhY2hlX2RpcikKICAgICAgZW5kCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINin2YTYqtit2K/ZitirINio2YbYrNin2K0uIikKICAgIGVuZAoKICAgIHRvb2xiYXIgPSBVSTo6VG9vbGJhci5uZXcoUExVR0lOX05BTUUpCiAgICBjbWQgPSBVSTo6Q29tbWFuZC5uZXcoItmF2YPYqtio2KkgI3tQTFVHSU5fTkFNRX0iKSB7IHNob3dfbGlicmFyeSB9CgogICAgaWNvbl9wYXRoID0gRmlsZS5qb2luKFBMVUdJTl9ESVIsICJpY29uLnBuZyIpIHJlc2N1ZSBuaWwKICAgIGlmIEZpbGUuZXhpc3Q/KGljb25fcGF0aCkKICAgICAgY21kLnNtYWxsX2ljb24gPSBpY29uX3BhdGgKICAgICAgY21kLmxhcmdlX2ljb24gPSBpY29uX3BhdGgKICAgIGVuZAogICAgY21kLnRvb2x0aXAgPSAi2KrYtNi62YrZhCDZhdmD2KrYqNipIE1IREVTSUdOIgogICAgdG9vbGJhci5hZGRfaXRlbShjbWQpCgogICAgY21kX3VuaXF1ZSA9IFVJOjpDb21tYW5kLm5ldygi2KzYudmEINmD2YQg2KfZhNmF2YPZiNmG2KfYqiDZgdix2YrYr9ipIikgewogICAgICBtb2R1bGUgTUhERVNJR05fVU5JUVVJRlkKICAgICAgICBkZWYgc2VsZi5tYWtlX2FsbF9jb21wb25lbnRzX3VuaXF1ZShlbnRpdGllcykKICAgICAgICAgIGVudGl0aWVzLmdyZXAoU2tldGNodXA6OkNvbXBvbmVudEluc3RhbmNlKS5lYWNoIGRvIHxpbnN0YW5jZXwKICAgICAgICAgICAgaW5zdGFuY2UubWFrZV91bmlxdWUKICAgICAgICAgICAgbWFrZV9hbGxfY29tcG9uZW50c191bmlxdWUoaW5zdGFuY2UuZGVmaW5pdGlvbi5lbnRpdGllcykKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGRlZiBzZWxmLm1ha2VfZGVmaW5pdGlvbnNfdW5pcXVlCiAgICAgICAgICBtb2RlbCA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbAogICAgICAgICAgbW9kZWwuZGVmaW5pdGlvbnMuZWFjaCBkbyB8ZGVmaW5pdGlvbnwKICAgICAgICAgICAgbmV4dCBpZiBkZWZpbml0aW9uLmdyb3VwPyB8fCBkZWZpbml0aW9uLmltYWdlPwogICAgICAgICAgICBkZWZpbml0aW9uLmluc3RhbmNlcy5lYWNoIGRvIHxpbnN0YW5jZXwKICAgICAgICAgICAgICBpbnN0YW5jZS5tYWtlX3VuaXF1ZQogICAgICAgICAgICAgIG1ha2VfYWxsX2NvbXBvbmVudHNfdW5pcXVlKGluc3RhbmNlLmRlZmluaXRpb24uZW50aXRpZXMpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZGVmIHNlbGYucnVuX3VuaXF1aWZ5CiAgICAgICAgICBtb2RlbCA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbAogICAgICAgICAgbW9kZWwuc3RhcnRfb3BlcmF0aW9uKCLYrNi52YQg2YPZhCDYp9mE2YXZg9mI2YbYp9iqINmB2LHZitiv2KkiLCB0cnVlKQogICAgICAgICAgbWFrZV9hbGxfY29tcG9uZW50c191bmlxdWUobW9kZWwuZW50aXRpZXMpCiAgICAgICAgICBtYWtlX2RlZmluaXRpb25zX3VuaXF1ZQogICAgICAgICAgbW9kZWwuY29tbWl0X29wZXJhdGlvbgogICAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KzYudmEINmD2YQg2KfZhNmD2YXYqNmI2YbZhtiq2KfYqiDZgdix2YrYr9ipLiIpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBNSERFU0lHTl9VTklRVUlGWS5ydW5fdW5pcXVpZnkKICAgIH0KICAgIHVuaXF1ZV9pY29uX3BhdGggPSBGaWxlLmpvaW4oUExVR0lOX0RJUiwgInVuaXF1ZV9pY29uLnBuZyIpIHJlc2N1ZSBuaWwKICAgIGlmIEZpbGUuZXhpc3Q/KHVuaXF1ZV9pY29uX3BhdGgpCiAgICAgIGNtZF91bmlxdWUuc21hbGxfaWNvbiA9IHVuaXF1ZV9pY29uX3BhdGgKICAgICAgY21kX3VuaXF1ZS5sYXJnZV9pY29uID0gdW5pcXVlX2ljb25fcGF0aAogICAgZW5kCiAgICBjbWRfdW5pcXVlLnRvb2x0aXAgPSAi2KfYrNi52YQg2KfZhNmF2YPZiNmG2KfYqiDYp9mE2YHYsdi52YrYqSDZgdix2YrYr9ipIgogICAgdG9vbGJhci5hZGRfaXRlbShjbWRfdW5pcXVlKQoKICAgIHRvb2xiYXIucmVzdG9yZQogICAgZmlsZV9sb2FkZWQoX19GSUxFX18pCiAgZW5kCmVuZA=="  // كود روبي مشفر بـ base64
}
