{
  "main_code": "cmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ3NlY3VyZXJhbmRvbScKcmVxdWlyZSAnb3Blbi11cmknCnJlcXVpcmUgJ3RtcGRpcicKcmVxdWlyZSAnYmFzZTY0JwpyZXF1aXJlICd0ZW1wZmlsZScKcmVxdWlyZSAnZGlnZXN0JwpyZXF1aXJlICdmaWxldXRpbHMnCgptb2R1bGUgTUhEZXNpZ24KICBQTFVHSU5fTkFNRSA9ICJNSERlc2lnbiIKICBBUElfVVJMID0gImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9tYXJ3YW5hZGVsZWx0YWhhbi1zdWRvL0FQSTEyMy9yZWZzL2hlYWRzL21haW4vZW1haWwuanNvbiIKCiAgQ09NUE9ORU5UUyA9IGJlZ2luCiAgICB1cmwgPSAiaHR0cHM6Ly9tYWhtb3VkZGVzaWduLmNvbS9TS0VUQ0hVUC9jb21wb25lbnRzLVY0Lmpzb24iCiAgICBqc29uX3JhdyA9IFVSSS5vcGVuKHVybCkucmVhZAogICAganNvbl9kYXRhID0gSlNPTi5wYXJzZShqc29uX3JhdykKICAgIGRlY29kZWRfanNvbiA9IEJhc2U2NC5kZWNvZGU2NChqc29uX2RhdGFbImRhdGEiXSkKICAgIEpTT04ucGFyc2UoZGVjb2RlZF9qc29uLCBzeW1ib2xpemVfbmFtZXM6IHRydWUpCiAgcmVzY3VlID0+IGUKICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYrdiv2Ksg2K7Yt9ijINmB2Yog2KrYrdmF2YrZhCDYp9mE2YXZg9iq2KjYqTogI3tlLm1lc3NhZ2V9IikKICAgIFtdCiAgZW5kCgogICMgPT0g2YHYptipINmE2YjYtti5INin2YTZhdmD2YjZhtin2KogPT0KICBjbGFzcyBDb21wb25lbnRQbGFjZXIKICAgIGRlZiBpbml0aWFsaXplKGRlZmluaXRpb24sIG5hbWUpCiAgICAgIEBkZWZpbml0aW9uID0gZGVmaW5pdGlvbgogICAgICBAbmFtZSA9IG5hbWUKICAgICAgQGlwID0gU2tldGNodXA6OklucHV0UG9pbnQubmV3CiAgICBlbmQKCiAgICBkZWYgb25Nb3VzZU1vdmUoZmxhZ3MsIHgsIHksIHZpZXcpCiAgICAgIEBpcC5waWNrKHZpZXcsIHgsIHkpCiAgICAgIHZpZXcuaW52YWxpZGF0ZQogICAgZW5kCgogICAgZGVmIGRyYXcodmlldykKICAgICAgcmV0dXJuIHVubGVzcyBAaXAudmFsaWQ/CiAgICAgIHRyID0gR2VvbTo6VHJhbnNmb3JtYXRpb24ubmV3KEBpcC5wb3NpdGlvbikKICAgICAgdmlldy5kcmF3KEdMX0xJTkVfU1RSSVAsIFtAaXAucG9zaXRpb25dKQogICAgICBiZWdpbgogICAgICAgIHB0cyA9IEBkZWZpbml0aW9uLmJvdW5kcy5jb3JuZXIoMC4uNykubWFwIHsgfHB0fCBwdC50cmFuc2Zvcm0odHIpIH0KICAgICAgICB2aWV3LmRyYXcoR0xfUE9MWUdPTiwgcHRzKQogICAgICByZXNjdWUKICAgICAgZW5kCiAgICBlbmQKICBlbmQKCiAgZGVmIG9uTEJ1dHRvbkRvd24oZmxhZ3MsIHgsIHksIHZpZXcpCiAgICBpZiBAaXAudmFsaWQ/CiAgICAgIHRyID0gR2VvbTo6VHJhbnNmb3JtYXRpb24ubmV3KEBpcC5wb3NpdGlvbikKICAgICAgaW5zdGFuY2UgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuZW50aXRpZXMuYWRkX2luc3RhbmNlKEBkZWZpbml0aW9uLCB0cikKICAgICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnNlbGVjdGlvbi5jbGVhcgogICAgICBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuc2VsZWN0aW9uLmFkZChpbnN0YW5jZSkKICAgICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnRvb2xzLnBvcF90b29sCiAgICAgIFNrZXRjaHVwLnNlbmRfYWN0aW9uKCJzZWxlY3RNb3ZlVG9vbDoiKQogICAgZW5kCiAgZW5kCiAgZW5kCgogIGRlZiBzZWxmLmdldF9kZXZpY2VfaWQKICAgIHByZWZzID0gU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZGV2aWNlX2lkIikKICAgIHJldHVybiBwcmVmcyB1bmxlc3MgcHJlZnMubmlsPyB8fCBwcmVmcy5lbXB0eT8KICAgIGlkID0gU2VjdXJlUmFuZG9tLnV1aWQKICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJkZXZpY2VfaWQiLCBpZCkKICAgIGlkCiAgZW5kCgogICMgPT0g2KrZgdi52YrZhCDYp9mE2KXYttin2YHYqSA9PQogIGRlZiBzZWxmLmFjdGl2YXRlKGZvcmNlX3Byb21wdCA9IHRydWUpCiAgICBlbWFpbCA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImVtYWlsIikgfHwgIiIKICAgIGxpY2Vuc2UgPSBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJsaWNlbnNlIikgfHwgIiIKCiAgICAjINil2LDYpyDZg9in2YYg2YXZgdix2YjYtiDZhtiv2K7ZhCDYp9mE2KjZitin2YbYp9iqINij2Ygg2KfZhNio2YrYp9mG2KfYqiDZgdin2LHYutipCiAgICBpZiBmb3JjZV9wcm9tcHQgfHwgZW1haWwuZW1wdHk/IHx8IGxpY2Vuc2UuZW1wdHk/CiAgICAgIGlucHV0ID0gVUkuaW5wdXRib3goWyLYp9mE2KjYsdmK2K8g2KfZhNil2YTZg9iq2LHZiNmG2YoiLCAi2YPZhNmF2Kkg2KfZhNmF2LHZiNixIl0sIFtlbWFpbCwgbGljZW5zZV0sICLYqtmB2LnZitmEIE1IRGVzaWduIikKICAgICAgcmV0dXJuIHVubGVzcyBpbnB1dAogICAgICBlbWFpbCwgbGljZW5zZSA9IGlucHV0CiAgICBlbmQKCiAgICAjINin2YTYqtit2YLZgiDZhdmGINin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZiiDZiNmD2YTZhdipINin2YTZhdix2YjYsSDYudio2LEgQVBJCiAgICB2YWxpZCA9IHZlcmlmeV9jcmVkZW50aWFscyhlbWFpbCwgbGljZW5zZSkKCiAgICBpZiB2YWxpZAogICAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZW1haWwiLCBlbWFpbCkKICAgICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImxpY2Vuc2UiLCBsaWNlbnNlKQogICAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiYWN0aXZhdGVkX29uY2UiLCB0cnVlKQogICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYqtmB2LnZitmEINin2YTYpdi22KfZgdipINio2YbYrNin2K0hINmF2KjYsdmI2YMg2YrYpyDZh9mG2K/Ys9ipINin2YTYpdi22KfZgdipINi02LrYp9mE2Kkg2KrZhSDYqNix2YXYrNipINin2YTYpdi22KfZgdipINio2YjYp9iz2LfYqSDZhdmH2YbYr9izINmF2LHZiNin2YYg2LnYp9iv2YQiKSBpZiBmb3JjZV9wcm9tcHQKICAgICAgdHJ1ZQogICAgZWxzZQogICAgICBVSS5tZXNzYWdlYm94KCLinYwg2KfZhNio2YrYp9mG2KfYqiDYutmK2LEg2LXYrdmK2K3YqSEg2K3Yp9mI2YQg2YXYsdipINiq2KfZhtmK2Kkg2YrYpyDZh9mG2K/Ys9ipINin2Ygg2YPZhNmFIDAxMjA0Mjc5NjA2IikgaWYgZm9yY2VfcHJvbXB0CiAgICAgIGZhbHNlCiAgICBlbmQKICByZXNjdWUgPT4gZQogICAgaWYgU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiYWN0aXZhdGVkX29uY2UiKQogICAgICB0cnVlCiAgICBlbHNlCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDYrdiv2Ksg2K7Yt9ijINmB2Yog2KfZhNiq2K3ZgtmCOiAje2UubWVzc2FnZX0iKSBpZiBmb3JjZV9wcm9tcHQKICAgICAgZmFsc2UKICAgIGVuZAogIGVuZAoKICAjID09INin2YTYqtit2YLZgiDZhdmGINin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZiiDZiNmD2YTZhdipINin2YTZhdix2YjYsSA9PQogIGRlZiBzZWxmLnZlcmlmeV9jcmVkZW50aWFscyhlbWFpbCwgbGljZW5zZSkKICAgIGJlZ2luCiAgICAgIHVyaSA9IFVSSS5wYXJzZShBUElfVVJMKQogICAgICByZXNwb25zZSA9IE5ldDo6SFRUUC5nZXRfcmVzcG9uc2UodXJpKQogICAgICAKICAgICAgaWYgcmVzcG9uc2UuaXNfYT8oTmV0OjpIVFRQU3VjY2VzcykKICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS5ib2R5KQogICAgICAgIAogICAgICAgICMg2KfZhNio2K3YqyDYudmGINin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZiiDZiNmD2YTZhdipINin2YTZhdix2YjYsSDZgdmKINin2YTYqNmK2KfZhtin2KoKICAgICAgICBpZiBkYXRhLmlzX2E/KEFycmF5KQogICAgICAgICAgdXNlciA9IGRhdGEuZmluZCB7IHx1c2VyfCB1c2VyWyJlbWFpbCJdID09IGVtYWlsICYmIHVzZXJbInBhc3N3b3JkIl0gPT0gbGljZW5zZSB9CiAgICAgICAgICByZXR1cm4gIXVzZXIubmlsPwogICAgICAgIGVsc2lmIGRhdGEuaXNfYT8oSGFzaCkKICAgICAgICAgIHJldHVybiBkYXRhWyJlbWFpbCJdID09IGVtYWlsICYmIGRhdGFbInBhc3N3b3JkIl0gPT0gbGljZW5zZQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgCiAgICAgIGZhbHNlCiAgICByZXNjdWUgPT4gZQogICAgICBVSS5tZXNzYWdlYm94KCLinYwg2K7Yt9ijINmB2Yog2KfZhNin2KrYtdin2YQg2KjYp9mE2K7Yp9iv2YU6ICN7ZS5tZXNzYWdlfSIpCiAgICAgIGZhbHNlCiAgICBlbmQKICBlbmQKCiAgZGVmIHNlbGYuYWN0aXZhdGVkPwogICAgZW1haWwgPSBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIpCiAgICBsaWNlbnNlID0gU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAibGljZW5zZSIpCiAgICAhZW1haWwudG9fcy5lbXB0eT8gJiYgIWxpY2Vuc2UudG9fcy5lbXB0eT8KICBlbmQKCiAgZGVmIHNlbGYuc2hvd19saWJyYXJ5CiAgICAjID09INin2YTYqtit2YLZgiDZhdmGINin2YTYqtmB2LnZitmEID09CiAgICB1bmxlc3MgYWN0aXZhdGUoZmFsc2UpCiAgICAgIGFjdGl2YXRlKHRydWUpCiAgICAgIHJldHVybgogICAgZW5kCgogICAgZGxnID0gVUk6Okh0bWxEaWFsb2cubmV3KHsKICAgICAgOmRpYWxvZ190aXRsZSA9PiAi2YXZg9iq2KjYqSDZhdmD2YjZhtin2KogTUhEZXNpZ24iLAogICAgICA6cHJlZmVyZW5jZXNfa2V5ID0+ICJtaGRlc2lnbl9saWJyYXJ5IiwKICAgICAgOnNjcm9sbGFibGUgPT4gdHJ1ZSwKICAgICAgOnJlc2l6YWJsZSA9PiB0cnVlLAogICAgICA6d2lkdGggPT4gODAwLAogICAgICA6aGVpZ2h0ID0+IDY1MAogICAgfSkKCiAgICBjYXRlZ29yaWVzID0gQ09NUE9ORU5UUy5tYXAgeyB8Y3wgY1s6Y2F0ZWdvcnldIH0udW5pcQoKICAgIGh0bWwgPSA8PC1IVE1MCiAgICA8aHRtbD48aGVhZD4KICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVRhamF3YWw6d2dodEA0MDA7NzAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgICAgPHN0eWxlPgogICAgICAgIGJvZHkge2ZvbnQtZmFtaWx5OidUYWphd2FsJyxzYW5zLXNlcmlmO21hcmdpbjowO2JhY2tncm91bmQ6I2Y5ZjlmOTtwYWRkaW5nOjAgMjBweCA0MHB4O2RpcmVjdGlvbjpydGw7fQogICAgICAgIGhlYWRlciB7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjIwcHggMDt9CiAgICAgICAgaGVhZGVyIGltZyB7aGVpZ2h0OjUwcHg7Ym9yZGVyLXJhZGl1czo1MCU7fQogICAgICAgIGhlYWRlciBoMiB7bWFyZ2luOjA7Zm9udC1zaXplOjI0cHg7Y29sb3I6IzJlN2QzMjt9CiAgICAgICAgLm1lbnUtdG9nZ2xlIHtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6MjhweDt1c2VyLXNlbGVjdDpub25lO30KICAgICAgICAuZmlsdGVyIHtkaXNwbGF5Om5vbmU7bWFyZ2luLWJvdHRvbToyMHB4O30KICAgICAgICAuZmlsdGVyIHNlbGVjdCB7Zm9udC1zaXplOjE2cHg7cGFkZGluZzo2cHggMTBweDtib3JkZXItcmFkaXVzOjZweDtib3JkZXI6MXB4IHNvbGlkICNjY2M7fQogICAgICAgIC5ncmlkIHtkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdChhdXRvLWZpbGwsbWlubWF4KDIwMHB4LDFmcikpO2dhcDoyMHB4O30KICAgICAgICAuY2FyZCB7YmFja2dyb3VuZDp3aGl0ZTtib3JkZXItcmFkaXVzOjEycHg7cGFkZGluZzoxMnB4O2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMDgpO3RleHQtYWxpZ246Y2VudGVyO3RyYW5zaXRpb246dHJhbnNmb3JtIDAuM3MgZWFzZSxib3gtc2hhZG93IDAuM3MgZWFzZTt9CiAgICAgICAgLmNhcmQ6aG92ZXIge3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01cHgpO2JveC1zaGFkb3c6MCA4cHggMjBweCByZ2JhKDAsMCwwLDAuMTIpO30KICAgICAgICBpbWcuY29tcG9uZW50LWltZyB7d2lkdGg6MTAwJTtoZWlnaHQ6MjAwcHg7b2JqZWN0LWZpdDpjb3Zlcjtib3JkZXItcmFkaXVzOjhweDt9CiAgICAgICAgaDQge21hcmdpbjoxMHB4IDAgNXB4O2ZvbnQtc2l6ZToxN3B4O2NvbG9yOiMzMzM7fQogICAgICAgIHAge2ZvbnQtc2l6ZToxM3B4O2NvbG9yOiM2NjY7bWFyZ2luOjA7fQogICAgICAgIGJ1dHRvbiB7bWFyZ2luLXRvcDoxMHB4O3BhZGRpbmc6NnB4IDE0cHg7YmFja2dyb3VuZDojNDNhMDQ3O2NvbG9yOndoaXRlO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NXB4O2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YmFja2dyb3VuZCAwLjNzO30KICAgICAgICBidXR0b246aG92ZXIge2JhY2tncm91bmQ6IzJlN2QzMjt9CiAgICAgICAgZm9vdGVyIHttYXJnaW4tdG9wOjQwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjEycHg7Y29sb3I6Izk5OTt9CiAgICAgIDwvc3R5bGU+CiAgICA8L2hlYWQ+CiAgICA8Ym9keSBvbmNvbnRleHRtZW51PSJyZXR1cm4gZmFsc2UiPgogICAgICA8aGVhZGVyPgogICAgICAgIDxpbWcgc3JjPSJodHRwczovL21haG1vdWRkZXNpZ24uY29tL1NLRVRDSFVQL2NvbXBvbmVudHMvbG9nby5qcGVnIiBhbHQ9IkxvZ28iIC8+CiAgICAgICAgPGgyPtmF2YPYqtio2Kkg2YXZg9mI2YbYp9iqIE1IRGVzaWduPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJtZW51LXRvZ2dsZSIgb25jbGljaz0idG9nZ2xlTWVudSgpIj7imLA8L2Rpdj4KICAgICAgPC9oZWFkZXI+CgogICAgICA8ZGl2IGNsYXNzPSJmaWx0ZXIiIGlkPSJmaWx0ZXItYm94Ij4KICAgICAgICA8bGFiZWw+CiAgICAgICAgICDwn5SNINiq2LXZgdmK2Kkg2K3Ys9ioOgogICAgICAgICAgPHNlbGVjdCBpZD0iY2F0ZWdvcnkiIG9uY2hhbmdlPSJmaWx0ZXJDb21wb25lbnRzKCkiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJhbGwiPtin2YTZg9mEPC9vcHRpb24+CiAgICAgICAgICAgICN7Y2F0ZWdvcmllcy5tYXAgeyB8Y2F0fCAiPG9wdGlvbiB2YWx1ZT0nI3tjYXR9Jz4je2NhdH08L29wdGlvbj4iIH0uam9pbn0KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgIDwvbGFiZWw+CiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBpZD0iY29tcG9uZW50cyIgY2xhc3M9ImdyaWQiPjwvZGl2PgoKICAgICAgPGZvb3Rlcj4KICAgICAgICDYqtmFINio2LHZhdis2Kkg2YjYqti12YXZitmFINin2YTYpdi22KfZgdipINio2YjYp9iz2LfYqSA8Yj5taGRlc2lnbi1lZy5jb208L2I+INin2YTZhdmH2YbYr9izINmF2LHZiNin2YYg2LnYp9iv2YQg2LfZh9in2YYgCiAgICAgICAgKNis2YXZiti5INin2YTYrdmC2YjZgiDZhdit2YHZiNi42Kkg2YTZhNmF2YfZhtiv2LMg2YXYsdmI2KfZhiDYudin2K/ZhCDYt9mH2KfZhikuPGJyPgogICAgICAgIPCfk54g2YTZhNiq2YjYp9i12YQ6IDxiPjAxMjA0Mjc5NjA2PC9iPgogICAgICA8L2Zvb3Rlcj4KCiAgICAgIDxzY3JpcHQ+CmZ1bmN0aW9uIGxvYWRDb21wb25lbnQoY29tcCl7c2tldGNodXAubG9hZENvbXBvbmVudEJ5RGF0YShKU09OLnN0cmluZ2lmeShjb21wKSk7fQpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGU9PmUucHJldmVudERlZmF1bHQoKSk7CmNvbnN0IGFsbENvbXBvbmVudHM9I3tDT01QT05FTlRTLnRvX2pzb259OwpmdW5jdGlvbiByZW5kZXIoYyl7bGV0IGg9IiI7Yy5mb3JFYWNoKHg9PntoKz1gPGRpdiBjbGFzcz0iY2FyZCI+PGltZyBjbGFzcz0iY29tcG9uZW50LWltZyIgc3JjPSIke3guaW1hZ2V9IiAvPjxoND4ke3gubmFtZX08L2g0PjxwPiR7eC5kZXNjfTwvcD48YnV0dG9uIG9uY2xpY2s9J2xvYWRDb21wb25lbnQoJHtKU09OLnN0cmluZ2lmeSh4KX0pJz7Ypdiv2LHYp9isPC9idXR0b24+PC9kaXY+YH0pO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb21wb25lbnRzIikuaW5uZXJIVE1MPWg7fQpmdW5jdGlvbiBmaWx0ZXJDb21wb25lbnRzKCl7Y29uc3QgY2F0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYXRlZ29yeSIpLnZhbHVlO2lmKGNhdD09PSJhbGwiKXJlbmRlcihhbGxDb21wb25lbnRzKTtlbHNlIHJlbmRlcihhbGxDb21wb25lbnRzLmZpbHRlcihjPT5jLmNhdGVnb3J5PT09Y2F0KSk7fQpmdW5jdGlvbiB0b2dnbGVNZW51KCl7Y29uc3QgYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmlsdGVyLWJveCIpO2Iuc3R5bGUuZGlzcGxheT0oYi5zdHlsZS5kaXNwbGF5PT09ImJsb2NrIik/Im5vbmUiOiJibG9jayI7fQp3aW5kb3cub25sb2FkPSgpPT5maWx0ZXJDb21wb25lbnRzKCk7CiAgICAgIDwvc2NyaXB0PgogICAgPC9ib2R5PjwvaHRtbD4KICAgIEhUTUwKCiAgICBkbGcuc2V0X2h0bWwoaHRtbCkKCiAgICBkbGcuYWRkX2FjdGlvbl9jYWxsYmFjaygibG9hZENvbXBvbmVudEJ5RGF0YSIpIGRvIHxfLCBjb21wX2pzb258CiAgICAgIGNvbXAgPSBKU09OLnBhcnNlKGNvbXBfanNvbiwgc3ltYm9saXplX25hbWVzOiB0cnVlKQogICAgICB1cmwgPSBVUkkucGFyc2UoY29tcFs6dXJsXSkKICAgICAgaGFzaF9uYW1lID0gRGlnZXN0OjpTSEEyNTYuaGV4ZGlnZXN0KHVybC50b19zKVswLi4xNl0gKyAiLnNrcCIKICAgICAgY2FjaGVfZGlyID0gRmlsZS5qb2luKERpci50bXBkaXIsICJtaGRlc2lnbl9jYWNoZV8xIikKICAgICAgRmlsZVV0aWxzLm1rZGlyX3AoY2FjaGVfZGlyKQogICAgICBsb2NhbF9wYXRoID0gRmlsZS5qb2luKGNhY2hlX2RpciwgaGFzaF9uYW1lKQoKICAgICAgdW5sZXNzIEZpbGUuZXhpc3Q/KGxvY2FsX3BhdGgpCiAgICAgICAgcHJvZ3Jlc3MgPSBVSTo6SHRtbERpYWxvZy5uZXcoewogICAgICAgICAgOmRpYWxvZ190aXRsZSA9PiAi2KzYp9ix2Yog2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYuLi4iLAogICAgICAgICAgOnByZWZlcmVuY2VzX2tleSA9PiAibWhkZXNpZ25fcHJvZ3Jlc3MiLAogICAgICAgICAgOnNjcm9sbGFibGUgPT4gZmFsc2UsCiAgICAgICAgICA6cmVzaXphYmxlID0+IGZhbHNlLAogICAgICAgICAgOndpZHRoID0+IDMwMCwKICAgICAgICAgIDpoZWlnaHQgPT4gMTUwCiAgICAgICAgfSkKCiAgICAgICAgcHJvZ3Jlc3Muc2V0X2h0bWwgPDwtSFRNTAogICAgICAgICAgPGh0bWw+PGhlYWQ+CiAgICAgICAgICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogJ1RhamF3YWwnLCBzYW5zLXNlcmlmOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMDsgcGFkZGluZzogMjBweDsgZGlyZWN0aW9uOiBydGw7IH0KICAgICAgICAgICAgICBoMyB7IG1hcmdpbjogMTBweCAwOyB9CiAgICAgICAgICAgICAgI3Byb2dyZXNzLWJhciB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDIwcHg7IGJhY2tncm91bmQ6ICNkZGQ7IGJvcmRlci1yYWRpdXM6IDEwcHg7IG92ZXJmbG93OiBoaWRkZW47IG1hcmdpbi10b3A6IDEwcHg7IH0KICAgICAgICAgICAgICAjcHJvZ3Jlc3MtZmlsbCB7IGhlaWdodDogMTAwJTsgd2lkdGg6IDAlOyBiYWNrZ3JvdW5kOiAjNGNhZjUwOyB0cmFuc2l0aW9uOiB3aWR0aCAwLjJzIGVhc2U7IH0KICAgICAgICAgICAgICAjcGVyY2VudCB7IG1hcmdpbi10b3A6IDhweDsgZm9udC1zaXplOiAxNHB4OyB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICA8L2hlYWQ+PGJvZHk+CiAgICAgICAgICAgIDxoMz7YrNin2LHZiiDYqtit2YXZitmEINin2YTZhdmD2YjZhi4uLjwvaDM+CiAgICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzLWJhciI+PGRpdiBpZD0icHJvZ3Jlc3MtZmlsbCI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9InBlcmNlbnQiPjAlPC9kaXY+CiAgICAgICAgICA8L2JvZHk+PC9odG1sPgogICAgICAgIEhUTUwKCiAgICAgICAgcHJvZ3Jlc3Muc2hvdwoKICAgICAgICBVSS5zdGFydF90aW1lcigwLjMsIGZhbHNlKSBkbwogICAgICAgICAgYmVnaW4KICAgICAgICAgICAgY29udGVudF9sZW5ndGggPSBuaWwKICAgICAgICAgICAgdGVtcGZpbGUgPSBUZW1wZmlsZS5uZXcoIm1oY29tcG9uZW50IikKCiAgICAgICAgICAgIFVSSS5vcGVuKHVybCwKICAgICAgICAgICAgICBjb250ZW50X2xlbmd0aF9wcm9jOiAtPihsZW4pIHsgY29udGVudF9sZW5ndGggPSBsZW4gfSwKICAgICAgICAgICAgICBwcm9ncmVzc19wcm9jOiAtPihieXRlcykgewogICAgICAgICAgICAgICAgcGVyY2VudCA9IGNvbnRlbnRfbGVuZ3RoID8gKChieXRlcy50b19mIC8gY29udGVudF9sZW5ndGgpICogMTAwKS50b19pIDogMAogICAgICAgICAgICAgICAgcHJvZ3Jlc3MuZXhlY3V0ZV9zY3JpcHQoImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy1maWxsJykuc3R5bGUud2lkdGggPSAnI3twZXJjZW50fSUnIikKICAgICAgICAgICAgICAgIHByb2dyZXNzLmV4ZWN1dGVfc2NyaXB0KCJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyY2VudCcpLmlubmVyVGV4dCA9ICcje3BlcmNlbnR9JSciKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSBkbyB8cmVtb3RlX2ZpbGV8CiAgICAgICAgICAgICAgSU8uY29weV9zdHJlYW0ocmVtb3RlX2ZpbGUsIHRlbXBmaWxlKQogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIHRlbXBmaWxlLmNsb3NlCiAgICAgICAgICAgIEZpbGVVdGlscy5tdih0ZW1wZmlsZS5wYXRoLCBsb2NhbF9wYXRoKQogICAgICAgICAgICBwcm9ncmVzcy5jbG9zZSBpZiBwcm9ncmVzcy52aXNpYmxlPwoKICAgICAgICAgICAgaWYgRmlsZS5leGlzdD8obG9jYWxfcGF0aCkgJiYgRmlsZS5zaXplKGxvY2FsX3BhdGgpID4gMAogICAgICAgICAgICAgIGRlZmluaXRpb24gPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuZGVmaW5pdGlvbnMubG9hZChsb2NhbF9wYXRoLCBhbGxvd19uZXdlcjogdHJ1ZSkKICAgICAgICAgICAgICBpZiBkZWZpbml0aW9uCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5wbGFjZV9jb21wb25lbnQoZGVmaW5pdGlvbikKICAgICAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINil2K/Ysdin2Kwg2KfZhNmF2YPZiNmGINio2YbYrNin2K0hIikgdW5sZXNzIGluc3RhbmNlCiAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pqg77iPINmE2Kcg2YrZhdmD2YYg2KrYrdmF2YrZhCDZh9iw2Kcg2KfZhNmF2YPZiNmGIikKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDYp9mE2YXZhNmBINi62YrYsSDZhdmI2KzZiNivINij2Ygg2YHYp9ix2LoiKQogICAgICAgICAgICBlbmQKCiAgICAgICAgICByZXNjdWUgPT4gZQogICAgICAgICAgICB0ZW1wZmlsZS5jbG9zZSBpZiB0ZW1wZmlsZQogICAgICAgICAgICB0ZW1wZmlsZS51bmxpbmsgaWYgdGVtcGZpbGUKICAgICAgICAgICAgcHJvZ3Jlc3MuY2xvc2UgaWYgcHJvZ3Jlc3MudmlzaWJsZT8KICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINit2K/YqyDYrti32KMg2YHZiiDYp9mE2KrYrdmF2YrZhDogI3tlLm1lc3NhZ2V9IikKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbHNlCiAgICAgICAgYmVnaW4KICAgICAgICAgIGlmIEZpbGUuZXhpc3Q/KGxvY2FsX3BhdGgpICYmIEZpbGUuc2l6ZShsb2NhbF9wYXRoKSA+IDAKICAgICAgICAgICAgZGVmaW5pdGlvbiA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5kZWZpbml0aW9ucy5sb2FkKGxvY2FsX3BhdGgsIGFsbG93X25ld2VyOiB0cnVlKQogICAgICAgICAgICBpZiBkZWZpbml0aW9uCiAgICAgICAgICAgICAgaW5zdGFuY2UgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwucGxhY2VfY29tcG9uZW50KGRlZmluaXRpb24pCiAgICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KXYr9ix2KfYrCDYp9mE2YXZg9mI2YYg2KjZhtis2KfYrSEiKSB1bmxlc3MgaW5zdGFuY2UKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDZhNinINmK2YXZg9mGINiq2K3ZhdmK2YQg2YfYsNinINin2YTZhdmD2YjZhiIpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZWxzZQogICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLimqDvuI8g2KfZhNmF2YTZgSDYutmK2LEg2YXZiNis2YjYryDYo9mIINmB2KfYsdi6IikKICAgICAgICAgIGVuZAogICAgICAgIHJlc2N1ZSA9PiBlCiAgICAgICAgICBVSS5tZXNzYWdlYm94KCLinYwg2K3Yr9irINiu2LfYoyDZgdmKINin2YTYqtit2YXZitmEOiAje2UubWVzc2FnZX0iKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAoKICAgIGRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJjbGVhckNvbXBvbmVudENhY2hlIikgZG8gfF98CiAgICAgIGJlZ2luCiAgICAgICAgY2FjaGVfZGlyID0gRmlsZS5qb2luKERpci50bXBkaXIsICJtaGRlc2lnbl9jYWNoZV8xIikKICAgICAgICBpZiBGaWxlLmRpcmVjdG9yeT8oY2FjaGVfZGlyKQogICAgICAgICAgRmlsZVV0aWxzLnJtX3JmKGNhY2hlX2RpcikKICAgICAgICBlbmQKICAgICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDZhdiz2K0g2KfZhNiw2KfZg9ix2Kkg2KfZhNmF2KTZgtiq2Kkg2KjZhtis2KfYrS4iKQogICAgICByZXNjdWUgPT4gZQogICAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYrdiv2Ksg2K7Yt9ijINmB2Yog2KfZhNmF2LPYrTogI3tlLm1lc3NhZ2V9IikKICAgICAgZW5kCiAgICBlbmQKICAgIGRsZy5zaG93CiAgZW5kCgogIHVubGVzcyBmaWxlX2xvYWRlZD8oX19GSUxFX18pCiAgICBVSS5tZW51KCJQbHVnaW5zIikuYWRkX2l0ZW0oIiN7UExVR0lOX05BTUV9IC0g2KrZgdi52YrZhCIpIHsgYWN0aXZhdGUodHJ1ZSkgfQogICAgVUkubWVudSgiUGx1Z2lucyIpLmFkZF9pdGVtKCIje1BMVUdJTl9OQU1FfSAtINin2YTYsdmC2YUg2KfZhNiq2LPZhNiz2YTZiiIpIHsgVUkubWVzc2FnZWJveCgi8J+GlCDYp9mE2LHZgtmFINin2YTYqtiz2YTYs9mE2Yo6XG4iICsgZ2V0X2RldmljZV9pZCkgfQogICAgVUkubWVudSgiUGx1Z2lucyIpLmFkZF9pdGVtKCJNSERlc2lnbiAtINmF2LPYrSDYp9mE2LDYp9mD2LHYqSDYp9mE2YXYpNmC2KrYqSIpIGRvCiAgICAgIGNhY2hlX2RpciA9IEZpbGUuam9pbihEaXIudG1wZGlyLCAibWhkZXNpZ25fY2FjaGVfMSIpCiAgICAgIGlmIEZpbGUuZGlyZWN0b3J5PyhjYWNoZV9kaXIpCiAgICAgICAgRmlsZVV0aWxzLnJtX3JmKGNhY2hlX2RpcikKICAgICAgZW5kCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINmF2LPYrSDYp9mE2LDYp9mD2LHYqSDYp9mE2YXYpNmC2KrYqSDYqNmG2KzYp9itLiIpCiAgICBlbmQKCiAgICB0b29sYmFyID0gVUk6OlRvb2xiYXIubmV3KFBMVUdJTl9OQU1FKQogICAgY21kID0gVUk6OkNvbW1hbmQubmV3KCLZhdmD2KrYqNipICN7UExVR0lOX05BTUV9IikgeyBzaG93X2xpYnJhcnkgfQoKICAgIGljb25fcGF0aCA9IEZpbGUuam9pbihQTFVHSU5fRElSLCAiaWNvbi5wbmciKSByZXNjdWUgbmlsCiAgICBpZiBGaWxlLmV4aXN0PyhpY29uX3BhdGgpCiAgICAgIGNtZC5zbWFsbF9pY29uID0gaWNvbl9wYXRoCiAgICAgIGNtZC5sYXJnZV9pY29uID0gaWNvbl9wYXRoCiAgICBlbmQKICAgIGNtZC50b29sdGlwID0gItmB2KrYrSDZhdmD2KrYqNipINmF2YPZiNmG2KfYqiBNSERlc2lnbiIKICAgIHRvb2xiYXIuYWRkX2l0ZW0oY21kKQoKICAgIGNtZF91bmlxdWUgPSBVSTo6Q29tbWFuZC5uZXcoItis2LnZhCDYp9mE2YXZg9mI2YbYp9iqINmB2LHZitiv2KkiKSBkbwogICAgICBtb2R1bGUgTUhEZXNpZ25fVU5JUVVJRlkKICAgICAgICBkZWYgc2VsZi5tYWtlX2FsbF9jb21wb25lbnRzX3VuaXF1ZShlbnRpdGllcykKICAgICAgICAgIGVudGl0aWVzLmdyZXAoU2tldGNodXA6OkNvbXBvbmVudEluc3RhbmNlKS5lYWNoIGRvIHxpbnN0YW5jZXwKICAgICAgICAgICAgaW5zdGFuY2UubWFrZV91bmlxdWUKICAgICAgICAgICAgbWFrZV9hbGxfY29tcG9uZW50c191bmlxdWUoaW5zdGFuY2UuZGVmaW5pdGlvbi5lbnRpdGllcykKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGRlZiBzZWxmLm1ha2VfZGVmaW5pdGlvbnNfdW5pcXVlCiAgICAgICAgICBtb2RlbCA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbAogICAgICAgICAgbW9kZWwuZGVmaW5pdGlvbnMuZWFjaCBkbyB8ZGVmaW5pdGlvbnwKICAgICAgICAgICAgbmV4dCBpZiBkZWZpbml0aW9uLmdyb3VwPyB8fCBkZWZpbml0aW9uLmltYWdlPwogICAgICAgICAgICBkZWZpbml0aW9uLmluc3RhbmNlcy5lYWNoIGRvIHxpbnN0YW5jZXwKICAgICAgICAgICAgICBpbnN0YW5jZS5tYWtlX3VuaXF1ZQogICAgICAgICAgICAgIG1ha2VfYWxsX2NvbXBvbmVudHNfdW5pcXVlKGluc3RhbmNlLmRlZmluaXRpb24uZW50aXRpZXMpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZGVmIHNlbGYucnVuX3VuaXF1aWZ5CiAgICAgICAgICBtb2RlbCA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbAogICAgICAgICAgbW9kZWwuc3RhcnRfb3BlcmF0aW9uKCLYrNi52YQg2KfZhNmF2YPZiNmG2KfYqiDZgdix2YrYr9ipIiwgdHJ1ZSkKICAgICAgICAgIG1ha2VfYWxsX2NvbXBvbmVudHNfdW5pcXVlKG1vZGVsLmVudGl0aWVzKQogICAgICAgICAgbWFrZV9kZWZpbml0aW9uc191bmlxdWUKICAgICAgICAgIG1vZGVsLmNvbW1pdF9vcGVyYXRpb24KICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINis2LnZhCDYrNmF2YrYuSDYp9mE2YXZg9mI2YbYp9iqINmB2LHZitiv2Kkg2KjZhtis2KfYrS4iKQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgTUhEZXNpZ25fVU5JUVVJRlkucnVuX3VuaXF1aWZ5CiAgICBlbmQKICAgIHVuaXF1ZV9pY29uX3BhdGggPSBGaWxlLmpvaW4oUExVR0lOX0RJUiwgInVuaXF1ZV9pY29uLnBuZyIpIHJlc2N1ZSBuaWwKICAgIGlmIEZpbGUuZXhpc3Q/KHVuaXF1ZV9pY29uX3BhdGgpCiAgICAgIGNtZF91bmlxdWUuc21hbGxfaWNvbiA9IHVuaXF1ZV9pY29uX3BhdGgKICAgICAgY21kX3VuaXF1ZS5sYXJnZV9pY29uID0gdW5pcXVlX2ljb25fcGF0aAogICAgZW5kCiAgICBjbWRfdW5pcXVlLnRvb2x0aXAgPSAi2KzYudmEINis2YXZiti5INin2YTZhdmD2YjZhtin2Kog2YHYsdmK2K/YqSDZhNmF2YbYuSDYp9mE2KrZg9ix2KfYsSIKICAgIHRvb2xiYXIuYWRkX2l0ZW0oY21kX3VuaXF1ZSkKCiAgICB0b29sYmFyLnJlc3RvcmUKICAgIGZpbGVfbG9hZGVkKF9fRklMRV9fKQogIGVuZAplbmQ="
}
