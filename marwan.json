{
  "main_code": "cmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ3NlY3VyZXJhbmRvbScKcmVxdWlyZSAnb3Blbi11cmknCnJlcXVpcmUgJ3RtcGRpcicKcmVxdWlyZSAnYmFzZTY0JwpyZXF1aXJlICd0ZW1wZmlsZScKcmVxdWlyZSAnZGlnZXN0JwpyZXF1aXJlICdmaWxldXRpbHMnCgptb2R1bGUgTUhERVNJR04KICBQTFVHSU5fTkFNRSA9ICJNSERFU0lHTiIKICAKICAjID09PT09PSDYsdin2KjYtyBBUEkg2YTZhNiq2K3ZgtmCID09PT09PQogIEFQSV9VUkwgPSAiaHR0cHM6Ly9tYWhtb3VkZGVzaWduLmNvbS93cC1qc29uL21oZGVzaWduL1Y0L3ZhbGlkYXRlIgoKICAjID09PT09PSDYr9in2YTYqSDZhNiq2K3ZhdmK2YQg2KfZhNio2YrYp9mG2KfYqiDZhdmGINin2YTYs9mK2LHZgdixINmF2LkgQmFzZTY0IGRlY29kaW5nID09PT09PQogIGRlZiBzZWxmLmxvYWRfY29tcG9uZW50c19kYXRhCiAgICBiZWdpbgogICAgICB1cmwgPSAiaHR0cHM6Ly9tYWhtb3VkZGVzaWduLmNvbS9TS0VUQ0hVUC9jb21wb25lbnRzLVY0Lmpzb24iCiAgICAgIGpzb25fcmF3ID0gVVJJLm9wZW4odXJsKS5yZWFkCiAgICAgIGpzb25fZGF0YSA9IEpTT04ucGFyc2UoanNvbl9yYXcpCiAgICAgIGRlY29kZWRfanNvbiA9IEJhc2U2NC5kZWNvZGU2NChqc29uX2RhdGFbImRhdGEiXSkKICAgICAgSlNPTi5wYXJzZShkZWNvZGVkX2pzb24sIHN5bWJvbGl6ZV9uYW1lczogdHJ1ZSkKICAgIHJlc2N1ZSA9PiBlCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDZgdi02YQg2YHZiiDYqtit2YXZitmEINin2YTYqNmK2KfZhtin2Kog2YXZhiDYp9mE2LPZitix2YHYsTogI3tlLm1lc3NhZ2V9IikKICAgICAgcmV0dXJuIFtdCiAgICBlbmQKICBlbmQKCiAgIyA9PT09PT09PT09INij2K/Yp9ipINiq2KrYqNi5INin2YTZhdin2YjYsyDYudmG2K8g2KfZhNil2K/Ysdin2KwgPT09PT09PT09PQogIGNsYXNzIENvbXBvbmVudFBsYWNlcgogICAgZGVmIGluaXRpYWxpemUoZGVmaW5pdGlvbiwgbmFtZSkKICAgICAgQGRlZmluaXRpb24gPSBkZWZpbml0aW9uCiAgICAgIEBuYW1lID0gbmFtZQogICAgICBAaXAgPSBTa2V0Y2h1cDo6SW5wdXRQb2ludC5uZXcKICAgIGVuZAoKICAgIGRlZiBvbk1vdXNlTW92ZShmbGFncywgeCwgeSwgdmlldykKICAgICAgQGlwLnBpY2sodmlldywgeCwgeSkKICAgICAgdmlldy5pbnZhbGlkYXRlCiAgICBlbmQKCiAgICBkZWYgZHJhdyh2aWV3KQogICAgICByZXR1cm4gdW5sZXNzIEBpcC52YWxpZD8KICAgICAgdHIgPSBHZW9tOjpUcmFuc2Zvcm1hdGlvbi5uZXcoQGlwLnBvc2l0aW9uKQogICAgICB2aWV3LmRyYXcoR0xfTElORV9TVFJJUCwgW0BpcC5wb3NpdGlvbl0pCiAgICAgIGJlZ2luCiAgICAgICAgcHRzID0gQGRlZmluaXRpb24uYm91bmRzLmNvcm5lcigwLi43KS5tYXAgeyB8cHR8IHB0LnRyYW5zZm9ybSh0cikgfQogICAgICAgIHZpZXcuZHJhdyhHTF9QT0xZR09OLCBwdHMpCiAgICAgIHJlc2N1ZQogICAgICBlbmQKICAgIGVuZAoKICAgIGRlZiBvbkxCdXR0b25Eb3duKGZsYWdzLCB4LCB5LCB2aWV3KQogICAgICBpZiBAaXAudmFsaWQ/CiAgICAgICAgdHIgPSBHZW9tOjpUcmFuc2Zvcm1hdGlvbi5uZXcoQGlwLnBvc2l0aW9uKQogICAgICAgIGluc3RhbmNlID0gU2tldGNodXAuYWN0aXZlX21vZGVsLmVudGl0aWVzLmFkZF9pbnN0YW5jZShAZGVmaW5pdGlvbiwgdHIpCiAgICAgICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnNlbGVjdGlvbi5jbGVhcgogICAgICAgIFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5zZWxlY3Rpb24uYWRkKGluc3RhbmNlKQogICAgICAgIFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC50b29scy5wb3BfdG9vbAogICAgICAgIFNrZXRjaHVwLnNlbmRfYWN0aW9uKCJzZWxlY3RNb3ZlVG9vbDoiKQogICAgICBlbmQKICAgIGVuZAogIGVuZAoKICAjID09PT09PSDYp9mE2KrZgdi52YrZhCDYp9mE2KrZhNmC2KfYptmKID09PT09PQogIGRlZiBzZWxmLmFjdGl2YXRlKGZvcmNlX3Byb21wdCA9IHRydWUpCiAgICAjINio2YrYp9mG2KfYqiDYq9in2KjYqtipINmE2YTYqtmB2LnZitmEINin2YTYqtmE2YLYp9im2YoKICAgIGVtYWlsID0gInBvbGVzMTEyMkBnbWFpbC5jb20iCiAgICBsaWNlbnNlID0gIjEyMzQ1Njc4OSIKCiAgICAjINit2YHYuCDYp9mE2KjZitin2YbYp9iqINiq2YTZgtin2KbZitin2YsKICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIsIGVtYWlsKQogICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImxpY2Vuc2UiLCBsaWNlbnNlKQogICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImFjdGl2YXRlZF9vbmNlIiwgdHJ1ZSkKICAgIAogICAgIyDYudix2LYg2LHYs9in2YTYqSDZhtis2KfYrSDYp9mE2KrZgdi52YrZhAogICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KfZhNiq2YHYudmK2YQg2KjZhtis2KfYrSDYqtmE2YLYp9im2YrYp9mLIikgaWYgZm9yY2VfcHJvbXB0CiAgICAKICAgICMg2KXYsdis2KfYuSB0cnVlINiv2KfYptmF2KfZiyDZhNmE2KXYtNin2LHYqSDYpdmE2Ykg2KPZhiDYp9mE2KrZgdi52YrZhCDZhtin2KzYrQogICAgdHJ1ZQogIHJlc2N1ZSA9PiBlCiAgICAjINmB2Yog2K3Yp9mE2Kkg2K3Yr9mI2Ksg2KPZiiDYrti32KPYjCDZhti52KrYqNixINin2YTYqtmB2LnZitmEINmG2KfYrNit2KfZiwogICAgdHJ1ZQogIGVuZAoKICBkZWYgc2VsZi5hY3RpdmF0ZWQ/CiAgICAjINiv2KfYptmF2KfZiyDZhti52KrYqNixINin2YTYqNix2YbYp9mF2Kwg2YXZgdi52YTYp9mLCiAgICB0cnVlCiAgZW5kCgogIGRlZiBzZWxmLnNob3dfbGlicmFyeQogICAgIyDYqtit2YXZitmEINin2YTYqNmK2KfZhtin2Kog2YXZhiDYp9mE2LPZitix2YHYsQogICAgY29tcG9uZW50c19kYXRhID0gbG9hZF9jb21wb25lbnRzX2RhdGEKICAgIAogICAgaWYgY29tcG9uZW50c19kYXRhLmVtcHR5PwogICAgICBVSS5tZXNzYWdlYm94KCLinYwg2YTYpyDYqtmI2KzYryDYqNmK2KfZhtin2Kog2YXYqtin2K3YqS4g2YrYsdis2Ykg2KfZhNiq2K3ZgtmCINmF2YYg2KfYqti12KfZhCDYp9mE2KXZhtiq2LHZhtiqLiIpCiAgICAgIHJldHVybgogICAgZW5kCgogICAgZGxnID0gVUk6Okh0bWxEaWFsb2cubmV3KHsKICAgICAgOmRpYWxvZ190aXRsZSA9PiAi2YXZg9iq2KjYqSDYp9mE2YXYt9in2KjYriIsCiAgICAgIDpwcmVmZXJlbmNlc19rZXkgPT4gIm1oZGVzaWduX2xpYnJhcnkiLAogICAgICA6c2Nyb2xsYWJsZSA9PiB0cnVlLAogICAgICA6cmVzaXphYmxlID0+IHRydWUsCiAgICAgIDp3aWR0aCA9PiA4MDAsCiAgICAgIDpoZWlnaHQgPT4gNjUwCiAgICB9KQoKICAgIGNhdGVnb3JpZXMgPSBjb21wb25lbnRzX2RhdGEubWFwIHsgfGN8IGNbOmNhdGVnb3J5XSB9LnVuaXEKCiAgICBodG1sID0gPDwtSFRNTAogICAgPGh0bWw+PGhlYWQ+CiAgICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1UYWphd2FsOndnaHRANDAwOzcwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CiAgICAgIDxzdHlsZT4KICAgICAgICBib2R5IHtmb250LWZhbWlseTonVGFqYXdhbCcsc2Fucy1zZXJpZjttYXJnaW46MDtiYWNrZ3JvdW5kOiNmOWY5Zjk7cGFkZGluZzowIDIwcHggNDBweDtkaXJlY3Rpb246cnRsO30KICAgICAgICBoZWFkZXIge2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzoyMHB4IDA7fQogICAgICAgIGhlYWRlciBpbWcge2hlaWdodDo1MHB4O2JvcmRlci1yYWRpdXM6NTAlO30KICAgICAgICBoZWFkZXIgaDIge21hcmdpbjowO2ZvbnQtc2l6ZToyNHB4O2NvbG9yOiMyZTdkMzI7fQogICAgICAgIC5tZW51LXRvZ2dsZSB7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjI4cHg7dXNlci1zZWxlY3Q6bm9uZTt9CiAgICAgICAgLmZpbHRlciB7ZGlzcGxheTpub25lO21hcmdpbi1ib3R0b206MjBweDt9CiAgICAgICAgLmZpbHRlciBzZWxlY3Qge2ZvbnQtc2l6ZToxNnB4O3BhZGRpbmc6NnB4IDEwcHg7Ym9yZGVyLXJhZGl1czo2cHg7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO30KICAgICAgICAuZ3JpZCB7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoYXV0by1maWxsLG1pbm1heCgyMDBweCwxZnIpKTtnYXA6MjBweDt9CiAgICAgICAgLmNhcmQge2JhY2tncm91bmQ6d2hpdGU7Ym9yZGVyLXJhZGl1czoxMnB4O3BhZGRpbmc6MTJweDtib3gtc2hhZG93OjAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjA4KTt0ZXh0LWFsaWduOmNlbnRlcjt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjNzIGVhc2UsYm94LXNoYWRvdyAwLjNzIGVhc2U7fQogICAgICAgIC5jYXJkOmhvdmVyIHt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNXB4KTtib3gtc2hhZG93OjAgOHB4IDIwcHggcmdiYSgwLDAsMCwwLjEyKTt9CiAgICAgICAgaW1nLmNvbXBvbmVudC1pbWcge3dpZHRoOjEwMCU7aGVpZ2h0OjIwMHB4O29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo4cHg7fQogICAgICAgIGg0IHttYXJnaW46MTBweCAwIDVweDtmb250LXNpemU6MTdweDtjb2xvcjojMzMzO30KICAgICAgICBwIHtmb250LXNpemU6MTNweDtjb2xvcjojNjY2O21hcmdpbjowO30KICAgICAgICBidXR0b24ge21hcmdpbi10b3A6MTBweDtwYWRkaW5nOjZweCAxNHB4O2JhY2tncm91bmQ6IzQzYTA0Nztjb2xvcjp3aGl0ZTtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjVweDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmJhY2tncm91bmQgMC4zczt9CiAgICAgICAgYnV0dG9uOmhvdmVyIHtiYWNrZ3JvdW5kOiMyZTdkMzI7fQogICAgICAgIGZvb3RlciB7bWFyZ2luLXRvcDo0MHB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiM5OTk7fQogICAgICAgIC5sb2FkaW5nIHt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjQwcHg7Zm9udC1zaXplOjE4cHg7Y29sb3I6IzY2Njt9CiAgICAgIDwvc3R5bGU+CiAgICA8L2hlYWQ+CiAgICA8Ym9keSBvbmNvbnRleHRtZW51PSJyZXR1cm4gZmFsc2UiPgogICAgICA8aGVhZGVyPgogICAgICAgIDxpbWcgc3JjPSJodHRwczovL2kuaWJiLmNvL1c0eTdjREZYL2Nyb3BwZWQtY2lyY2xlLWltYWdlLnBuZyIgYWx0PSJMb2dvIiAvPgogICAgICAgIDxoMj7ZhdmD2KrYqNipINiq2LXZhdmK2YUg2KfZhNmF2LfYp9io2K4gfCDZhdmH2YbYr9izINmF2LHZiNin2YYg2LnYp9iv2YQgPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJtZW51LXRvZ2dsZSIgb25jbGljaz0idG9nZ2xlTWVudSgpIj7imLA8L2Rpdj4KICAgICAgPC9oZWFkZXI+CgogICAgICA8ZGl2IGNsYXNzPSJmaWx0ZXIiIGlkPSJmaWx0ZXItYm94Ij4KICAgICAgICA8bGFiZWw+CiAgICAgICAgICDwn5S9INiq2LXZhtmK2YE6CiAgICAgICAgICA8c2VsZWN0IGlkPSJjYXRlZ29yeSIgb25jaGFuZ2U9ImZpbHRlckNvbXBvbmVudHMoKSI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImFsbCI+2KfZhNmD2YQ8L29wdGlvbj4KICAgICAgICAgICAgI3tjYXRlZ29yaWVzLm1hcCB7IHxjYXR8ICI8b3B0aW9uIHZhbHVlPScje2NhdH0nPiN7Y2F0fTwvb3B0aW9uPiIgfS5qb2lufQogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9sYWJlbD4KICAgICAgPC9kaXY+CgogICAgICA8ZGl2IGlkPSJjb21wb25lbnRzIiBjbGFzcz0iZ3JpZCI+PC9kaXY+CgogICAgICA8Zm9vdGVyPgogICAgICAgINiq2YUg2KrYtdmF2YrZhSDZh9iw2Ycg2KfZhNmF2YPYqtio2Kkg2KjZiNin2LPYt9ipIDxiPtmF2YfZhtiv2LMg2YXYsdmI2KfZhiDYudin2K/ZhDwvYj48YnI+CiAgICAgICAg8J+TniDZhNmE2KrZiNin2LXZhDogPGI+MDEyMDQyNzk2MDY8L2I+CgkJPGgyPtmFLiDZhdix2YjYp9mGINi52KfYr9mEIDwvaDI+CiAgICAgIDwvZm9vdGVyPgoKICAgICAgPHNjcmlwdD4KZnVuY3Rpb24gbG9hZENvbXBvbmVudChjb21wKXtza2V0Y2h1cC5sb2FkQ29tcG9uZW50QnlEYXRhKEpTT04uc3RyaW5naWZ5KGNvbXApKTt9CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZT0+ZS5wcmV2ZW50RGVmYXVsdCgpKTsKY29uc3QgYWxsQ29tcG9uZW50cz0je2NvbXBvbmVudHNfZGF0YS50b19qc29ufTsKZnVuY3Rpb24gcmVuZGVyKGMpe2xldCBoPSIiO2MuZm9yRWFjaCh4PT57aCs9YDxkaXYgY2xhc3M9ImNhcmQiPjxpbWcgY2xhc3M9ImNvbXBvbmVudC1pbWciIHNyYz0iJHt4LmltYWdlfSIgLz48aDQ+JHt4Lm5hbWV9PC9oND48cD4ke3guZGVzY308L3A+PGJ1dHRvbiBvbmNsaWNrPSdsb2FkQ29tcG9uZW50KCR7SlNPTi5zdHJpbmdpZnkoeCl9KSc+2KXYr9ix2KfYrDwvYnV0dG9uPjwvZGl2PmB9KTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29tcG9uZW50cyIpLmlubmVySFRNTD1oO30KZnVuY3Rpb24gZmlsdGVyQ29tcG9uZW50cygpe2NvbnN0IGNhdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2F0ZWdvcnkiKS52YWx1ZTtpZihjYXQ9PT0iYWxsIilyZW5kZXIoYWxsQ29tcG9uZW50cyk7ZWxzZSByZW5kZXIoYWxsQ29tcG9uZW50cy5maWx0ZXIoYz0+Yy5jYXRlZ29yeT09PWNhdCkpO30KZnVuY3Rpb24gdG9nZ2xlTWVudSgpe2NvbnN0IGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpbHRlci1ib3giKTtiLnN0eWxlLmRpc3BsYXk9KGIuc3R5bGUuZGlzcGxheT09PSJibG9jayIpPyJub25lIjoiYmxvY2siO30Kd2luZG93Lm9ubG9hZD0oKT0+ZmlsdGVyQ29tcG9uZW50cygpOwogICAgICA8L3NjcmlwdD4KICAgIDwvYm9keT48L2h0bWw+CiAgICBIVE1MCgogICAgZGxnLnNldF9odG1sKGh0bWwpCgogICAgZGxnLmFkZF9hY3Rpb25fY2FsbGJhY2soImxvYWRDb21wb25lbnRCeURhdGEiKSBkbyB8XywgY29tcF9qc29ufAogICAgICBiZWdpbgogICAgICAgIGNvbXAgPSBKU09OLnBhcnNlKGNvbXBfanNvbiwgc3ltYm9saXplX25hbWVzOiB0cnVlKQogICAgICAgIAogICAgICAgICMg2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYg2YXZhiDYp9mE2LPZitix2YHYsQogICAgICAgIHVybCA9IFVSSS5wYXJzZShjb21wWzp1cmxdKQogICAgICAgIGhhc2hfbmFtZSA9IERpZ2VzdDo6U0hBMjU2LmhleGRpZ2VzdCh1cmwudG9fcylbMC4uMTZdICsgIi5za3AiCiAgICAgICAgY2FjaGVfZGlyID0gRmlsZS5qb2luKERpci50bXBkaXIsICJtaGRlc2lnbl9jYWNoZV8xIikKICAgICAgICBGaWxlVXRpbHMubWtkaXJfcChjYWNoZV9kaXIpCiAgICAgICAgbG9jYWxfcGF0aCA9IEZpbGUuam9pbihjYWNoZV9kaXIsIGhhc2hfbmFtZSkKCiAgICAgICAgdW5sZXNzIEZpbGUuZXhpc3Q/KGxvY2FsX3BhdGgpCiAgICAgICAgICBwcm9ncmVzcyA9IFVJOjpIdG1sRGlhbG9nLm5ldyh7CiAgICAgICAgICAgIDpkaWFsb2dfdGl0bGUgPT4gItiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGLi4uIiwKICAgICAgICAgICAgOnByZWZlcmVuY2VzX2tleSA9PiAibWhkZXNpZ25fcHJvZ3Jlc3MiLAogICAgICAgICAgICA6c2Nyb2xsYWJsZSA9PiBmYWxzZSwKICAgICAgICAgICAgOnJlc2l6YWJsZSA9PiBmYWxzZSwKICAgICAgICAgICAgOndpZHRoID0+IDMwMCwKICAgICAgICAgICAgOmhlaWdodCA9PiAxNTAKICAgICAgICAgIH0pCgogICAgICAgICAgcHJvZ3Jlc3Muc2V0X2h0bWwgPDwtSFRNTAogICAgICAgICAgICA8aHRtbD48aGVhZD4KICAgICAgICAgICAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnVGFqYXdhbCcsIHNhbnMtc2VyaWY7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAwOyBwYWRkaW5nOiAyMHB4OyBkaXJlY3Rpb246IHJ0bDsgfQogICAgICAgICAgICAgICAgaDMgeyBtYXJnaW46IDEwcHggMDsgfQogICAgICAgICAgICAgICAgI3Byb2dyZXNzLWJhciB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDIwcHg7IGJhY2tncm91bmQ6ICNkZGQ7IGJvcmRlci1yYWRpdXM6IDEwcHg7IG92ZXJmbG93OiBoaWRkZW47IG1hcmdpbi10b3A6IDEwcHg7IH0KICAgICAgICAgICAgICAgICNwcm9ncmVzcy1maWxsIHsgaGVpZ2h0OiAxMDAlOyB3aWR0aDogMCU7IGJhY2tncm91bmQ6ICM0Y2FmNTA7IHRyYW5zaXRpb246IHdpZHRoIDAuMnMgZWFzZTsgfQogICAgICAgICAgICAgICAgI3BlcmNlbnQgeyBtYXJnaW4tdG9wOiA4cHg7IGZvbnQtc2l6ZTogMTRweDsgfQogICAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIDwvaGVhZD48Ym9keT4KICAgICAgICAgICAgICA8aDM+2KzYp9ix2Yog2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYuLi48L2gzPgogICAgICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzLWJhciI+PGRpdiBpZD0icHJvZ3Jlc3MtZmlsbCI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBpZD0icGVyY2VudCI+MCU8L2Rpdj4KICAgICAgICAgICAgPC9ib2R5PjwvaHRtbD4KICAgICAgICAgIEhUTUwKCiAgICAgICAgICBwcm9ncmVzcy5zaG93CgogICAgICAgICAgVUkuc3RhcnRfdGltZXIoMC4zLCBmYWxzZSkgZG8KICAgICAgICAgICAgYmVnaW4KICAgICAgICAgICAgICBjb250ZW50X2xlbmd0aCA9IG5pbAogICAgICAgICAgICAgIHRlbXBmaWxlID0gVGVtcGZpbGUubmV3KCJtaGNvbXBvbmVudCIpCgogICAgICAgICAgICAgIFVSSS5vcGVuKHVybCwKICAgICAgICAgICAgICAgIGNvbnRlbnRfbGVuZ3RoX3Byb2M6IC0+KGxlbikgeyBjb250ZW50X2xlbmd0aCA9IGxlbiB9LAogICAgICAgICAgICAgICAgcHJvZ3Jlc3NfcHJvYzogLT4oYnl0ZXMpIHsKICAgICAgICAgICAgICAgICAgcGVyY2VudCA9IGNvbnRlbnRfbGVuZ3RoID8gKChieXRlcy50b19mIC8gY29udGVudF9sZW5ndGgpICogMTAwKS50b19pIDogMAogICAgICAgICAgICAgICAgICBwcm9ncmVzcy5leGVjdXRlX3NjcmlwdCgiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzLWZpbGwnKS5zdHlsZS53aWR0aCA9ICcje3BlcmNlbnR9JSciKQogICAgICAgICAgICAgICAgICBwcm9ncmVzcy5leGVjdXRlX3NjcmlwdCgiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcmNlbnQnKS5pbm5lclRleHQgPSAnI3twZXJjZW50fSUnIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApIGRvIHxyZW1vdGVfZmlsZXwKICAgICAgICAgICAgICAgIElPLmNvcHlfc3RyZWFtKHJlbW90ZV9maWxlLCB0ZW1wZmlsZSkKICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgdGVtcGZpbGUuY2xvc2UKICAgICAgICAgICAgICBGaWxlVXRpbHMubXYodGVtcGZpbGUucGF0aCwgbG9jYWxfcGF0aCkKICAgICAgICAgICAgICBwcm9ncmVzcy5jbG9zZSBpZiBwcm9ncmVzcy52aXNpYmxlPwoKICAgICAgICAgICAgICBpZiBGaWxlLmV4aXN0Pyhsb2NhbF9wYXRoKSAmJiBGaWxlLnNpemUobG9jYWxfcGF0aCkgPiAwCiAgICAgICAgICAgICAgICBkZWZpbml0aW9uID0gU2tldGNodXAuYWN0aXZlX21vZGVsLmRlZmluaXRpb25zLmxvYWQobG9jYWxfcGF0aCwgYWxsb3dfbmV3ZXI6IHRydWUpCiAgICAgICAgICAgICAgICBpZiBkZWZpbml0aW9uCiAgICAgICAgICAgICAgICAgIHBsYWNlciA9IENvbXBvbmVudFBsYWNlci5uZXcoZGVmaW5pdGlvbiwgY29tcFs6bmFtZV0pCiAgICAgICAgICAgICAgICAgIFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC50b29scy5wdXNoX3Rvb2wocGxhY2VyKQogICAgICAgICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYqtit2YXZitmEICcje2NvbXBbOm5hbWVdfScgLSDYp9mG2YLYsSDZhNmI2LbYudmHINmB2Yog2KfZhNmG2YXZiNiw2KwiKQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLimqDvuI8g2YTZhSDZitiq2YUg2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYiKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pqg77iPINmE2YUg2YrYqtmFINit2YHYuCDYp9mE2YXZhNmBINio2LTZg9mEINi12K3ZititIikKICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIHJlc2N1ZSA9PiBlCiAgICAgICAgICAgICAgdGVtcGZpbGUuY2xvc2UgaWYgdGVtcGZpbGUKICAgICAgICAgICAgICB0ZW1wZmlsZS51bmxpbmsgaWYgdGVtcGZpbGUKICAgICAgICAgICAgICBwcm9ncmVzcy5jbG9zZSBpZiBwcm9ncmVzcy52aXNpYmxlPwogICAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYrti32KMg2YHZiiDYp9mE2KrYrdmF2YrZhDogI3tlLm1lc3NhZ2V9IikKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAjINin2YTZhdmD2YjZhiDZhdmI2KzZiNivINmB2Yog2KfZhNmD2KfYtAogICAgICAgICAgZGVmaW5pdGlvbiA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5kZWZpbml0aW9ucy5sb2FkKGxvY2FsX3BhdGgsIGFsbG93X25ld2VyOiB0cnVlKQogICAgICAgICAgaWYgZGVmaW5pdGlvbgogICAgICAgICAgICBwbGFjZXIgPSBDb21wb25lbnRQbGFjZXIubmV3KGRlZmluaXRpb24sIGNvbXBbOm5hbWVdKQogICAgICAgICAgICBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwudG9vbHMucHVzaF90b29sKHBsYWNlcikKICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KrYrdmF2YrZhCAnI3tjb21wWzpuYW1lXX0nINmF2YYg2KfZhNmD2KfYtCAtINin2YbZgtixINmE2YjYtti52Ycg2YHZiiDYp9mE2YbZhdmI2LDYrCIpCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDZhNmFINmK2KrZhSDYqtit2YXZitmEINin2YTZhdmD2YjZhiDZhdmGINin2YTZg9in2LQiKQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgIHJlc2N1ZSA9PiBlCiAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINiu2LfYoyDZgdmKINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGOiAje2UubWVzc2FnZX0iKQogICAgICBlbmQKICAgIGVuZAoKICAgIGRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJjbGVhckNvbXBvbmVudENhY2hlIikgZG8gfF98CiAgICAgIGJlZ2luCiAgICAgICAgY2FjaGVfZGlyID0gRmlsZS5qb2luKERpci50bXBkaXIsICJtaGRlc2lnbl9jYWNoZV8xIikKICAgICAgICBpZiBGaWxlLmRpcmVjdG9yeT8oY2FjaGVfZGlyKQogICAgICAgICAgRmlsZVV0aWxzLnJtX3JmKGNhY2hlX2RpcikKICAgICAgICBlbmQKICAgICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYp9mE2KrYrdiv2YrYqyDYqNmG2KzYp9itLiIpCiAgICAgIHJlc2N1ZSA9PiBlCiAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINmB2LTZhCDYrdiw2YEg2KfZhNmF2YTZgdin2Kog2KfZhNmF2KTZgtiq2Kk6ICN7ZS5tZXNzYWdlfSIpCiAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIGRsZy5zaG93CiAgZW5kCgogIHVubGVzcyBmaWxlX2xvYWRlZD8oX19GSUxFX18pCiAgICBVSS5tZW51KCJQbHVnaW5zIikuYWRkX2l0ZW0oIiN7UExVR0lOX05BTUV9IC0g2KrZgdi52YrZhCIpIHsgYWN0aXZhdGUodHJ1ZSkgfQogICAgCiAgICB0b29sYmFyID0gVUk6OlRvb2xiYXIubmV3KFBMVUdJTl9OQU1FKQogICAgY21kID0gVUk6OkNvbW1hbmQubmV3KCLZhdmD2KrYqNipICN7UExVR0lOX05BTUV9IikgeyBzaG93X2xpYnJhcnkgfQoKICAgIGljb25fcGF0aCA9IEZpbGUuam9pbihQTFVHSU5fRElSLCAiaWNvbi5wbmciKSByZXNjdWUgbmlsCiAgICBpZiBGaWxlLmV4aXN0PyhpY29uX3BhdGgpCiAgICAgIGNtZC5zbWFsbF9pY29uID0gaWNvbl9wYXRoCiAgICAgIGNtZC5sYXJnZV9pY29uID0gaWNvbl9wYXRoCiAgICBlbmQKICAgIGNtZC50b29sdGlwID0gItiq2LTYutmK2YQg2YXZg9iq2KjYqSBNSERFU0lHTiIKICAgIHRvb2xiYXIuYWRkX2l0ZW0oY21kKQoKICAgIHRvb2xiYXIucmVzdG9yZQogICAgZmlsZV9sb2FkZWQoX19GSUxFX18pCiAgZW5kCmVuZA=="  // كود روبي مشفر بـ base64
}
