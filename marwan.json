{
  "main_code": "cmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ3NlY3VyZXJhbmRvbScKcmVxdWlyZSAnb3Blbi11cmknCnJlcXVpcmUgJ3RtcGRpcicKcmVxdWlyZSAnYmFzZTY0JwpyZXF1aXJlICd0ZW1wZmlsZScKcmVxdWlyZSAnZGlnZXN0JwpyZXF1aXJlICdmaWxldXRpbHMnCgptb2R1bGUgTUhERVNJR04KICBQTFVHSU5fTkFNRSA9ICJNSERFU0lHTiIKICBBUElfVVJMID0gImh0dHBzOi8vbWFobW91ZGRlc2lnbi5jb20vd3AtanNvbi9taGRlc2lnbi9WNC92YWxpZGF0ZSIKCiAgQ09NUE9ORU5UUyA9IGJlZ2luCiAgdXJsID0gImh0dHBzOi8vbWFobW91ZGRlc2lnbi5jb20vU0tFVENIVVAvY29tcG9uZW50cy1WNC5qc29uIgogIGpzb25fcmF3ID0gVVJJLm9wZW4odXJsKS5yZWFkCiAganNvbl9kYXRhID0gSlNPTi5wYXJzZShqc29uX3JhdykKICBkZWNvZGVkX2pzb24gPSBCYXNlNjQuZGVjb2RlNjQoanNvbl9kYXRhWyJkYXRhIl0pCiAgSlNPTi5wYXJzZShkZWNvZGVkX2pzb24sIHN5bWJvbGl6ZV9uYW1lczogdHJ1ZSkKcmVzY3VlID0+IGUKICBVSS5tZXNzYWdlYm94KCLinYwg2YHYtNmEINiq2K3ZhdmK2YQg2KjZitin2YbYp9iqINin2YTZhdmD2KrYqNipOiAje2UubWVzc2FnZX0iKQogIFtdCmVuZAoKICAjID09PT09PT09PT0g2KPYr9in2Kkg2KrYqtio2Lkg2KfZhNmF2KfZiNizINi52YbYryDYp9mE2KXYr9ix2KfYrCA9PT09PT09PT09CiAgY2xhc3MgQ29tcG9uZW50UGxhY2VyCiAgICBkZWYgaW5pdGlhbGl6ZShkZWZpbml0aW9uLCBuYW1lKQogICAgICBAZGVmaW5pdGlvbiA9IGRlZmluaXRpb24KICAgICAgQG5hbWUgPSBuYW1lCiAgICAgIEBpcCA9IFNrZXRjaHVwOjpJbnB1dFBvaW50Lm5ldwogICAgZW5kCgogICAgZGVmIG9uTW91c2VNb3ZlKGZsYWdzLCB4LCB5LCB2aWV3KQogICAgICBAaXAucGljayh2aWV3LCB4LCB5KQogICAgICB2aWV3LmludmFsaWRhdGUKICAgIGVuZAoKICAgIGRlZiBkcmF3KHZpZXcpCiAgICAgIHJldHVybiB1bmxlc3MgQGlwLnZhbGlkPwogICAgICB0ciA9IEdlb206OlRyYW5zZm9ybWF0aW9uLm5ldyhAaXAucG9zaXRpb24pCiAgICAgIHZpZXcuZHJhdyhHTF9MSU5FX1NUUklQLCBbQGlwLnBvc2l0aW9uXSkKICAgICAgYmVnaW4KICAgICAgICBwdHMgPSBAZGVmaW5pdGlvbi5ib3VuZHMuY29ybmVyKDAuLjcpLm1hcCB7IHxwdHwgcHQudHJhbnNmb3JtKHRyKSB9CiAgICAgICAgdmlldy5kcmF3KEdMX1BPTFlHT04sIHB0cykKICAgICAgcmVzY3VlCiAgICAgIGVuZAogICAgZW5kCgpkZWYgb25MQnV0dG9uRG93bihmbGFncywgeCwgeSwgdmlldykKICBpZiBAaXAudmFsaWQ/CiAgICB0ciA9IEdlb206OlRyYW5zZm9ybWF0aW9uLm5ldyhAaXAucG9zaXRpb24pCiAgICBpbnN0YW5jZSA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5lbnRpdGllcy5hZGRfaW5zdGFuY2UoQGRlZmluaXRpb24sIHRyKQogICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnNlbGVjdGlvbi5jbGVhcgogICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnNlbGVjdGlvbi5hZGQoaW5zdGFuY2UpCiAgICBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwudG9vbHMucG9wX3Rvb2wKICAgIFNrZXRjaHVwLnNlbmRfYWN0aW9uKCJzZWxlY3RNb3ZlVG9vbDoiKQogIGVuZAplbmQKICBlbmQKCiAgZGVmIHNlbGYuZ2V0X2RldmljZV9pZAogICAgcHJlZnMgPSBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJkZXZpY2VfaWQiKQogICAgcmV0dXJuIHByZWZzIHVubGVzcyBwcmVmcy5uaWw/IHx8IHByZWZzLmVtcHR5PwogICAgaWQgPSBTZWN1cmVSYW5kb20udXVpZAogICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImRldmljZV9pZCIsIGlkKQogICAgaWQKICBlbmQKCiAgIyA9PT09PT0g2KfZhNiq2LnYr9mK2YQg2YfZhtinID09PT09PQogIGRlZiBzZWxmLmFjdGl2YXRlKGZvcmNlX3Byb21wdCA9IHRydWUpCiAgICAjINio2YrYp9mG2KfYqiDYq9in2KjYqtipINmE2YTYqtmB2LnZitmEINin2YTYqtmE2YLYp9im2YoKICAgIGVtYWlsID0gInBvbGVzMTEyMkBnbWFpbC5jb20iCiAgICBsaWNlbnNlID0gIjEyMzQ1Njc4OSIKCiAgICAjINit2YHYuCDYp9mE2KjZitin2YbYp9iqINiq2YTZgtin2KbZitin2YsKICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIsIGVtYWlsKQogICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImxpY2Vuc2UiLCBsaWNlbnNlKQogICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImFjdGl2YXRlZF9vbmNlIiwgdHJ1ZSkKICAgIAogICAgIyDYudix2LYg2LHYs9in2YTYqSDZhtis2KfYrSDYp9mE2KrZgdi52YrZhAogICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KfZhNiq2YHYudmK2YQg2KjZhtis2KfYrSDYqtmE2YLYp9im2YrYp9mLIikgaWYgZm9yY2VfcHJvbXB0CiAgICAKICAgICMg2KXYsdis2KfYuSB0cnVlINiv2KfYptmF2KfZiyDZhNmE2KXYtNin2LHYqSDYpdmE2Ykg2KPZhiDYp9mE2KrZgdi52YrZhCDZhtin2KzYrQogICAgdHJ1ZQogIHJlc2N1ZSA9PiBlCiAgICAjINmB2Yog2K3Yp9mE2Kkg2K3Yr9mI2Ksg2KPZiiDYrti32KPYjCDZhti52KrYqNixINin2YTYqtmB2LnZitmEINmG2KfYrNit2KfZiwogICAgdHJ1ZQogIGVuZAogICMgPT09PT09PT09PT09PT09PT09PT09PT0KCiAgZGVmIHNlbGYuYWN0aXZhdGVkPwogICAgIyDYr9in2KbZhdin2Ysg2YbYudiq2KjYsSDYp9mE2KjYsdmG2KfZhdisINmF2YHYudmE2KfZiwogICAgdHJ1ZQogIGVuZAoKICBkZWYgc2VsZi5zaG93X2xpYnJhcnkKICAgICMgPT09PT09INiq2K3ZgtmCINi12KfZhdiqID09PT09PQogICAgIyDZhNinINit2KfYrNipINmE2YTYqtit2YLZgiDZhdmGINin2YTYqtmB2LnZitmE2Iwg2YbZgdiq2K0g2KfZhNmF2YPYqtio2Kkg2YXYqNin2LTYsdipCiAgICAjID09PT09PT09PT09PT09PT09PT09PT09PQoKICAgIGRsZyA9IFVJOjpIdG1sRGlhbG9nLm5ldyh7CiAgICAgIDpkaWFsb2dfdGl0bGUgPT4gItmF2YPYqtio2Kkg2KfZhNmF2LfYp9io2K4iLAogICAgICA6cHJlZmVyZW5jZXNfa2V5ID0+ICJtaGRlc2lnbl9saWJyYXJ5IiwKICAgICAgOnNjcm9sbGFibGUgPT4gdHJ1ZSwKICAgICAgOnJlc2l6YWJsZSA9PiB0cnVlLAogICAgICA6d2lkdGggPT4gODAwLAogICAgICA6aGVpZ2h0ID0+IDY1MAogICAgfSkKCiAgICBjYXRlZ29yaWVzID0gQ09NUE9ORU5UUy5tYXAgeyB8Y3wgY1s6Y2F0ZWdvcnldIH0udW5pcQoKICAgIGh0bWwgPSA8PC1IVE1MCiAgICA8aHRtbD48aGVhZD4KICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVRhamF3YWw6d2dodEA0MDA7NzAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgICAgPHN0eWxlPgogICAgICAgIGJvZHkge2ZvbnQtZmFtaWx5OidUYWphd2FsJyxzYW5zLXNlcmlmO21hcmdpbjowO2JhY2tncm91bmQ6I2Y5ZjlmOTtwYWRkaW5nOjAgMjBweCA0MHB4O2RpcmVjdGlvbjpydGw7fQogICAgICAgIGhlYWRlciB7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjIwcHggMDt9CiAgICAgICAgaGVhZGVyIGltZyB7aGVpZ2h0OjUwcHg7Ym9yZGVyLXJhZGl1czo1MCU7fQogICAgICAgIGhlYWRlciBoMiB7bWFyZ2luOjA7Zm9udC1zaXplOjI0cHg7Y29sb3I6IzJlN2QzMjt9CiAgICAgICAgLm1lbnUtdG9nZ2xlIHtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6MjhweDt1c2VyLXNlbGVjdDpub25lO30KICAgICAgICAuZmlsdGVyIHtkaXNwbGF5Om5vbmU7bWFyZ2luLWJvdHRvbToyMHB4O30KICAgICAgICAuZmlsdGVyIHNlbGVjdCB7Zm9udC1zaXplOjE2cHg7cGFkZGluZzo2cHggMTBweDtib3JkZXItcmFkaXVzOjZweDtib3JkZXI6MXB4IHNvbGlkICNjY2M7fQogICAgICAgIC5ncmlkIHtkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdChhdXRvLWZpbGwsbWlubWF4KDIwMHB4LDFmcikpO2dhcDoyMHB4O30KICAgICAgICAuY2FyZCB7YmFja2dyb3VuZDp3aGl0ZTtib3JkZXItcmFkaXVzOjEycHg7cGFkZGluZzoxMnB4O2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMDgpO3RleHQtYWxpZ246Y2VudGVyO3RyYW5zaXRpb246dHJhbnNmb3JtIDAuM3MgZWFzZSxib3gtc2hhZG93IDAuM3MgZWFzZTt9CiAgICAgICAgLmNhcmQ6aG92ZXIge3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01cHgpO2JveC1zaGFkb3c6MCA4cHggMjBweCByZ2JhKDAsMCwwLDAuMTIpO30KICAgICAgICBpbWcuY29tcG9uZW50LWltZyB7d2lkdGg6MTAwJTtoZWlnaHQ6MjAwcHg7b2JqZWN0LWZpdDpjb3Zlcjtib3JkZXItcmFkaXVzOjhweDt9CiAgICAgICAgaDQge21hcmdpbjoxMHB4IDAgNXB4O2ZvbnQtc2l6ZToxN3B4O2NvbG9yOiMzMzM7fQogICAgICAgIHAge2ZvbnQtc2l6ZToxM3B4O2NvbG9yOiM2NjY7bWFyZ2luOjA7fQogICAgICAgIGJ1dHRvbiB7bWFyZ2luLXRvcDoxMHB4O3BhZGRpbmc6NnB4IDE0cHg7YmFja2dyb3VuZDojNDNhMDQ3O2NvbG9yOndoaXRlO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NXB4O2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YmFja2dyb3VuZCAwLjNzO30KICAgICAgICBidXR0b246aG92ZXIge2JhY2tncm91bmQ6IzJlN2QzMjt9CiAgICAgICAgZm9vdGVyIHttYXJnaW4tdG9wOjQwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjEycHg7Y29sb3I6Izk5OTt9CiAgICAgIDwvc3R5bGU+CiAgICA8L2hlYWQ+CiAgICA8Ym9keSBvbmNvbnRleHRtZW51PSJyZXR1cm4gZmFsc2UiPgogICAgICA8aGVhZGVyPgogICAgICAgIDxpbWcgc3JjPSJodHRwczovL21haG1vdWRkZXNpZ24uY29tL1NLRVRDSFVQL2NvbXBvbmVudHMvbG9nby5qcGVnIiBhbHQ9IkxvZ28iIC8+CiAgICAgICAgPGgyPtmF2YPYqtio2Kkg2KrYtdmF2YrZhSDYp9mE2YXYt9in2KjYrjwvaDI+CiAgICAgICAgPGRpdiBjbGFzcz0ibWVudS10b2dnbGUiIG9uY2xpY2s9InRvZ2dsZU1lbnUoKSI+4piwPC9kaXY+CiAgICAgIDwvaGVhZGVyPgoKICAgICAgPGRpdiBjbGFzcz0iZmlsdGVyIiBpZD0iZmlsdGVyLWJveCI+CiAgICAgICAgPGxhYmVsPgogICAgICAgICAg8J+UvSDYqti12YbZitmBOgogICAgICAgICAgPHNlbGVjdCBpZD0iY2F0ZWdvcnkiIG9uY2hhbmdlPSJmaWx0ZXJDb21wb25lbnRzKCkiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJhbGwiPtin2YTZg9mEPC9vcHRpb24+CiAgICAgICAgICAgICN7Y2F0ZWdvcmllcy5tYXAgeyB8Y2F0fCAiPG9wdGlvbiB2YWx1ZT0nI3tjYXR9Jz4je2NhdH08L29wdGlvbj4iIH0uam9pbn0KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgIDwvbGFiZWw+CiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBpZD0iY29tcG9uZW50cyIgY2xhc3M9ImdyaWQiPjwvZGl2PgoKICAgICAgPGZvb3Rlcj4KICAgICAgICDYqtmFINiq2LXZhdmK2YUg2YfYsNmHINin2YTZhdmD2KrYqNipINio2YjYp9iz2LfYqSA8Yj5taGRlc2lnbi1lZy5jb208L2I+INmI2KPZiiDYqti12LHZgSDZgdmK2YfYpyDYqNiv2YjZhiDYpdiw2YYg2YrYudiq2KjYsSDYp9mG2KrZh9in2YPZi9inINmE2K3ZgtmI2YIg2KfZhNmF2YTZg9mK2KkgKNiz2KfZg9mI2YYg2K7YtdmK2YXZgyDYp9mF2KfZhSDYp9mE2YTZhykuPGJyPgogICAgICAgIPCfk54g2YTZhNiq2YjYp9i12YQ6IDxiPjAxMTAwMjExMzQwPC9iPgogICAgICA8L2Zvb3Rlcj4KCiAgICAgIDxzY3JpcHQ+CmZ1bmN0aW9uIGxvYWRDb21wb25lbnQoY29tcCl7c2tldGNodXAubG9hZENvbXBvbmVudEJ5RGF0YShKU09OLnN0cmluZ2lmeShjb21wKSk7fQpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGU9PmUucHJldmVudERlZmF1bHQoKSk7CmNvbnN0IGFsbENvbXBvbmVudHM9I3tDT01QT05FTlRTLnRvX2pzb259OwpmdW5jdGlvbiByZW5kZXIoYyl7bGV0IGg9IiI7Yy5mb3JFYWNoKHg9PntoKz1gPGRpdiBjbGFzcz0iY2FyZCI+PGltZyBjbGFzcz0iY29tcG9uZW50LWltZyIgc3JjPSIke3guaW1hZ2V9IiAvPjxoND4ke3gubmFtZX08L2g0PjxwPiR7eC5kZXNjfTwvcD48YnV0dG9uIG9uY2xpY2s9J2xvYWRDb21wb25lbnQoJHtKU09OLnN0cmluZ2lmeSh4KX0pJz7Ypdiv2LHYp9isPC9idXR0b24+PC9kaXY+YH0pO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb21wb25lbnRzIikuaW5uZXJIVE1MPWg7fQpmdW5jdGlvbiBmaWx0ZXJDb21wb25lbnRzKCl7Y29uc3QgY2F0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYXRlZ29yeSIpLnZhbHVlO2lmKGNhdD09PSJhbGwiKXJlbmRlcihhbGxDb21wb25lbnRzKTtlbHNlIHJlbmRlcihhbGxDb21wb25lbnRzLmZpbHRlcihjPT5jLmNhdGVnb3J5PT09Y2F0KSk7fQpmdW5jdGlvbiB0b2dnbGVNZW51KCl7Y29uc3QgYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmlsdGVyLWJveCIpO2Iuc3R5bGUuZGlzcGxheT0oYi5zdHlsZS5kaXNwbGF5PT09ImJsb2NrIik/Im5vbmUiOiJibG9jayI7fQp3aW5kb3cub25sb2FkPSgpPT5maWx0ZXJDb21wb25lbnRzKCk7CiAgICAgIDwvc2NyaXB0PgogICAgPC9ib2R5PjwvaHRtbD4KICAgIEhUTUwKCiAgICBkbGcuc2V0X2h0bWwoaHRtbCkKCmRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJsb2FkQ29tcG9uZW50QnlEYXRhIikgZG8gfF8sIGNvbXBfanNvbnwKICBjb21wID0gSlNPTi5wYXJzZShjb21wX2pzb24sIHN5bWJvbGl6ZV9uYW1lczogdHJ1ZSkKICB1cmwgPSBVUkkucGFyc2UoY29tcFs6dXJsXSkKICBoYXNoX25hbWUgPSBEaWdlc3Q6OlNIQTI1Ni5oZXhkaWdlc3QodXJsLnRvX3MpWzAuLjE2XSArICIuc2twIgogIGNhY2hlX2RpciA9IEZpbGUuam9pbihEaXIudG1wZGlyLCAibWhkZXNpZ25fY2FjaGVfMSIpCiAgRmlsZVV0aWxzLm1rZGlyX3AoY2FjaGVfZGlyKQogIGxvY2FsX3BhdGggPSBGaWxlLmpvaW4oY2FjaGVfZGlyLCBoYXNoX25hbWUpCgogIHVubGVzcyBGaWxlLmV4aXN0Pyhsb2NhbF9wYXRoKQogICAgcHJvZ3Jlc3MgPSBVSTo6SHRtbERpYWxvZy5uZXcoewogICAgICA6ZGlhbG9nX3RpdGxlID0+ICLYqtit2YXZitmEINin2YTZhdmD2YjZhi4uLiIsCiAgICAgIDpwcmVmZXJlbmNlc19rZXkgPT4gIm1oZGVzaWduX3Byb2dyZXNzIiwKICAgICAgOnNjcm9sbGFibGUgPT4gZmFsc2UsCiAgICAgIDpyZXNpemFibGUgPT4gZmFsc2UsCiAgICAgIDp3aWR0aCA9PiAzMDAsCiAgICAgIDpoZWlnaHQgPT4gMTUwCiAgICB9KQoKICAgIHByb2dyZXNzLnNldF9odG1sIDw8LUhUTUwKICAgICAgPGh0bWw+PGhlYWQ+CiAgICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICAgIDxzdHlsZT4KICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogJ1RhamF3YWwnLCBzYW5zLXNlcmlmOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMDsgcGFkZGluZzogMjBweDsgZGlyZWN0aW9uOiBydGw7IH0KICAgICAgICAgIGgzIHsgbWFyZ2luOiAxMHB4IDA7IH0KICAgICAgICAgICNwcm9ncmVzcy1iYXIgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAyMHB4OyBiYWNrZ3JvdW5kOiAjZGRkOyBib3JkZXItcmFkaXVzOiAxMHB4OyBvdmVyZmxvdzogaGlkZGVuOyBtYXJnaW4tdG9wOiAxMHB4OyB9CiAgICAgICAgICAjcHJvZ3Jlc3MtZmlsbCB7IGhlaWdodDogMTAwJTsgd2lkdGg6IDAlOyBiYWNrZ3JvdW5kOiAjNGNhZjUwOyB0cmFuc2l0aW9uOiB3aWR0aCAwLjJzIGVhc2U7IH0KICAgICAgICAgICNwZXJjZW50IHsgbWFyZ2luLXRvcDogOHB4OyBmb250LXNpemU6IDE0cHg7IH0KICAgICAgICA8L3N0eWxlPgogICAgICA8L2hlYWQ+PGJvZHk+CiAgICAgICAgPGgzPtis2KfYsdmKINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGLi4uPC9oMz4KICAgICAgICA8ZGl2IGlkPSJwcm9ncmVzcy1iYXIiPjxkaXYgaWQ9InByb2dyZXNzLWZpbGwiPjwvZGl2PjwvZGl2PgogICAgICAgIDxkaXYgaWQ9InBlcmNlbnQiPjAlPC9kaXY+CiAgICAgIDwvYm9keT48L2h0bWw+CiAgICBIVE1MCgogICAgcHJvZ3Jlc3Muc2hvdwoKICAgIFVJLnN0YXJ0X3RpbWVyKDAuMywgZmFsc2UpIGRvCiAgICAgIGJlZ2luCiAgICAgICAgY29udGVudF9sZW5ndGggPSBuaWwKICAgICAgICB0ZW1wZmlsZSA9IFRlbXBmaWxlLm5ldygibWhjb21wb25lbnQiKQoKICAgICAgICBVUkkub3Blbih1cmwsCiAgICAgICAgICBjb250ZW50X2xlbmd0aF9wcm9jOiAtPihsZW4pIHsgY29udGVudF9sZW5ndGggPSBsZW4gfSwKICAgICAgICAgIHByb2dyZXNzX3Byb2M6IC0+KGJ5dGVzKSB7CiAgICAgICAgICAgIHBlcmNlbnQgPSBjb250ZW50X2xlbmd0aCA/ICgoYnl0ZXMudG9fZiAvIGNvbnRlbnRfbGVuZ3RoKSAqIDEwMCkudG9faSA6IDAKICAgICAgICAgICAgcHJvZ3Jlc3MuZXhlY3V0ZV9zY3JpcHQoImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy1maWxsJykuc3R5bGUud2lkdGggPSAnI3twZXJjZW50fSUnIikKICAgICAgICAgICAgcHJvZ3Jlc3MuZXhlY3V0ZV9zY3JpcHQoImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJjZW50JykuaW5uZXJUZXh0ID0gJyN7cGVyY2VudH0lJyIpCiAgICAgICAgICB9CiAgICAgICAgKSBkbyB8cmVtb3RlX2ZpbGV8CiAgICAgICAgICBJTy5jb3B5X3N0cmVhbShyZW1vdGVfZmlsZSwgdGVtcGZpbGUpCiAgICAgICAgZW5kCgogICAgICAgIHRlbXBmaWxlLmNsb3NlCiAgICAgICAgRmlsZVV0aWxzLm12KHRlbXBmaWxlLnBhdGgsIGxvY2FsX3BhdGgpCiAgICAgICAgcHJvZ3Jlc3MuY2xvc2UgaWYgcHJvZ3Jlc3MudmlzaWJsZT8KCiAgICAgICAgaWYgRmlsZS5leGlzdD8obG9jYWxfcGF0aCkgJiYgRmlsZS5zaXplKGxvY2FsX3BhdGgpID4gMAogICAgICAgICAgZGVmaW5pdGlvbiA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5kZWZpbml0aW9ucy5sb2FkKGxvY2FsX3BhdGgsIGFsbG93X25ld2VyOiB0cnVlKQogICAgICAgICAgaWYgZGVmaW5pdGlvbgogICAgICAgICAgICBpbnN0YW5jZSA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5wbGFjZV9jb21wb25lbnQoZGVmaW5pdGlvbikKICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KXYr9ix2KfYrCDYp9mE2YXZg9mI2YYg2KjZhtis2KfYrSIpIHVubGVzcyBpbnN0YW5jZQogICAgICAgICAgZWxzZQogICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLimqDvuI8g2YTZhSDZitiq2YUg2KrYudix2YrZgSDYp9mE2YXZg9mI2YYiKQogICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgVUkubWVzc2FnZWJveCgi4pqg77iPINmE2YUg2YrYqtmFINit2YHYuCDYp9mE2YXZhNmBINio2LTZg9mEINi12K3ZititIikKICAgICAgICBlbmQKCiAgICAgIHJlc2N1ZSA9PiBlCiAgICAgICAgdGVtcGZpbGUuY2xvc2UgaWYgdGVtcGZpbGUKICAgICAgICB0ZW1wZmlsZS51bmxpbmsgaWYgdGVtcGZpbGUKICAgICAgICBwcm9ncmVzcy5jbG9zZSBpZiBwcm9ncmVzcy52aXNpYmxlPwogICAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYrti32KMg2YHZiiDYp9mE2KrYrdmF2YrZhCDYo9mIINin2YTYpdiv2LHYp9isOiAje2UubWVzc2FnZX0iKQogICAgICBlbmQKICAgIGVuZAogIGVsc2UKICAgIGJlZ2luCiAgICAgIGlmIEZpbGUuZXhpc3Q/KGxvY2FsX3BhdGgpICYmIEZpbGUuc2l6ZShsb2NhbF9wYXRoKSA+IDAKICAgICAgICBkZWZpbml0aW9uID0gU2tldGNodXAuYWN0aXZlX21vZGVsLmRlZmluaXRpb25zLmxvYWQobG9jYWxfcGF0aCwgYWxsb3dfbmV3ZXI6IHRydWUpCiAgICAgICAgaWYgZGVmaW5pdGlvbgogICAgICAgICAgaW5zdGFuY2UgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwucGxhY2VfY29tcG9uZW50KGRlZmluaXRpb24pCiAgICAgICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYpdiv2LHYp9isINin2YTZhdmD2YjZhiDYqNmG2KzYp9itIikgdW5sZXNzIGluc3RhbmNlCiAgICAgICAgZWxzZQogICAgICAgICAgVUkubWVzc2FnZWJveCgi4pqg77iPINmE2YUg2YrYqtmFINiq2LnYsdmK2YEg2KfZhNmF2YPZiNmGIikKICAgICAgICBlbmQKICAgICAgZWxzZQogICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDYp9mE2YXZhNmBINin2YTZhdmI2KzZiNivINiq2KfZhNmBINij2Ygg2YHYp9ix2LoiKQogICAgICBlbmQKICAgIHJlc2N1ZSA9PiBlCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYrti32KMg2KPYq9mG2KfYoSDYp9mE2KXYr9ix2KfYrDogI3tlLm1lc3NhZ2V9IikKICAgIGVuZAogIGVuZAplbmQKCmRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJjbGVhckNvbXBvbmVudENhY2hlIikgZG8gfF98CiAgYmVnaW4KICAgIGNhY2hlX2RpciA9IEZpbGUuam9pbihEaXIudG1wZGlyLCAibWhkZXNpZ25fY2FjaGVfMSIpCiAgICBpZiBGaWxlLmRpcmVjdG9yeT8oY2FjaGVfZGlyKQogICAgICBGaWxlVXRpbHMucm1fcmYoY2FjaGVfZGlyKQogICAgZW5kCiAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYp9mE2KrYrdiv2YrYqyDYqNmG2KzYp9itLiIpCiAgcmVzY3VlID0+IGUKICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDZgdi02YQg2K3YsNmBINin2YTZhdmE2YHYp9iqINin2YTZhdik2YLYqtipOiAje2UubWVzc2FnZX0iKQogIGVuZAplbmQKZGxnLnNob3cKICBlbmQKCiAgdW5sZXNzIGZpbGVfbG9hZGVkPyhfX0ZJTEVfXykKICAgIFVJLm1lbnUoIlBsdWdpbnMiKS5hZGRfaXRlbSgiI3tQTFVHSU5fTkFNRX0gLSDYqtmB2LnZitmEIikgeyBhY3RpdmF0ZSh0cnVlKSB9CiAgICBVSS5tZW51KCJQbHVnaW5zIikuYWRkX2l0ZW0oIiN7UExVR0lOX05BTUV9IC0g2LHZgtmFINin2YTYrNmH2KfYsiIpIHsgVUkubWVzc2FnZWJveCgi8J+UkSDYsdmC2YUg2KfZhNis2YfYp9iyOlxuIiArIGdldF9kZXZpY2VfaWQpIH0KICAgIFVJLm1lbnUoIlBsdWdpbnMiKS5hZGRfaXRlbSgiTUhERVNJR04gLSDYqtit2K/ZitirINin2YTZhdmD2KrYqNipIikgZG8KICAgICAgY2FjaGVfZGlyID0gRmlsZS5qb2luKERpci50bXBkaXIsICJtaGRlc2lnbl9jYWNoZV8xIikKICAgICAgaWYgRmlsZS5kaXJlY3Rvcnk/KGNhY2hlX2RpcikKICAgICAgICBGaWxlVXRpbHMucm1fcmYoY2FjaGVfZGlyKQogICAgICBlbmQKICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KfZhNiq2K3Yr9mK2Ksg2KjZhtis2KfYrS4iKQogICAgZW5kCgogICAgdG9vbGJhciA9IFVJOjpUb29sYmFyLm5ldyhQTFVHSU5fTkFNRSkKICAgIGNtZCA9IFVJOjpDb21tYW5kLm5ldygi2YXZg9iq2KjYqSAje1BMVUdJTl9OQU1FfSIpIHsgc2hvd19saWJyYXJ5IH0KCiAgICBpY29uX3BhdGggPSBGaWxlLmpvaW4oUExVR0lOX0RJUiwgImljb24ucG5nIikgcmVzY3VlIG5pbAogICAgaWYgRmlsZS5leGlzdD8oaWNvbl9wYXRoKQogICAgICBjbWQuc21hbGxfaWNvbiA9IGljb25fcGF0aAogICAgICBjbWQubGFyZ2VfaWNvbiA9IGljb25fcGF0aAogICAgZW5kCiAgICBjbWQudG9vbHRpcCA9ICLYqti02LrZitmEINmF2YPYqtio2KkgTUhERVNJR04iCiAgICB0b29sYmFyLmFkZF9pdGVtKGNtZCkKCiAgICBjbWRfdW5pcXVlID0gVUk6OkNvbW1hbmQubmV3KCLYrNi52YQg2YPZhCDYp9mE2YXZg9mI2YbYp9iqINmB2LHZitiv2KkiKSB7CiAgICAgIG1vZHVsZSBNSERFU0lHTl9VTklRVUlGWQogICAgICAgIGRlZiBzZWxmLm1ha2VfYWxsX2NvbXBvbmVudHNfdW5pcXVlKGVudGl0aWVzKQogICAgICAgICAgZW50aXRpZXMuZ3JlcChTa2V0Y2h1cDo6Q29tcG9uZW50SW5zdGFuY2UpLmVhY2ggZG8gfGluc3RhbmNlfAogICAgICAgICAgICBpbnN0YW5jZS5tYWtlX3VuaXF1ZQogICAgICAgICAgICBtYWtlX2FsbF9jb21wb25lbnRzX3VuaXF1ZShpbnN0YW5jZS5kZWZpbml0aW9uLmVudGl0aWVzKQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZGVmIHNlbGYubWFrZV9kZWZpbml0aW9uc191bmlxdWUKICAgICAgICAgIG1vZGVsID0gU2tldGNodXAuYWN0aXZlX21vZGVsCiAgICAgICAgICBtb2RlbC5kZWZpbml0aW9ucy5lYWNoIGRvIHxkZWZpbml0aW9ufAogICAgICAgICAgICBuZXh0IGlmIGRlZmluaXRpb24uZ3JvdXA/IHx8IGRlZmluaXRpb24uaW1hZ2U/CiAgICAgICAgICAgIGRlZmluaXRpb24uaW5zdGFuY2VzLmVhY2ggZG8gfGluc3RhbmNlfAogICAgICAgICAgICAgIGluc3RhbmNlLm1ha2VfdW5pcXVlCiAgICAgICAgICAgICAgbWFrZV9hbGxfY29tcG9uZW50c191bmlxdWUoaW5zdGFuY2UuZGVmaW5pdGlvbi5lbnRpdGllcykKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBkZWYgc2VsZi5ydW5fdW5pcXVpZnkKICAgICAgICAgIG1vZGVsID0gU2tldGNodXAuYWN0aXZlX21vZGVsCiAgICAgICAgICBtb2RlbC5zdGFydF9vcGVyYXRpb24oItis2LnZhCDZg9mEINin2YTZhdmD2YjZhtin2Kog2YHYsdmK2K/YqSIsIHRydWUpCiAgICAgICAgICBtYWtlX2FsbF9jb21wb25lbnRzX3VuaXF1ZShtb2RlbC5lbnRpdGllcykKICAgICAgICAgIG1ha2VfZGVmaW5pdGlvbnNfdW5pcXVlCiAgICAgICAgICBtb2RlbC5jb21taXRfb3BlcmF0aW9uCiAgICAgICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYrNi52YQg2YPZhCDYp9mE2YPZhdio2YjZhtmG2KrYp9iqINmB2LHZitiv2KkuIikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIE1IREVTSUdOX1VOSVFVSUZZLnJ1bl91bmlxdWlmeQogICAgfQogICAgdW5pcXVlX2ljb25fcGF0aCA9IEZpbGUuam9pbihQTFVHSU5fRElSLCAidW5pcXVlX2ljb24ucG5nIikgcmVzY3VlIG5pbAogICAgaWYgRmlsZS5leGlzdD8odW5pcXVlX2ljb25fcGF0aCkKICAgICAgY21kX3VuaXF1ZS5zbWFsbF9pY29uID0gdW5pcXVlX2ljb25fcGF0aAogICAgICBjbWRfdW5pcXVlLmxhcmdlX2ljb24gPSB1bmlxdWVfaWNvbl9wYXRoCiAgICBlbmQKICAgIGNtZF91bmlxdWUudG9vbHRpcCA9ICLYp9is2LnZhCDYp9mE2YXZg9mI2YbYp9iqINin2YTZgdix2LnZitipINmB2LHZitiv2KkiCiAgICB0b29sYmFyLmFkZF9pdGVtKGNtZF91bmlxdWUpCgogICAgdG9vbGJhci5yZXN0b3JlCiAgICBmaWxlX2xvYWRlZChfX0ZJTEVfXykKICBlbmQKZW5k"  // كود روبي مشفر بـ base64
}
