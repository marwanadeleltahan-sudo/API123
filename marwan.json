{
  "main_code": "cmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ3NlY3VyZXJhbmRvbScKcmVxdWlyZSAnb3Blbi11cmknCnJlcXVpcmUgJ3RtcGRpcicKcmVxdWlyZSAnYmFzZTY0JwpyZXF1aXJlICd0ZW1wZmlsZScKcmVxdWlyZSAnZGlnZXN0JwpyZXF1aXJlICdmaWxldXRpbHMnCgptb2R1bGUgTUhERVNJR04KICBQTFVHSU5fTkFNRSA9ICJNSERFU0lHTiIKICBQTFVHSU5fRElSID0gRmlsZS5kaXJuYW1lKF9fRklMRV9fKQogIAogICMgPT09PT09INix2KfYqNi3IEFQSSDZhNmE2KrYrdmC2YIgPT09PT09CiAgQVBJX1VSTCA9ICJodHRwczovL21haG1vdWRkZXNpZ24uY29tL3dwLWpzb24vbWhkZXNpZ24vVjQvdmFsaWRhdGUiCgogICMgPT09PT09INmF2KzZhNivINin2YTZhdmD2YjZhtin2Kog2KfZhNi02K7YtdmK2KkgPT09PT09CiAgQ1VTVE9NX0NPTVBPTkVOVFNfRElSID0gRmlsZS5qb2luKFBMVUdJTl9ESVIsICJjdXN0b21fY29tcG9uZW50cyIpCiAgRmlsZVV0aWxzLm1rZGlyX3AoQ1VTVE9NX0NPTVBPTkVOVFNfRElSKSB1bmxlc3MgRmlsZS5kaXJlY3Rvcnk/KENVU1RPTV9DT01QT05FTlRTX0RJUikKCiAgIyA9PT09PT0g2K/Yp9mE2Kkg2YTYqtit2YXZitmEINin2YTYqNmK2KfZhtin2Kog2YXZhiDYp9mE2LPZitix2YHYsSDZhdi5IEJhc2U2NCBkZWNvZGluZyA9PT09PT0KICBkZWYgc2VsZi5sb2FkX2NvbXBvbmVudHNfZGF0YQogICAgYmVnaW4KICAgICAgdXJsID0gImh0dHBzOi8vbWFobW91ZGRlc2lnbi5jb20vU0tFVENIVVAvY29tcG9uZW50cy1WNC5qc29uIgogICAgICBqc29uX3JhdyA9IFVSSS5vcGVuKHVybCkucmVhZAogICAgICBqc29uX2RhdGEgPSBKU09OLnBhcnNlKGpzb25fcmF3KQogICAgICBkZWNvZGVkX2pzb24gPSBCYXNlNjQuZGVjb2RlNjQoanNvbl9kYXRhWyJkYXRhIl0pCiAgICAgIHNlcnZlcl9jb21wb25lbnRzID0gSlNPTi5wYXJzZShkZWNvZGVkX2pzb24sIHN5bWJvbGl6ZV9uYW1lczogdHJ1ZSkKICAgICAgCiAgICAgICMg2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YbYp9iqINin2YTYtNiu2LXZitipCiAgICAgIGN1c3RvbV9jb21wb25lbnRzID0gbG9hZF9jdXN0b21fY29tcG9uZW50cwogICAgICAKICAgICAgIyDYr9mF2Kwg2KfZhNmF2YPZiNmG2KfYqiDZhdmGINin2YTYs9mK2LHZgdixINmF2Lkg2KfZhNmF2YPZiNmG2KfYqiDYp9mE2LTYrti12YrYqQogICAgICBzZXJ2ZXJfY29tcG9uZW50cyArIGN1c3RvbV9jb21wb25lbnRzCiAgICByZXNjdWUgPT4gZQogICAgICBVSS5tZXNzYWdlYm94KCLinYwg2YHYtNmEINmB2Yog2KrYrdmF2YrZhCDYp9mE2KjZitin2YbYp9iqINmF2YYg2KfZhNiz2YrYsdmB2LE6ICN7ZS5tZXNzYWdlfSIpCiAgICAgIGxvYWRfY3VzdG9tX2NvbXBvbmVudHMKICAgIGVuZAogIGVuZAoKICAjID09PT09PSDYr9in2YTYqSDZhNiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmG2KfYqiDYp9mE2LTYrti12YrYqSA9PT09PT0KICBkZWYgc2VsZi5sb2FkX2N1c3RvbV9jb21wb25lbnRzCiAgICBjdXN0b21fZGF0YV9maWxlID0gRmlsZS5qb2luKENVU1RPTV9DT01QT05FTlRTX0RJUiwgImN1c3RvbV9jb21wb25lbnRzLmpzb24iKQogICAgCiAgICBpZiBGaWxlLmV4aXN0PyhjdXN0b21fZGF0YV9maWxlKQogICAgICBKU09OLnBhcnNlKEZpbGUucmVhZChjdXN0b21fZGF0YV9maWxlKSwgc3ltYm9saXplX25hbWVzOiB0cnVlKQogICAgZWxzZQogICAgICBbXQogICAgZW5kCiAgcmVzY3VlID0+IGUKICAgIFtdCiAgZW5kCgogICMgPT09PT09INiv2KfZhNipINmE2K3Zgdi4INin2YTZhdmD2YjZhtin2Kog2KfZhNi02K7YtdmK2KkgPT09PT09CiAgZGVmIHNlbGYuc2F2ZV9jdXN0b21fY29tcG9uZW50cyhjb21wb25lbnRzKQogICAgY3VzdG9tX2RhdGFfZmlsZSA9IEZpbGUuam9pbihDVVNUT01fQ09NUE9ORU5UU19ESVIsICJjdXN0b21fY29tcG9uZW50cy5qc29uIikKICAgIEZpbGUud3JpdGUoY3VzdG9tX2RhdGFfZmlsZSwgSlNPTi5wcmV0dHlfZ2VuZXJhdGUoY29tcG9uZW50cykpCiAgZW5kCgogICMgPT09PT09INiv2KfZhNipINmE2KXYttin2YHYqSDZhdmD2YjZhiDYtNiu2LXZiiDYrNiv2YrYryA9PT09PT0KICBkZWYgc2VsZi5hZGRfY3VzdG9tX2NvbXBvbmVudChza3BfcGF0aCwgbmFtZSwgY2F0ZWdvcnksIGRlc2NyaXB0aW9uID0gIiIpCiAgICBiZWdpbgogICAgICAjINmG2LPYriDYp9mE2YXZhNmBINil2YTZiSDZhdis2YTYryDYp9mE2YXZg9mI2YbYp9iqINin2YTYtNiu2LXZitipCiAgICAgIGZpbGVuYW1lID0gRGlnZXN0OjpTSEEyNTYuaGV4ZGlnZXN0KG5hbWUgKyBUaW1lLm5vdy50b19zKVswLi4xNl0gKyAiLnNrcCIKICAgICAgZGVzdF9wYXRoID0gRmlsZS5qb2luKENVU1RPTV9DT01QT05FTlRTX0RJUiwgZmlsZW5hbWUpCiAgICAgIEZpbGVVdGlscy5jcChza3BfcGF0aCwgZGVzdF9wYXRoKQogICAgICAKICAgICAgIyDYpdmG2LTYp9ihINi12YjYsdipINmF2LXYutix2KkKICAgICAgdGh1bWJuYWlsX3BhdGggPSBjcmVhdGVfdGh1bWJuYWlsKHNrcF9wYXRoLCBmaWxlbmFtZSkKICAgICAgCiAgICAgICMg2KXYttin2YHYqSDYp9mE2KjZitin2YbYp9iqINmE2YTZhdmD2YjZhgogICAgICBjdXN0b21fY29tcG9uZW50ID0gewogICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5LAogICAgICAgIGRlc2M6IGRlc2NyaXB0aW9uLAogICAgICAgIHVybDogZGVzdF9wYXRoLCAjINin2LPYqtiu2K/Yp9mFINin2YTZhdiz2KfYsSDYp9mE2YXYrdmE2YoKICAgICAgICBpbWFnZTogdGh1bWJuYWlsX3BhdGgsCiAgICAgICAgY3VzdG9tOiB0cnVlICMg2LnZhNin2YXYqSDYo9mGINmH2LDYpyDZhdmD2YjZhiDYtNiu2LXZigogICAgICB9CiAgICAgIAogICAgICAjINit2YHYuCDZgdmKINin2YTZhdmD2YjZhtin2Kog2KfZhNi02K7YtdmK2KkKICAgICAgY3VycmVudF9jb21wb25lbnRzID0gbG9hZF9jdXN0b21fY29tcG9uZW50cwogICAgICBjdXJyZW50X2NvbXBvbmVudHMgPDwgY3VzdG9tX2NvbXBvbmVudAogICAgICBzYXZlX2N1c3RvbV9jb21wb25lbnRzKGN1cnJlbnRfY29tcG9uZW50cykKICAgICAgCiAgICAgIHRydWUKICAgIHJlc2N1ZSA9PiBlCiAgICAgIGZhbHNlCiAgICBlbmQKICBlbmQKCiAgIyA9PT09PT0g2K/Yp9mE2Kkg2YTYpdmG2LTYp9ihINi12YjYsdipINmF2LXYutix2KkgPT09PT09CiAgZGVmIHNlbGYuY3JlYXRlX3RodW1ibmFpbChza3BfcGF0aCwgYmFzZV9maWxlbmFtZSkKICAgIHRodW1ibmFpbF9wYXRoID0gRmlsZS5qb2luKENVU1RPTV9DT01QT05FTlRTX0RJUiwgInRodW1iXyIgKyBiYXNlX2ZpbGVuYW1lLnN1YignLnNrcCcsICcucG5nJykpCiAgICAKICAgIGJlZ2luCiAgICAgICMg2YXYrdin2YjZhNipINil2YbYtNin2KEg2LXZiNix2Kkg2YXYtdi62LHYqSDZhdmGINin2YTZhdmD2YjZhgogICAgICBtb2RlbCA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbAogICAgICBkZWZpbml0aW9uID0gbW9kZWwuZGVmaW5pdGlvbnMubG9hZChza3BfcGF0aCkKICAgICAgCiAgICAgIGlmIGRlZmluaXRpb24KICAgICAgICB2aWV3ID0gbW9kZWwuYWN0aXZlX3ZpZXcKICAgICAgICAjINit2YHYuCDYtdmI2LHYqSDYp9mE2LnYsdi2ICjZh9iw2Kcg2YXYq9in2YQg2YXYqNiz2LcgLSDZitit2KrYp9isINiq2K3Ys9mK2YYpCiAgICAgICAgIyDZgdmKINin2YTYpdi12K/Yp9ix2KfYqiDYp9mE2K3ZgtmK2YLZitipINmK2YXZg9mGINin2LPYqtiu2K/Yp9mFINij2K/ZiNin2Kog2KPZg9ir2LEg2KrYt9mI2LHYp9mLCiAgICAgIGVuZAogICAgcmVzY3VlID0+IGUKICAgICAgIyDYp9iz2KrYrtiv2KfZhSDYtdmI2LHYqSDYp9mB2KrYsdin2LbZitipINil2LDYpyDZgdi02YQg2KXZhti02KfYoSDYp9mE2LXZiNix2Kkg2KfZhNmF2LXYutix2KkKICAgICAgdGh1bWJuYWlsX3BhdGggPSAiaHR0cHM6Ly9tYWhtb3VkZGVzaWduLmNvbS9TS0VUQ0hVUC9jb21wb25lbnRzL2RlZmF1bHRfdGh1bWIucG5nIgogICAgZW5kCiAgICAKICAgIHRodW1ibmFpbF9wYXRoCiAgZW5kCgogICMgPT09PT09INiv2KfZhNipINmE2K3YsNmBINmF2YPZiNmGINi02K7YtdmKID09PT09PQogIGRlZiBzZWxmLmRlbGV0ZV9jdXN0b21fY29tcG9uZW50KGNvbXBvbmVudF9uYW1lKQogICAgYmVnaW4KICAgICAgY3VycmVudF9jb21wb25lbnRzID0gbG9hZF9jdXN0b21fY29tcG9uZW50cwogICAgICBjb21wb25lbnRfdG9fZGVsZXRlID0gY3VycmVudF9jb21wb25lbnRzLmZpbmQgeyB8Y3wgY1s6bmFtZV0gPT0gY29tcG9uZW50X25hbWUgJiYgY1s6Y3VzdG9tXSB9CiAgICAgIAogICAgICBpZiBjb21wb25lbnRfdG9fZGVsZXRlCiAgICAgICAgIyDYrdiw2YEg2YXZhNmBIFNLUAogICAgICAgIEZpbGUuZGVsZXRlKGNvbXBvbmVudF90b19kZWxldGVbOnVybF0pIGlmIEZpbGUuZXhpc3Q/KGNvbXBvbmVudF90b19kZWxldGVbOnVybF0pCiAgICAgICAgCiAgICAgICAgIyDYrdiw2YEg2KfZhNi12YjYsdipINin2YTZhdi12LrYsdipINil2LDYpyDZg9in2YbYqiDZhdit2YTZitipCiAgICAgICAgaWYgY29tcG9uZW50X3RvX2RlbGV0ZVs6aW1hZ2VdICYmIGNvbXBvbmVudF90b19kZWxldGVbOmltYWdlXS5zdGFydF93aXRoPygnLycpCiAgICAgICAgICBGaWxlLmRlbGV0ZShjb21wb25lbnRfdG9fZGVsZXRlWzppbWFnZV0pIGlmIEZpbGUuZXhpc3Q/KGNvbXBvbmVudF90b19kZWxldGVbOmltYWdlXSkKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAjINit2LDZgSDZhdmGINin2YTZgtin2KbZhdipCiAgICAgICAgY3VycmVudF9jb21wb25lbnRzLmRlbGV0ZShjb21wb25lbnRfdG9fZGVsZXRlKQogICAgICAgIHNhdmVfY3VzdG9tX2NvbXBvbmVudHMoY3VycmVudF9jb21wb25lbnRzKQogICAgICAgIHRydWUKICAgICAgZWxzZQogICAgICAgIGZhbHNlCiAgICAgIGVuZAogICAgcmVzY3VlID0+IGUKICAgICAgZmFsc2UKICAgIGVuZAogIGVuZAoKICAjID09PT09PT09PT0g2KPYr9in2Kkg2KrYqtio2Lkg2KfZhNmF2KfZiNizINi52YbYryDYp9mE2KXYr9ix2KfYrCA9PT09PT09PT09CiAgY2xhc3MgQ29tcG9uZW50UGxhY2VyCiAgICBkZWYgaW5pdGlhbGl6ZShkZWZpbml0aW9uLCBuYW1lKQogICAgICBAZGVmaW5pdGlvbiA9IGRlZmluaXRpb24KICAgICAgQG5hbWUgPSBuYW1lCiAgICAgIEBpcCA9IFNrZXRjaHVwOjpJbnB1dFBvaW50Lm5ldwogICAgZW5kCgogICAgZGVmIG9uTW91c2VNb3ZlKGZsYWdzLCB4LCB5LCB2aWV3KQogICAgICBAaXAucGljayh2aWV3LCB4LCB5KQogICAgICB2aWV3LmludmFsaWRhdGUKICAgIGVuZAoKICAgIGRlZiBkcmF3KHZpZXcpCiAgICAgIHJldHVybiB1bmxlc3MgQGlwLnZhbGlkPwogICAgICB0ciA9IEdlb206OlRyYW5zZm9ybWF0aW9uLm5ldyhAaXAucG9zaXRpb24pCiAgICAgIHZpZXcuZHJhdyhHTF9MSU5FX1NUUklQLCBbQGlwLnBvc2l0aW9uXSkKICAgICAgYmVnaW4KICAgICAgICBwdHMgPSBAZGVmaW5pdGlvbi5ib3VuZHMuY29ybmVyKDAuLjcpLm1hcCB7IHxwdHwgcHQudHJhbnNmb3JtKHRyKSB9CiAgICAgICAgdmlldy5kcmF3KEdMX1BPTFlHT04sIHB0cykKICAgICAgcmVzY3VlCiAgICAgIGVuZAogICAgZW5kCgogICAgZGVmIG9uTEJ1dHRvbkRvd24oZmxhZ3MsIHgsIHksIHZpZXcpCiAgICAgIGlmIEBpcC52YWxpZD8KICAgICAgICB0ciA9IEdlb206OlRyYW5zZm9ybWF0aW9uLm5ldyhAaXAucG9zaXRpb24pCiAgICAgICAgaW5zdGFuY2UgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuZW50aXRpZXMuYWRkX2luc3RhbmNlKEBkZWZpbml0aW9uLCB0cikKICAgICAgICBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuc2VsZWN0aW9uLmNsZWFyCiAgICAgICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnNlbGVjdGlvbi5hZGQoaW5zdGFuY2UpCiAgICAgICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnRvb2xzLnBvcF90b29sCiAgICAgICAgU2tldGNodXAuc2VuZF9hY3Rpb24oInNlbGVjdE1vdmVUb29sOiIpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kCgogICMgPT09PT09INin2YTYqtmB2LnZitmEINin2YTYqtmE2YLYp9im2YogPT09PT09CiAgZGVmIHNlbGYuYWN0aXZhdGUoZm9yY2VfcHJvbXB0ID0gdHJ1ZSkKICAgIGVtYWlsID0gIm1hcndhbmFkZWxAZ21haWwuY29tIgogICAgbGljZW5zZSA9ICIxMjM0NTY3ODkiCgogICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImVtYWlsIiwgZW1haWwpCiAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAibGljZW5zZSIsIGxpY2Vuc2UpCiAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiYWN0aXZhdGVkX29uY2UiLCB0cnVlKQogICAgCiAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYp9mE2KrZgdi52YrZhCDYqNmG2KzYp9itINiq2YTZgtin2KbZitin2YtcbvCfk6cg2KfZhNil2YrZhdmK2YQ6ICN7ZW1haWx9IikgaWYgZm9yY2VfcHJvbXB0CiAgICB0cnVlCiAgcmVzY3VlID0+IGUKICAgIHRydWUKICBlbmQKCiAgZGVmIHNlbGYuYWN0aXZhdGVkPwogICAgdHJ1ZQogIGVuZAoKICAjID09PT09PSDYr9in2YTYqSDZhNix2YHYuSDZhdmD2YjZhiDYrNiv2YrYryA9PT09PT0KICBkZWYgc2VsZi51cGxvYWRfY29tcG9uZW50X2RpYWxvZwogICAgIyDYp9iu2KrZitin2LEg2YXZhNmBIFNLUAogICAgc2twX3BhdGggPSBVSS5vcGVucGFuZWwoItin2K7YqtixINmF2YTZgSDYp9mE2YXZg9mI2YYgU0tQIiwgIiIsICIqLnNrcCIpCiAgICByZXR1cm4gdW5sZXNzIHNrcF9wYXRoICYmIEZpbGUuZXhpc3Q/KHNrcF9wYXRoKQogICAgCiAgICAjINil2K/Yrtin2YQg2KjZitin2YbYp9iqINin2YTZhdmD2YjZhgogICAgcHJvbXB0cyA9IFsi2KfYs9mFINin2YTZhdmD2YjZhjoiLCAi2KfZhNiq2LXZhtmK2YE6IiwgItin2YTZiNi12YE6Il0KICAgIGRlZmF1bHRzID0gWyIiLCAi2YXZg9mI2YbYp9iqINmF2K7Ytdi12KkiLCAiIl0KICAgIGlucHV0cyA9IFVJLmlucHV0Ym94KHByb21wdHMsIGRlZmF1bHRzLCAi2KXYttin2YHYqSDZhdmD2YjZhiDYrNiv2YrYryIpCiAgICByZXR1cm4gdW5sZXNzIGlucHV0cwogICAgCiAgICBuYW1lLCBjYXRlZ29yeSwgZGVzY3JpcHRpb24gPSBpbnB1dHMKICAgIAogICAgaWYgbmFtZS5lbXB0eT8KICAgICAgVUkubWVzc2FnZWJveCgi4p2MINmK2KzYqCDYpdiv2K7Yp9mEINin2LPZhSDZhNmE2YXZg9mI2YYiKQogICAgICByZXR1cm4KICAgIGVuZAogICAgCiAgICAjINil2LbYp9mB2Kkg2KfZhNmF2YPZiNmGCiAgICBpZiBhZGRfY3VzdG9tX2NvbXBvbmVudChza3BfcGF0aCwgbmFtZSwgY2F0ZWdvcnksIGRlc2NyaXB0aW9uKQogICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYpdi22KfZgdipINin2YTZhdmD2YjZhiAnI3tuYW1lfScg2KjZhtis2KfYrSDYpdmE2Ykg2KfZhNmF2YPYqtio2KkiKQogICAgICAjINil2LnYp9iv2Kkg2KrYrdmF2YrZhCDYp9mE2YXZg9iq2KjYqSDYpdiw2Kcg2YPYp9mG2Kog2YXZgdiq2YjYrdipCiAgICAgIHNob3dfbGlicmFyeSh0cnVlKQogICAgZWxzZQogICAgICBVSS5tZXNzYWdlYm94KCLinYwg2YHYtNmEINmB2Yog2KXYttin2YHYqSDYp9mE2YXZg9mI2YYiKQogICAgZW5kCiAgZW5kCgogICMgPT09PT09INiv2KfZhNipINmE2KXYr9in2LHYqSDYp9mE2YXZg9mI2YbYp9iqINin2YTYtNiu2LXZitipID09PT09PQogIGRlZiBzZWxmLm1hbmFnZV9jdXN0b21fY29tcG9uZW50cwogICAgY3VzdG9tX2NvbXBvbmVudHMgPSBsb2FkX2N1c3RvbV9jb21wb25lbnRzCiAgICAKICAgIGlmIGN1c3RvbV9jb21wb25lbnRzLmVtcHR5PwogICAgICBVSS5tZXNzYWdlYm94KCLihLnvuI8g2YTYpyDYqtmI2KzYryDZhdmD2YjZhtin2Kog2YXYrti12LXYqSIpCiAgICAgIHJldHVybgogICAgZW5kCiAgICAKICAgIGRsZyA9IFVJOjpIdG1sRGlhbG9nLm5ldyh7CiAgICAgIDpkaWFsb2dfdGl0bGUgPT4gItil2K/Yp9ix2Kkg2KfZhNmF2YPZiNmG2KfYqiDYp9mE2YXYrti12LXYqSIsCiAgICAgIDpwcmVmZXJlbmNlc19rZXkgPT4gIm1oZGVzaWduX21hbmFnZSIsCiAgICAgIDpzY3JvbGxhYmxlID0+IHRydWUsCiAgICAgIDpyZXNpemFibGUgPT4gdHJ1ZSwKICAgICAgOndpZHRoID0+IDYwMCwKICAgICAgOmhlaWdodCA9PiA0MDAKICAgIH0pCiAgICAKICAgIGh0bWwgPSA8PC1IVE1MCiAgICA8aHRtbD48aGVhZD4KICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVRhamF3YWw6d2dodEA0MDA7NzAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgICAgPHN0eWxlPgogICAgICAgIGJvZHkge2ZvbnQtZmFtaWx5OidUYWphd2FsJyxzYW5zLXNlcmlmO21hcmdpbjowO3BhZGRpbmc6MjBweDtiYWNrZ3JvdW5kOiNmNWY1ZjU7ZGlyZWN0aW9uOnJ0bDt9CiAgICAgICAgLmhlYWRlciB7dGV4dC1hbGlnbjpjZW50ZXI7bWFyZ2luLWJvdHRvbToyMHB4O2NvbG9yOiMyZTdkMzI7fQogICAgICAgIC5jb21wb25lbnQtaXRlbSB7YmFja2dyb3VuZDp3aGl0ZTttYXJnaW46MTBweCAwO3BhZGRpbmc6MTVweDtib3JkZXItcmFkaXVzOjhweDtib3gtc2hhZG93OjAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMSk7fQogICAgICAgIC5jb21wb25lbnQtbmFtZSB7Zm9udC13ZWlnaHQ6Ym9sZDtmb250LXNpemU6MTZweDttYXJnaW4tYm90dG9tOjVweDt9CiAgICAgICAgLmNvbXBvbmVudC1kZXRhaWxzIHtjb2xvcjojNjY2O2ZvbnQtc2l6ZToxNHB4O21hcmdpbi1ib3R0b206MTBweDt9CiAgICAgICAgLmRlbGV0ZS1idG4ge2JhY2tncm91bmQ6I2Y0NDMzNjtjb2xvcjp3aGl0ZTtib3JkZXI6bm9uZTtwYWRkaW5nOjVweCAxMHB4O2JvcmRlci1yYWRpdXM6NHB4O2N1cnNvcjpwb2ludGVyO30KICAgICAgICAuZGVsZXRlLWJ0bjpob3ZlciB7YmFja2dyb3VuZDojZDMyZjJmO30KICAgICAgICAuZW1wdHktbXNnIHt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojOTk5O3BhZGRpbmc6NDBweDt9CiAgICAgIDwvc3R5bGU+CiAgICA8L2hlYWQ+CiAgICA8Ym9keT4KICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyIj4KICAgICAgICA8aDI+8J+boO+4jyDYpdiv2KfYsdipINin2YTZhdmD2YjZhtin2Kog2KfZhNmF2K7Ytdi12Kk8L2gyPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBpZD0iY29tcG9uZW50cy1saXN0Ij4KICAgIEhUTUwKICAgIAogICAgY3VzdG9tX2NvbXBvbmVudHMuZWFjaCBkbyB8Y29tcHwKICAgICAgaHRtbCArPSA8PC1IVE1MCiAgICAgICAgPGRpdiBjbGFzcz0iY29tcG9uZW50LWl0ZW0iPgogICAgICAgICAgPGRpdiBjbGFzcz0iY29tcG9uZW50LW5hbWUiPiN7Y29tcFs6bmFtZV19PC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21wb25lbnQtZGV0YWlscyI+CiAgICAgICAgICAgIPCfk4Eg2KfZhNiq2LXZhtmK2YE6ICN7Y29tcFs6Y2F0ZWdvcnldfTxicj4KICAgICAgICAgICAg8J+TnSDYp9mE2YjYtdmBOiAje2NvbXBbOmRlc2NdfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJkZWxldGUtYnRuIiBvbmNsaWNrPSJkZWxldGVDb21wb25lbnQoJyN7Y29tcFs6bmFtZV19JykiPvCfl5HvuI8g2K3YsNmBPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgIEhUTUwKICAgIGVuZAogICAgCiAgICBodG1sICs9IDw8LUhUTUwKICAgICAgPC9kaXY+CiAgICAgIDxzY3JpcHQ+CiAgICAgICAgZnVuY3Rpb24gZGVsZXRlQ29tcG9uZW50KG5hbWUpIHsKICAgICAgICAgIGlmIChjb25maXJtKCfZh9mEINij2YbYqiDZhdiq2KPZg9ivINmF2YYg2K3YsNmBINin2YTZhdmD2YjZhjogJyArIG5hbWUgKyAn2J8nKSkgewogICAgICAgICAgICBza2V0Y2h1cC5kZWxldGVDdXN0b21Db21wb25lbnQobmFtZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICA8L3NjcmlwdD4KICAgIDwvYm9keT48L2h0bWw+CiAgICBIVE1MCiAgICAKICAgIGRsZy5zZXRfaHRtbChodG1sKQogICAgCiAgICBkbGcuYWRkX2FjdGlvbl9jYWxsYmFjaygiZGVsZXRlQ3VzdG9tQ29tcG9uZW50IikgZG8gfF8sIGNvbXBfbmFtZXwKICAgICAgaWYgZGVsZXRlX2N1c3RvbV9jb21wb25lbnQoY29tcF9uYW1lKQogICAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINit2LDZgSDYp9mE2YXZg9mI2YYg2KjZhtis2KfYrSIpCiAgICAgICAgZGxnLmNsb3NlCiAgICAgICAgbWFuYWdlX2N1c3RvbV9jb21wb25lbnRzCiAgICAgIGVsc2UKICAgICAgICBVSS5tZXNzYWdlYm94KCLinYwg2YHYtNmEINmB2Yog2K3YsNmBINin2YTZhdmD2YjZhiIpCiAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIGRsZy5zaG93CiAgZW5kCgogIGRlZiBzZWxmLnNob3dfbGlicmFyeShmb3JjZV9yZWxvYWQgPSBmYWxzZSkKICAgIGNvbXBvbmVudHNfZGF0YSA9IGxvYWRfY29tcG9uZW50c19kYXRhCiAgICAKICAgIGlmIGNvbXBvbmVudHNfZGF0YS5lbXB0eT8KICAgICAgVUkubWVzc2FnZWJveCgi4p2MINmE2Kcg2KrZiNis2K8g2KjZitin2YbYp9iqINmF2KrYp9it2KkuINmK2LHYrNmJINin2YTYqtit2YLZgiDZhdmGINin2KrYtdin2YQg2KfZhNil2YbYqtix2YbYqi4iKQogICAgICByZXR1cm4KICAgIGVuZAoKICAgIGRsZyA9IFVJOjpIdG1sRGlhbG9nLm5ldyh7CiAgICAgIDpkaWFsb2dfdGl0bGUgPT4gItmF2YPYqtio2Kkg2KfZhNmF2LfYp9io2K4gLSDZhS4g2YXYsdmI2KfZhiDYudin2K/ZhCIsCiAgICAgIDpwcmVmZXJlbmNlc19rZXkgPT4gIm1oZGVzaWduX2xpYnJhcnkiLAogICAgICA6c2Nyb2xsYWJsZSA9PiB0cnVlLAogICAgICA6cmVzaXphYmxlID0+IHRydWUsCiAgICAgIDp3aWR0aCA9PiA5MDAsCiAgICAgIDpoZWlnaHQgPT4gNzAwCiAgICB9KQoKICAgIGNhdGVnb3JpZXMgPSBjb21wb25lbnRzX2RhdGEubWFwIHsgfGN8IGNbOmNhdGVnb3J5XSB9LnVuaXEKCiAgICBodG1sID0gPDwtSFRNTAogICAgPGh0bWw+PGhlYWQ+CiAgICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1UYWphd2FsOndnaHRANDAwOzcwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CiAgICAgIDxzdHlsZT4KICAgICAgICBib2R5IHtmb250LWZhbWlseTonVGFqYXdhbCcsc2Fucy1zZXJpZjttYXJnaW46MDtiYWNrZ3JvdW5kOiNmOWY5Zjk7cGFkZGluZzowIDIwcHggNDBweDtkaXJlY3Rpb246cnRsO30KICAgICAgICBoZWFkZXIge2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzoyMHB4IDA7YmFja2dyb3VuZDp3aGl0ZTtib3JkZXItcmFkaXVzOjEwcHg7bWFyZ2luLWJvdHRvbToyMHB4O3BhZGRpbmc6MTVweDt9CiAgICAgICAgaGVhZGVyIGltZyB7aGVpZ2h0OjUwcHg7Ym9yZGVyLXJhZGl1czo1MCU7fQogICAgICAgIGhlYWRlciBoMiB7bWFyZ2luOjA7Zm9udC1zaXplOjI0cHg7Y29sb3I6IzJlN2QzMjt9CiAgICAgICAgLmNvbnRyb2xzIHtkaXNwbGF5OmZsZXg7Z2FwOjEwcHg7bWFyZ2luLWJvdHRvbToyMHB4O30KICAgICAgICAuY29udHJvbC1idG4ge3BhZGRpbmc6OHB4IDE1cHg7YmFja2dyb3VuZDojMjE5NkYzO2NvbG9yOndoaXRlO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NXB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxNHB4O30KICAgICAgICAuY29udHJvbC1idG46aG92ZXIge2JhY2tncm91bmQ6IzE5NzZEMjt9CiAgICAgICAgLmNvbnRyb2wtYnRuLnVwbG9hZCB7YmFja2dyb3VuZDojNENBRjUwO30KICAgICAgICAuY29udHJvbC1idG4udXBsb2FkOmhvdmVyIHtiYWNrZ3JvdW5kOiM0NWEwNDk7fQogICAgICAgIC5jb250cm9sLWJ0bi5tYW5hZ2Uge2JhY2tncm91bmQ6I0ZGOTgwMDt9CiAgICAgICAgLmNvbnRyb2wtYnRuLm1hbmFnZTpob3ZlciB7YmFja2dyb3VuZDojZjU3YzAwO30KICAgICAgICAubWVudS10b2dnbGUge2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToyOHB4O3VzZXItc2VsZWN0Om5vbmU7fQogICAgICAgIC5maWx0ZXIge2Rpc3BsYXk6bm9uZTttYXJnaW4tYm90dG9tOjIwcHg7fQogICAgICAgIC5maWx0ZXIgc2VsZWN0IHtmb250LXNpemU6MTZweDtwYWRkaW5nOjZweCAxMHB4O2JvcmRlci1yYWRpdXM6NnB4O2JvcmRlcjoxcHggc29saWQgI2NjYzt9CiAgICAgICAgLmdyaWQge2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KGF1dG8tZmlsbCxtaW5tYXgoMjAwcHgsMWZyKSk7Z2FwOjIwcHg7fQogICAgICAgIC5jYXJkIHtiYWNrZ3JvdW5kOndoaXRlO2JvcmRlci1yYWRpdXM6MTJweDtwYWRkaW5nOjEycHg7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoMCwwLDAsMC4wOCk7dGV4dC1hbGlnbjpjZW50ZXI7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC4zcyBlYXNlLGJveC1zaGFkb3cgMC4zcyBlYXNlO3Bvc2l0aW9uOnJlbGF0aXZlO30KICAgICAgICAuY2FyZDpob3ZlciB7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTVweCk7Ym94LXNoYWRvdzowIDhweCAyMHB4IHJnYmEoMCwwLDAsMC4xMik7fQogICAgICAgIC5jYXJkLmN1c3RvbTo6YmVmb3JlIHtjb250ZW50OiAn4q2QJzsgcG9zaXRpb246YWJzb2x1dGU7IHRvcDoxMHB4OyBsZWZ0OjEwcHg7IGJhY2tncm91bmQ6Z29sZDsgYm9yZGVyLXJhZGl1czo1MCU7IHdpZHRoOjIwcHg7IGhlaWdodDoyMHB4OyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZm9udC1zaXplOjEycHg7fQogICAgICAgIGltZy5jb21wb25lbnQtaW1nIHt3aWR0aDoxMDAlO2hlaWdodDoyMDBweDtvYmplY3QtZml0OmNvdmVyO2JvcmRlci1yYWRpdXM6OHB4O30KICAgICAgICBoNCB7bWFyZ2luOjEwcHggMCA1cHg7Zm9udC1zaXplOjE3cHg7Y29sb3I6IzMzMzt9CiAgICAgICAgcCB7Zm9udC1zaXplOjEzcHg7Y29sb3I6IzY2NjttYXJnaW46MDt9CiAgICAgICAgYnV0dG9uIHttYXJnaW4tdG9wOjEwcHg7cGFkZGluZzo2cHggMTRweDtiYWNrZ3JvdW5kOiM0M2EwNDc7Y29sb3I6d2hpdGU7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo1cHg7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIDAuM3M7fQogICAgICAgIGJ1dHRvbjpob3ZlciB7YmFja2dyb3VuZDojMmU3ZDMyO30KICAgICAgICBmb290ZXIge21hcmdpbi10b3A6NDBweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MTJweDtjb2xvcjojOTk5O30KICAgICAgPC9zdHlsZT4KICAgIDwvaGVhZD4KICAgIDxib2R5IG9uY29udGV4dG1lbnU9InJldHVybiBmYWxzZSI+CiAgICAgIDxoZWFkZXI+CiAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTVweDsiPgogICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vaS5pYmIuY28vVzR5N2NERlgvY3JvcHBlZC1jaXJjbGUtaW1hZ2UucG5nIiBhbHQ9IkxvZ28iIC8+CiAgICAgICAgICA8aDI+2YXZg9iq2KjYqSDYqti12YXZitmFINin2YTZhdi32KfYqNiuIHwg2YXZh9mG2K/YsyDZhdix2YjYp9mGINi52KfYr9mEPC9oMj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJtZW51LXRvZ2dsZSIgb25jbGljaz0idG9nZ2xlTWVudSgpIj7imLA8L2Rpdj4KICAgICAgPC9oZWFkZXI+CgogICAgICA8ZGl2IGNsYXNzPSJjb250cm9scyI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY29udHJvbC1idG4gdXBsb2FkIiBvbmNsaWNrPSJ1cGxvYWRDb21wb25lbnQoKSI+8J+TpCDYsdmB2Lkg2YXZg9mI2YYg2KzYr9mK2K88L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJjb250cm9sLWJ0biBtYW5hZ2UiIG9uY2xpY2s9Im1hbmFnZUNvbXBvbmVudHMoKSI+8J+boO+4jyDYpdiv2KfYsdipINin2YTZhdmD2YjZhtin2Ko8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJjb250cm9sLWJ0biIgb25jbGljaz0iY2xlYXJDYWNoZSgpIj7wn5SEINiq2K3Yr9mK2Ksg2KfZhNmF2YPYqtio2Kk8L2J1dHRvbj4KICAgICAgPC9kaXY+CgogICAgICA8ZGl2IGNsYXNzPSJmaWx0ZXIiIGlkPSJmaWx0ZXItYm94Ij4KICAgICAgICA8bGFiZWw+CiAgICAgICAgICDwn5S9INiq2LXZhtmK2YE6CiAgICAgICAgICA8c2VsZWN0IGlkPSJjYXRlZ29yeSIgb25jaGFuZ2U9ImZpbHRlckNvbXBvbmVudHMoKSI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImFsbCI+2KfZhNmD2YQ8L29wdGlvbj4KICAgICAgICAgICAgI3tjYXRlZ29yaWVzLm1hcCB7IHxjYXR8ICI8b3B0aW9uIHZhbHVlPScje2NhdH0nPiN7Y2F0fTwvb3B0aW9uPiIgfS5qb2lufQogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9sYWJlbD4KICAgICAgPC9kaXY+CgogICAgICA8ZGl2IGlkPSJjb21wb25lbnRzIiBjbGFzcz0iZ3JpZCI+PC9kaXY+CgogICAgICA8Zm9vdGVyPgogICAgICAgINiq2YUg2KrYtdmF2YrZhSDZh9iw2Ycg2KfZhNmF2YPYqtio2Kkg2KjZiNin2LPYt9ipIDxiPtmF2YfZhtiv2LMg2YXYsdmI2KfZhiDYudin2K/ZhDwvYj48YnI+CiAgICAgICAg8J+TniDZhNmE2KrZiNin2LXZhDogPGI+MDEyMDQyNzk2MDY8L2I+PGJyPgogICAgICAgIPCfk6cg2KfZhNil2YrZhdmK2YQ6IDxiPm1hcndhbmFkZWxAZ21haWwuY29tPC9iPgogICAgICA8L2Zvb3Rlcj4KCiAgICAgIDxzY3JpcHQ+CmZ1bmN0aW9uIGxvYWRDb21wb25lbnQoY29tcCl7c2tldGNodXAubG9hZENvbXBvbmVudEJ5RGF0YShKU09OLnN0cmluZ2lmeShjb21wKSk7fQpmdW5jdGlvbiB1cGxvYWRDb21wb25lbnQoKXtza2V0Y2h1cC51cGxvYWRDb21wb25lbnQoKTt9CmZ1bmN0aW9uIG1hbmFnZUNvbXBvbmVudHMoKXtza2V0Y2h1cC5tYW5hZ2VDdXN0b21Db21wb25lbnRzKCk7fQpmdW5jdGlvbiBjbGVhckNhY2hlKCl7c2tldGNodXAuY2xlYXJDb21wb25lbnRDYWNoZSgpO30KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBlPT5lLnByZXZlbnREZWZhdWx0KCkpOwpjb25zdCBhbGxDb21wb25lbnRzPSN7Y29tcG9uZW50c19kYXRhLnRvX2pzb259OwpmdW5jdGlvbiByZW5kZXIoYyl7bGV0IGg9IiI7Yy5mb3JFYWNoKHg9Pntjb25zdCBpc0N1c3RvbT14LmN1c3RvbT8nIGN1c3RvbSc6Jyc7aCs9YDxkaXYgY2xhc3M9ImNhcmQke2lzQ3VzdG9tfSI+PGltZyBjbGFzcz0iY29tcG9uZW50LWltZyIgc3JjPSIke3guaW1hZ2V9IiBvbmVycm9yPSJ0aGlzLnNyYz0naHR0cHM6Ly9tYWhtb3VkZGVzaWduLmNvbS9TS0VUQ0hVUC9jb21wb25lbnRzL2RlZmF1bHRfdGh1bWIucG5nJyIgLz48aDQ+JHt4Lm5hbWV9PC9oND48cD4ke3guZGVzY308L3A+PGJ1dHRvbiBvbmNsaWNrPSdsb2FkQ29tcG9uZW50KCR7SlNPTi5zdHJpbmdpZnkoeCl9KSc+2KXYr9ix2KfYrDwvYnV0dG9uPjwvZGl2PmB9KTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29tcG9uZW50cyIpLmlubmVySFRNTD1oO30KZnVuY3Rpb24gZmlsdGVyQ29tcG9uZW50cygpe2NvbnN0IGNhdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2F0ZWdvcnkiKS52YWx1ZTtpZihjYXQ9PT0iYWxsIilyZW5kZXIoYWxsQ29tcG9uZW50cyk7ZWxzZSByZW5kZXIoYWxsQ29tcG9uZW50cy5maWx0ZXIoYz0+Yy5jYXRlZ29yeT09PWNhdCkpO30KZnVuY3Rpb24gdG9nZ2xlTWVudSgpe2NvbnN0IGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpbHRlci1ib3giKTtiLnN0eWxlLmRpc3BsYXk9KGIuc3R5bGUuZGlzcGxheT09PSJibG9jayIpPyJub25lIjoiYmxvY2siO30Kd2luZG93Lm9ubG9hZD0oKT0+ZmlsdGVyQ29tcG9uZW50cygpOwogICAgICA8L3NjcmlwdD4KICAgIDwvYm9keT48L2h0bWw+CiAgICBIVE1MCgogICAgZGxnLnNldF9odG1sKGh0bWwpCgogICAgZGxnLmFkZF9hY3Rpb25fY2FsbGJhY2soImxvYWRDb21wb25lbnRCeURhdGEiKSBkbyB8XywgY29tcF9qc29ufAogICAgICBiZWdpbgogICAgICAgIGNvbXAgPSBKU09OLnBhcnNlKGNvbXBfanNvbiwgc3ltYm9saXplX25hbWVzOiB0cnVlKQogICAgICAgIAogICAgICAgICMg2KrYrdiv2YrYryDYpdiw2Kcg2YPYp9mGINin2YTZhdmD2YjZhiDZhdit2YTZitin2Ysg2KPZiCDZhdmGINin2YTYs9mK2LHZgdixCiAgICAgICAgaWYgY29tcFs6Y3VzdG9tXSAmJiBjb21wWzp1cmxdLnN0YXJ0X3dpdGg/KCcvJykKICAgICAgICAgICMg2YXZg9mI2YYg2YXYrdmE2YoKICAgICAgICAgIGxvY2FsX3BhdGggPSBjb21wWzp1cmxdCiAgICAgICAgZWxzZQogICAgICAgICAgIyDZhdmD2YjZhiDZhdmGINin2YTYs9mK2LHZgdixCiAgICAgICAgICB1cmwgPSBVUkkucGFyc2UoY29tcFs6dXJsXSkKICAgICAgICAgIGhhc2hfbmFtZSA9IERpZ2VzdDo6U0hBMjU2LmhleGRpZ2VzdCh1cmwudG9fcylbMC4uMTZdICsgIi5za3AiCiAgICAgICAgICBjYWNoZV9kaXIgPSBGaWxlLmpvaW4oRGlyLnRtcGRpciwgIm1oZGVzaWduX2NhY2hlXzEiKQogICAgICAgICAgRmlsZVV0aWxzLm1rZGlyX3AoY2FjaGVfZGlyKQogICAgICAgICAgbG9jYWxfcGF0aCA9IEZpbGUuam9pbihjYWNoZV9kaXIsIGhhc2hfbmFtZSkKCiAgICAgICAgICB1bmxlc3MgRmlsZS5leGlzdD8obG9jYWxfcGF0aCkKICAgICAgICAgICAgZG93bmxvYWRfY29tcG9uZW50X3dpdGhfcHJvZ3Jlc3ModXJsLCBsb2NhbF9wYXRoLCBjb21wWzpuYW1lXSkKICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICAjINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGCiAgICAgICAgaWYgRmlsZS5leGlzdD8obG9jYWxfcGF0aCkgJiYgRmlsZS5zaXplKGxvY2FsX3BhdGgpID4gMAogICAgICAgICAgZGVmaW5pdGlvbiA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5kZWZpbml0aW9ucy5sb2FkKGxvY2FsX3BhdGgsIGFsbG93X25ld2VyOiB0cnVlKQogICAgICAgICAgaWYgZGVmaW5pdGlvbgogICAgICAgICAgICBwbGFjZXIgPSBDb21wb25lbnRQbGFjZXIubmV3KGRlZmluaXRpb24sIGNvbXBbOm5hbWVdKQogICAgICAgICAgICBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwudG9vbHMucHVzaF90b29sKHBsYWNlcikKICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KrYrdmF2YrZhCAnI3tjb21wWzpuYW1lXX0nIC0g2KfZhtmC2LEg2YTZiNi22LnZhyDZgdmKINin2YTZhtmF2YjYsNisIikKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pqg77iPINmE2YUg2YrYqtmFINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGIikKICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDZhNmFINmK2KrZhSDYrdmB2Lgg2KfZhNmF2YTZgSDYqNi02YPZhCDYtdit2YrYrSIpCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgIHJlc2N1ZSA9PiBlCiAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINiu2LfYoyDZgdmKINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGOiAje2UubWVzc2FnZX0iKQogICAgICBlbmQKICAgIGVuZAoKICAgIGRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJ1cGxvYWRDb21wb25lbnQiKSBkbyB8X3wKICAgICAgdXBsb2FkX2NvbXBvbmVudF9kaWFsb2cKICAgIGVuZAoKICAgIGRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJtYW5hZ2VDdXN0b21Db21wb25lbnRzIikgZG8gfF98CiAgICAgIG1hbmFnZV9jdXN0b21fY29tcG9uZW50cwogICAgZW5kCgogICAgZGxnLmFkZF9hY3Rpb25fY2FsbGJhY2soImNsZWFyQ29tcG9uZW50Q2FjaGUiKSBkbyB8X3wKICAgICAgYmVnaW4KICAgICAgICBjYWNoZV9kaXIgPSBGaWxlLmpvaW4oRGlyLnRtcGRpciwgIm1oZGVzaWduX2NhY2hlXzEiKQogICAgICAgIGlmIEZpbGUuZGlyZWN0b3J5PyhjYWNoZV9kaXIpCiAgICAgICAgICBGaWxlVXRpbHMucm1fcmYoY2FjaGVfZGlyKQogICAgICAgIGVuZAogICAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINin2YTYqtit2K/ZitirINio2YbYrNin2K0uIikKICAgICAgcmVzY3VlID0+IGUKICAgICAgICBVSS5tZXNzYWdlYm94KCLinYwg2YHYtNmEINit2LDZgSDYp9mE2YXZhNmB2KfYqiDYp9mE2YXYpNmC2KrYqTogI3tlLm1lc3NhZ2V9IikKICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgZGxnLnNob3cKICBlbmQKCiAgIyA9PT09PT0g2K/Yp9mE2Kkg2YTYqtit2YXZitmEINin2YTZhdmD2YjZhiDZhdi5INi02LHZiti3INin2YTYqtmC2K/ZhSA9PT09PT0KICBkZWYgc2VsZi5kb3dubG9hZF9jb21wb25lbnRfd2l0aF9wcm9ncmVzcyh1cmwsIGxvY2FsX3BhdGgsIGNvbXBvbmVudF9uYW1lKQogICAgcHJvZ3Jlc3MgPSBVSTo6SHRtbERpYWxvZy5uZXcoewogICAgICA6ZGlhbG9nX3RpdGxlID0+ICLYqtit2YXZitmEINin2YTZhdmD2YjZhi4uLiIsCiAgICAgIDpwcmVmZXJlbmNlc19rZXkgPT4gIm1oZGVzaWduX3Byb2dyZXNzIiwKICAgICAgOnNjcm9sbGFibGUgPT4gZmFsc2UsCiAgICAgIDpyZXNpemFibGUgPT4gZmFsc2UsCiAgICAgIDp3aWR0aCA9PiAzMDAsCiAgICAgIDpoZWlnaHQgPT4gMTUwCiAgICB9KQoKICAgIHByb2dyZXNzLnNldF9odG1sIDw8LUhUTUwKICAgICAgPGh0bWw+PGhlYWQ+CiAgICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICAgIDxzdHlsZT4KICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogJ1RhamF3YWwnLCBzYW5zLXNlcmlmOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMDsgcGFkZGluZzogMjBweDsgZGlyZWN0aW9uOiBydGw7IH0KICAgICAgICAgIGgzIHsgbWFyZ2luOiAxMHB4IDA7IH0KICAgICAgICAgICNwcm9ncmVzcy1iYXIgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAyMHB4OyBiYWNrZ3JvdW5kOiAjZGRkOyBib3JkZXItcmFkaXVzOiAxMHB4OyBvdmVyZmxvdzogaGlkZGVuOyBtYXJnaW4tdG9wOiAxMHB4OyB9CiAgICAgICAgICAjcHJvZ3Jlc3MtZmlsbCB7IGhlaWdodDogMTAwJTsgd2lkdGg6IDAlOyBiYWNrZ3JvdW5kOiAjNGNhZjUwOyB0cmFuc2l0aW9uOiB3aWR0aCAwLjJzIGVhc2U7IH0KICAgICAgICAgICNwZXJjZW50IHsgbWFyZ2luLXRvcDogOHB4OyBmb250LXNpemU6IDE0cHg7IH0KICAgICAgICA8L3N0eWxlPgogICAgICA8L2hlYWQ+PGJvZHk+CiAgICAgICAgPGgzPtis2KfYsdmKINiq2K3ZhdmK2YQgI3tjb21wb25lbnRfbmFtZX0uLi48L2gzPgogICAgICAgIDxkaXYgaWQ9InByb2dyZXNzLWJhciI+PGRpdiBpZD0icHJvZ3Jlc3MtZmlsbCI+PC9kaXY+PC9kaXY+CiAgICAgICAgPGRpdiBpZD0icGVyY2VudCI+MCU8L2Rpdj4KICAgICAgPC9ib2R5PjwvaHRtbD4KICAgIEhUTUwKCiAgICBwcm9ncmVzcy5zaG93CgogICAgVUkuc3RhcnRfdGltZXIoMC4zLCBmYWxzZSkgZG8KICAgICAgYmVnaW4KICAgICAgICBjb250ZW50X2xlbmd0aCA9IG5pbAogICAgICAgIHRlbXBmaWxlID0gVGVtcGZpbGUubmV3KCJtaGNvbXBvbmVudCIpCgogICAgICAgIFVSSS5vcGVuKHVybCwKICAgICAgICAgIGNvbnRlbnRfbGVuZ3RoX3Byb2M6IC0+KGxlbikgeyBjb250ZW50X2xlbmd0aCA9IGxlbiB9LAogICAgICAgICAgcHJvZ3Jlc3NfcHJvYzogLT4oYnl0ZXMpIHsKICAgICAgICAgICAgcGVyY2VudCA9IGNvbnRlbnRfbGVuZ3RoID8gKChieXRlcy50b19mIC8gY29udGVudF9sZW5ndGgpICogMTAwKS50b19pIDogMAogICAgICAgICAgICBwcm9ncmVzcy5leGVjdXRlX3NjcmlwdCgiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzLWZpbGwnKS5zdHlsZS53aWR0aCA9ICcje3BlcmNlbnR9JSciKQogICAgICAgICAgICBwcm9ncmVzcy5leGVjdXRlX3NjcmlwdCgiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcmNlbnQnKS5pbm5lclRleHQgPSAnI3twZXJjZW50fSUnIikKICAgICAgICAgIH0KICAgICAgICApIGRvIHxyZW1vdGVfZmlsZXwKICAgICAgICAgIElPLmNvcHlfc3RyZWFtKHJlbW90ZV9maWxlLCB0ZW1wZmlsZSkKICAgICAgICBlbmQKCiAgICAgICAgdGVtcGZpbGUuY2xvc2UKICAgICAgICBGaWxlVXRpbHMubXYodGVtcGZpbGUucGF0aCwgbG9jYWxfcGF0aCkKICAgICAgICBwcm9ncmVzcy5jbG9zZSBpZiBwcm9ncmVzcy52aXNpYmxlPwoKICAgICAgcmVzY3VlID0+IGUKICAgICAgICB0ZW1wZmlsZS5jbG9zZSBpZiB0ZW1wZmlsZQogICAgICAgIHRlbXBmaWxlLnVubGluayBpZiB0ZW1wZmlsZQogICAgICAgIHByb2dyZXNzLmNsb3NlIGlmIHByb2dyZXNzLnZpc2libGU/CiAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINiu2LfYoyDZgdmKINin2YTYqtit2YXZitmEOiAje2UubWVzc2FnZX0iKQogICAgICBlbmQKICAgIGVuZAogIGVuZAoKICB1bmxlc3MgZmlsZV9sb2FkZWQ/KF9fRklMRV9fKQogICAgVUkubWVudSgiUGx1Z2lucyIpLmFkZF9pdGVtKCIje1BMVUdJTl9OQU1FfSAtINiq2YHYudmK2YQiKSB7IGFjdGl2YXRlKHRydWUpIH0KICAgIFVJLm1lbnUoIlBsdWdpbnMiKS5hZGRfaXRlbSgi8J+TpCDYsdmB2Lkg2YXZg9mI2YYg2KzYr9mK2K8iKSB7IHVwbG9hZF9jb21wb25lbnRfZGlhbG9nIH0KICAgIFVJLm1lbnUoIlBsdWdpbnMiKS5hZGRfaXRlbSgi8J+boO+4jyDYpdiv2KfYsdipINin2YTZhdmD2YjZhtin2KoiKSB7IG1hbmFnZV9jdXN0b21fY29tcG9uZW50cyB9CiAgICAKICAgIHRvb2xiYXIgPSBVSTo6VG9vbGJhci5uZXcoUExVR0lOX05BTUUpCiAgICAKICAgICMg2KPZhdixINin2YTZhdmD2KrYqNipINin2YTYsdim2YrYs9mKCiAgICBjbWRfbGlicmFyeSA9IFVJOjpDb21tYW5kLm5ldygi2YXZg9iq2KjYqSAje1BMVUdJTl9OQU1FfSIpIHsgc2hvd19saWJyYXJ5IH0KICAgIGljb25fcGF0aCA9IEZpbGUuam9pbihQTFVHSU5fRElSLCAiaWNvbi5wbmciKSByZXNjdWUgbmlsCiAgICBpZiBGaWxlLmV4aXN0PyhpY29uX3BhdGgpCiAgICAgIGNtZF9saWJyYXJ5LnNtYWxsX2ljb24gPSBpY29uX3BhdGgKICAgICAgY21kX2xpYnJhcnkubGFyZ2VfaWNvbiA9IGljb25fcGF0aAogICAgZW5kCiAgICBjbWRfbGlicmFyeS50b29sdGlwID0gItiq2LTYutmK2YQg2YXZg9iq2KjYqSBNSERFU0lHTiIKICAgIHRvb2xiYXIuYWRkX2l0ZW0oY21kX2xpYnJhcnkpCiAgICAKICAgICMg2KPZhdixINix2YHYuSDYp9mE2YXZg9mI2YbYp9iqCiAgICBjbWRfdXBsb2FkID0gVUk6OkNvbW1hbmQubmV3KCLwn5OkINix2YHYuSDZhdmD2YjZhiIpIHsgdXBsb2FkX2NvbXBvbmVudF9kaWFsb2cgfQogICAgY21kX3VwbG9hZC50b29sdGlwID0gItix2YHYuSDZhdmD2YjZhiDYrNiv2YrYryDZhNmE2YXZg9iq2KjYqSIKICAgIHRvb2xiYXIuYWRkX2l0ZW0oY21kX3VwbG9hZCkKCiAgICB0b29sYmFyLnJlc3RvcmUKICAgIGZpbGVfbG9hZGVkKF9fRklMRV9fKQogIGVuZAplbmQ="  // كود روبي مشفر بـ base64
}
