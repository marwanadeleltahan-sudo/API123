{
  "main_code": "cmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ3NlY3VyZXJhbmRvbScKcmVxdWlyZSAnb3Blbi11cmknCnJlcXVpcmUgJ3RtcGRpcicKcmVxdWlyZSAnYmFzZTY0JwpyZXF1aXJlICd0ZW1wZmlsZScKcmVxdWlyZSAnZGlnZXN0JwpyZXF1aXJlICdmaWxldXRpbHMnCgptb2R1bGUgTUhERVNJR04KICBQTFVHSU5fTkFNRSA9ICJNSERFU0lHTiIKICBWQUxJREFUSU9OX1VSTCA9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbWFyd2FuYWRlbGVsdGFoYW4tc3Vkby9BUEkxMjMvcmVmcy9oZWFkcy9tYWluL2VtYWlsLmpzb24iCgogIENPTVBPTkVOVFMgPSBiZWdpbgogIHVybCA9ICJodHRwczovL21haG1vdWRkZXNpZ24uY29tL1NLRVRDSFVQL2NvbXBvbmVudHMtVjQuanNvbiIKICBqc29uX3JhdyA9IFVSSS5vcGVuKHVybCkucmVhZAogIGpzb25fZGF0YSA9IEpTT04ucGFyc2UoanNvbl9yYXcpCiAgZGVjb2RlZF9qc29uID0gQmFzZTY0LmRlY29kZTY0KGpzb25fZGF0YVsiZGF0YSJdKQogIEpTT04ucGFyc2UoZGVjb2RlZF9qc29uLCBzeW1ib2xpemVfbmFtZXM6IHRydWUpCnJlc2N1ZSA9PiBlCiAgVUkubWVzc2FnZWJveCgi4p2MINmB2LTZhCDYqtit2YXZitmEINio2YrYp9mG2KfYqiDYp9mE2YXZg9iq2KjYqTogI3tlLm1lc3NhZ2V9IikKICBbXQplbmQKCiAgIyA9PT09PT09PT09INij2K/Yp9ipINiq2KrYqNi5INin2YTZhdin2YjYsyDYudmG2K8g2KfZhNil2K/Ysdin2KwgPT09PT09PT09PQogIGNsYXNzIENvbXBvbmVudFBsYWNlcgogICAgZGVmIGluaXRpYWxpemUoZGVmaW5pdGlvbiwgbmFtZSkKICAgICAgQGRlZmluaXRpb24gPSBkZWZpbml0aW9uCiAgICAgIEBuYW1lID0gbmFtZQogICAgICBAaXAgPSBTa2V0Y2h1cDo6SW5wdXRQb2ludC5uZXcKICAgIGVuZAoKICAgIGRlZiBvbk1vdXNlTW92ZShmbGFncywgeCwgeSwgdmlldykKICAgICAgQGlwLnBpY2sodmlldywgeCwgeSkKICAgICAgdmlldy5pbnZhbGlkYXRlCiAgICBlbmQKCiAgICBkZWYgZHJhdyh2aWV3KQogICAgICByZXR1cm4gdW5sZXNzIEBpcC52YWxpZD8KICAgICAgdHIgPSBHZW9tOjpUcmFuc2Zvcm1hdGlvbi5uZXcoQGlwLnBvc2l0aW9uKQogICAgICB2aWV3LmRyYXcoR0xfTElORV9TVFJJUCwgW0BpcC5wb3NpdGlvbl0pCiAgICAgIGJlZ2luCiAgICAgICAgcHRzID0gQGRlZmluaXRpb24uYm91bmRzLmNvcm5lcigwLi43KS5tYXAgeyB8cHR8IHB0LnRyYW5zZm9ybSh0cikgfQogICAgICAgIHZpZXcuZHJhdyhHTF9QT0xZR09OLCBwdHMpCiAgICAgIHJlc2N1ZQogICAgICBlbmQKICAgIGVuZAoKZGVmIG9uTEJ1dHRvbkRvd24oZmxhZ3MsIHgsIHksIHZpZXcpCiAgaWYgQGlwLnZhbGlkPwogICAgdHIgPSBHZW9tOjpUcmFuc2Zvcm1hdGlvbi5uZXcoQGlwLnBvc2l0aW9uKQogICAgaW5zdGFuY2UgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuZW50aXRpZXMuYWRkX2luc3RhbmNlKEBkZWZpbml0aW9uLCB0cikKICAgIFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5zZWxlY3Rpb24uY2xlYXIKICAgIFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5zZWxlY3Rpb24uYWRkKGluc3RhbmNlKQogICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnRvb2xzLnBvcF90b29sCiAgICBTa2V0Y2h1cC5zZW5kX2FjdGlvbigic2VsZWN0TW92ZVRvb2w6IikKICBlbmQKZW5kCiAgZW5kCgogIGRlZiBzZWxmLmdldF9kZXZpY2VfaWQKICAgIHByZWZzID0gU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZGV2aWNlX2lkIikKICAgIHJldHVybiBwcmVmcyB1bmxlc3MgcHJlZnMubmlsPyB8fCBwcmVmcy5lbXB0eT8KICAgIGlkID0gU2VjdXJlUmFuZG9tLnV1aWQKICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJkZXZpY2VfaWQiLCBpZCkKICAgIGlkCiAgZW5kCgogICMgPT09PT09INiv2KfZhNipINin2YTYqtit2YLZgiDZhdmGINin2YTYqNmK2KfZhtin2KogPT09PT09CiAgZGVmIHNlbGYudmFsaWRhdGVfY3JlZGVudGlhbHMoZW1haWwsIGxpY2Vuc2UpCiAgICBiZWdpbgogICAgICB1cmkgPSBVUkkoVkFMSURBVElPTl9VUkwpCiAgICAgIHJlc3BvbnNlID0gTmV0OjpIVFRQLmdldCh1cmkpCiAgICAgIHZhbGlkX3VzZXJzID0gSlNPTi5wYXJzZShyZXNwb25zZSkKICAgICAgCiAgICAgIHZhbGlkX3VzZXJzLmFueT8geyB8dXNlcnwgCiAgICAgICAgdXNlclsiZW1haWwiXSA9PSBlbWFpbCAmJiB1c2VyWyJwYXNzd29yZCJdID09IGxpY2Vuc2UgCiAgICAgIH0KICAgIHJlc2N1ZSA9PiBlCiAgICAgIGZhbHNlCiAgICBlbmQKICBlbmQKCiAgZGVmIHNlbGYuYWN0aXZhdGUoZm9yY2VfcHJvbXB0ID0gdHJ1ZSkKICAgIGVtYWlsID0gU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZW1haWwiKSB8fCAiIgogICAgbGljZW5zZSA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImxpY2Vuc2UiKSB8fCAiIgoKICAgICMg2YTZiCDZhdi32YTZiNioINiv2KfZitmF2YvYpyDYo9mIINmF2YHZiti0INio2YrYp9mG2KfYqtiMINmG2LfZhNio2YfYpyDZhdmGINin2YTZhdiz2KrYrtiv2YUKICAgIGlmIGZvcmNlX3Byb21wdCB8fCBlbWFpbC5lbXB0eT8gfHwgbGljZW5zZS5lbXB0eT8KICAgICAgaW5wdXQgPSBVSS5pbnB1dGJveChbItin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZiiIsICLZhdmB2KrYp9itINin2YTYqtix2K7Ziti1Il0sIFtlbWFpbCwgbGljZW5zZV0sICLYqtmB2LnZitmEIE1IREVTSUdOIikKICAgICAgcmV0dXJuIHVubGVzcyBpbnB1dAogICAgICBlbWFpbCwgbGljZW5zZSA9IGlucHV0CiAgICBlbmQKCiAgICAjINin2YTYqtit2YLZgiDZhdmGINin2YTYqNmK2KfZhtin2Kog2LnYqNixIEdpdEh1YiBBUEkKICAgIHZhbGlkX2RhdGEgPSB2YWxpZGF0ZV9jcmVkZW50aWFscyhlbWFpbCwgbGljZW5zZSkKCiAgICBpZiB2YWxpZF9kYXRhCiAgICAgICMg2KfZhNio2YrYp9mG2KfYqiDYtdit2YrYrdipCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIsIGVtYWlsKQogICAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAibGljZW5zZSIsIGxpY2Vuc2UpCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJhY3RpdmF0ZWRfb25jZSIsIHRydWUpCiAgICAgIFVJLm1lc3NhZ2Vib3goItmF2KjYsdmI2YMg2YrYpyDZh9mG2K/Ys9ipINin2YTYp9i22KfZgdipINi02LrYp9mE2Klcbtiq2YUg2KjYsdmF2KzYqSDYp9mE2KfYttin2YHYqSDYqNmI2KfYs9i32Kkg2YXZh9mG2K/YsyDZhdix2YjYp9mGINi52KfYr9mEXG7wn5OeIDAxMjA0Mjc5NjA2IikKICAgICAgcmV0dXJuIHRydWUKICAgIGVsc2UKICAgICAgIyDYp9mE2KjZitin2YbYp9iqINiu2KfYt9im2KkKICAgICAgVUkubWVzc2FnZWJveCgi2KfZhNio2YrYp9mG2KfYqiDYutmE2Lcg2YrYpyDZh9mG2K/Ys9ipINiq2YjYp9i12YQg2YXYuSAwMTIwNDI3OTYwNiIpIGlmIGZvcmNlX3Byb21wdAogICAgICByZXR1cm4gZmFsc2UKICAgIGVuZAogIGVuZAoKICBkZWYgc2VsZi5hY3RpdmF0ZWQ/CiAgICBlbWFpbCA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImVtYWlsIikKICAgIGxpY2Vuc2UgPSBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJsaWNlbnNlIikKICAgICFlbWFpbC50b19zLmVtcHR5PyAmJiAhbGljZW5zZS50b19zLmVtcHR5PwogIGVuZAoKICBkZWYgc2VsZi5zaG93X2xpYnJhcnkKICAgICMgPT09PT09INiq2K3ZgtmCINmF2YYg2KfZhNio2YrYp9mG2KfYqiDYp9mE2YXYrtiy2YbYqSDYo9mI2YTYp9mLID09PT09PQogICAgZW1haWwgPSBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIpCiAgICBsaWNlbnNlID0gU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAibGljZW5zZSIpCiAgICAKICAgIGlmIGVtYWlsICYmIGxpY2Vuc2UKICAgICAgIyDYp9mE2KrYrdmC2YIg2YXZhiDYtdit2Kkg2KfZhNio2YrYp9mG2KfYqiDYp9mE2YXYrtiy2YbYqSDZhdi5INin2YTZhdmI2YLYuQogICAgICB1bmxlc3MgdmFsaWRhdGVfY3JlZGVudGlhbHMoZW1haWwsIGxpY2Vuc2UpCiAgICAgICAgVUkubWVzc2FnZWJveCgi2KfZhNio2YrYp9mG2KfYqiDYutmE2Lcg2YrYpyDZh9mG2K/Ys9ipINiq2YjYp9i12YQg2YXYuSAwMTIwNDI3OTYwNiIpCiAgICAgICAgYWN0aXZhdGUodHJ1ZSkKICAgICAgICByZXR1cm4KICAgICAgZW5kCiAgICBlbHNlCiAgICAgICMg2YTYpyDYqtmI2KzYryDYqNmK2KfZhtin2Kog2YXYrtiy2YbYqQogICAgICB1bmxlc3MgYWN0aXZhdGUoZmFsc2UpCiAgICAgICAgYWN0aXZhdGUodHJ1ZSkKICAgICAgICByZXR1cm4KICAgICAgZW5kCiAgICBlbmQKICAgICMgPT09PT09PT09PT09PT09PT09PT09PT09CgogICAgZGxnID0gVUk6Okh0bWxEaWFsb2cubmV3KHsKICAgICAgOmRpYWxvZ190aXRsZSA9PiAi2YXZg9iq2KjYqSDYp9mE2YXYt9in2KjYriIsCiAgICAgIDpwcmVmZXJlbmNlc19rZXkgPT4gIm1oZGVzaWduX2xpYnJhcnkiLAogICAgICA6c2Nyb2xsYWJsZSA9PiB0cnVlLAogICAgICA6cmVzaXphYmxlID0+IHRydWUsCiAgICAgIDp3aWR0aCA9PiA4MDAsCiAgICAgIDpoZWlnaHQgPT4gNjUwCiAgICB9KQoKICAgIGNhdGVnb3JpZXMgPSBDT01QT05FTlRTLm1hcCB7IHxjfCBjWzpjYXRlZ29yeV0gfS51bmlxCgogICAgaHRtbCA9IDw8LUhUTUwKICAgIDxodG1sPjxoZWFkPgogICAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9VGFqYXdhbDp3Z2h0QDQwMDs3MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgogICAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7Zm9udC1mYW1pbHk6J1RhamF3YWwnLHNhbnMtc2VyaWY7bWFyZ2luOjA7YmFja2dyb3VuZDojZjlmOWY5O3BhZGRpbmc6MCAyMHB4IDQwcHg7ZGlyZWN0aW9uOnJ0bDt9CiAgICAgICAgaGVhZGVyIHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmc6MjBweCAwO30KICAgICAgICBoZWFkZXIgaW1nIHtoZWlnaHQ6NTBweDtib3JkZXItcmFkaXVzOjUwJTt9CiAgICAgICAgaGVhZGVyIGgyIHttYXJnaW46MDtmb250LXNpemU6MjRweDtjb2xvcjojMmU3ZDMyO30KICAgICAgICAubWVudS10b2dnbGUge2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToyOHB4O3VzZXItc2VsZWN0Om5vbmU7fQogICAgICAgIC5maWx0ZXIge2Rpc3BsYXk6bm9uZTttYXJnaW4tYm90dG9tOjIwcHg7fQogICAgICAgIC5maWx0ZXIgc2VsZWN0IHtmb250LXNpemU6MTZweDtwYWRkaW5nOjZweCAxMHB4O2JvcmRlci1yYWRpdXM6NnB4O2JvcmRlcjoxcHggc29saWQgI2NjYzt9CiAgICAgICAgLmdyaWQge2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KGF1dG8tZmlsbCxtaW5tYXgoMjAwcHgsMWZyKSk7Z2FwOjIwcHg7fQogICAgICAgIC5jYXJkIHtiYWNrZ3JvdW5kOndoaXRlO2JvcmRlci1yYWRpdXM6MTJweDtwYWRkaW5nOjEycHg7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoMCwwLDAsMC4wOCk7dGV4dC1hbGlnbjpjZW50ZXI7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC4zcyBlYXNlLGJveC1zaGFkb3cgMC4zcyBlYXNlO30KICAgICAgICAuY2FyZDpob3ZlciB7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTVweCk7Ym94LXNoYWRvdzowIDhweCAyMHB4IHJnYmEoMCwwLDAsMC4xMik7fQogICAgICAgIGltZy5jb21wb25lbnQtaW1nIHt3aWR0aDoxMDAlO2hlaWdodDoyMDBweDtvYmplY3QtZml0OmNvdmVyO2JvcmRlci1yYWRpdXM6OHB4O30KICAgICAgICBoNCB7bWFyZ2luOjEwcHggMCA1cHg7Zm9udC1zaXplOjE3cHg7Y29sb3I6IzMzMzt9CiAgICAgICAgcCB7Zm9udC1zaXplOjEzcHg7Y29sb3I6IzY2NjttYXJnaW46MDt9CiAgICAgICAgYnV0dG9uIHttYXJnaW4tdG9wOjEwcHg7cGFkZGluZzo2cHggMTRweDtiYWNrZ3JvdW5kOiM0M2EwNDc7Y29sb3I6d2hpdGU7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo1cHg7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIDAuM3M7fQogICAgICAgIGJ1dHRvbjpob3ZlciB7YmFja2dyb3VuZDojMmU3ZDMyO30KICAgICAgICBmb290ZXIge21hcmdpbi10b3A6NDBweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MTJweDtjb2xvcjojOTk5O30KICAgICAgPC9zdHlsZT4KICAgIDwvaGVhZD4KICAgIDxib2R5IG9uY29udGV4dG1lbnU9InJldHVybiBmYWxzZSI+CiAgICAgIDxoZWFkZXI+CiAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vbWFobW91ZGRlc2lnbi5jb20vU0tFVENIVVAvY29tcG9uZW50cy9sb2dvLmpwZWciIGFsdD0iTG9nbyIgLz4KICAgICAgICA8aDI+2YXZg9iq2KjYqSDYqti12YXZitmFINin2YTZhdi32KfYqNiuPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJtZW51LXRvZ2dsZSIgb25jbGljaz0idG9nZ2xlTWVudSgpIj7imLA8L2Rpdj4KICAgICAgPC9oZWFkZXI+CgogICAgICA8ZGl2IGNsYXNzPSJmaWx0ZXIiIGlkPSJmaWx0ZXItYm94Ij4KICAgICAgICA8bGFiZWw+CiAgICAgICAgICDwn5S9INiq2LXZhtmK2YE6CiAgICAgICAgICA8c2VsZWN0IGlkPSJjYXRlZ29yeSIgb25jaGFuZ2U9ImZpbHRlckNvbXBvbmVudHMoKSI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImFsbCI+2KfZhNmD2YQ8L29wdGlvbj4KICAgICAgICAgICAgI3tjYXRlZ29yaWVzLm1hcCB7IHxjYXR8ICI8b3B0aW9uIHZhbHVlPScje2NhdH0nPiN7Y2F0fTwvb3B0aW9uPiIgfS5qb2lufQogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9sYWJlbD4KICAgICAgPC9kaXY+CgogICAgICA8ZGl2IGlkPSJjb21wb25lbnRzIiBjbGFzcz0iZ3JpZCI+PC9kaXY+CgogICAgICA8Zm9vdGVyPgogICAgICAgINiq2YUg2KrYtdmF2YrZhSDZh9iw2Ycg2KfZhNmF2YPYqtio2Kkg2KjZiNin2LPYt9ipIDxiPm1oZGVzaWduLWVnLmNvbTwvYj4g2YjYo9mKINiq2LXYsdmBINmB2YrZh9inINio2K/ZiNmGINil2LDZhiDZiti52KrYqNixINin2YbYqtmH2KfZg9mL2Kcg2YTYrdmC2YjZgiDYp9mE2YXZhNmD2YrYqSAo2LPYp9mD2YjZhiDYrti12YrZhdmDINin2YXYp9mFINin2YTZhNmHKS48YnI+CiAgICAgICAg8J+TniDZhNmE2KrZiNin2LXZhDogPGI+MDExMDAyMTEzNDA8L2I+PGJyPgogICAgICAgINiq2YUg2KjYsdmF2KzYqSDYp9mE2KXYttin2YHYqSDYqNmI2KfYs9i32Kkg2YXZh9mG2K/YsyDZhdix2YjYp9mGINi52KfYr9mEIC0gMDEyMDQyNzk2MDYKICAgICAgPC9mb290ZXI+CgogICAgICA8c2NyaXB0PgpmdW5jdGlvbiBsb2FkQ29tcG9uZW50KGNvbXApe3NrZXRjaHVwLmxvYWRDb21wb25lbnRCeURhdGEoSlNPTi5zdHJpbmdpZnkoY29tcCkpO30KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBlPT5lLnByZXZlbnREZWZhdWx0KCkpOwpjb25zdCBhbGxDb21wb25lbnRzPSN7Q09NUE9ORU5UUy50b19qc29ufTsKZnVuY3Rpb24gcmVuZGVyKGMpe2xldCBoPSIiO2MuZm9yRWFjaCh4PT57aCs9YDxkaXYgY2xhc3M9ImNhcmQiPjxpbWcgY2xhc3M9ImNvbXBvbmVudC1pbWciIHNyYz0iJHt4LmltYWdlfSIgLz48aDQ+JHt4Lm5hbWV9PC9oND48cD4ke3guZGVzY308L3A+PGJ1dHRvbiBvbmNsaWNrPSdsb2FkQ29tcG9uZW50KCR7SlNPTi5zdHJpbmdpZnkoeCl9KSc+2KXYr9ix2KfYrDwvYnV0dG9uPjwvZGl2PmB9KTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29tcG9uZW50cyIpLmlubmVySFRNTD1oO30KZnVuY3Rpb24gZmlsdGVyQ29tcG9uZW50cygpe2NvbnN0IGNhdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2F0ZWdvcnkiKS52YWx1ZTtpZihjYXQ9PT0iYWxsIilyZW5kZXIoYWxsQ29tcG9uZW50cyk7ZWxzZSByZW5kZXIoYWxsQ29tcG9uZW50cy5maWx0ZXIoYz0+Yy5jYXRlZ29yeT09PWNhdCkpO30KZnVuY3Rpb24gdG9nZ2xlTWVudSgpe2NvbnN0IGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpbHRlci1ib3giKTtiLnN0eWxlLmRpc3BsYXk9KGIuc3R5bGUuZGlzcGxheT09PSJibG9jayIpPyJub25lIjoiYmxvY2siO30Kd2luZG93Lm9ubG9hZD0oKT0+ZmlsdGVyQ29tcG9uZW50cygpOwogICAgICA8L3NjcmlwdD4KICAgIDwvYm9keT48L2h0bWw+CiAgICBIVE1MCgogICAgZGxnLnNldF9odG1sKGh0bWwpCgpkbGcuYWRkX2FjdGlvbl9jYWxsYmFjaygibG9hZENvbXBvbmVudEJ5RGF0YSIpIGRvIHxfLCBjb21wX2pzb258CiAgY29tcCA9IEpTT04ucGFyc2UoY29tcF9qc29uLCBzeW1ib2xpemVfbmFtZXM6IHRydWUpCiAgdXJsID0gVVJJLnBhcnNlKGNvbXBbOnVybF0pCiAgaGFzaF9uYW1lID0gRGlnZXN0OjpTSEEyNTYuaGV4ZGlnZXN0KHVybC50b19zKVswLi4xNl0gKyAiLnNrcCIKICBjYWNoZV9kaXIgPSBGaWxlLmpvaW4oRGlyLnRtcGRpciwgIm1oZGVzaWduX2NhY2hlXzEiKQogIEZpbGVVdGlscy5ta2Rpcl9wKGNhY2hlX2RpcikKICBsb2NhbF9wYXRoID0gRmlsZS5qb2luKGNhY2hlX2RpciwgaGFzaF9uYW1lKQoKICB1bmxlc3MgRmlsZS5leGlzdD8obG9jYWxfcGF0aCkKICAgIHByb2dyZXNzID0gVUk6Okh0bWxEaWFsb2cubmV3KHsKICAgICAgOmRpYWxvZ190aXRsZSA9PiAi2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYuLi4iLAogICAgICA6cHJlZmVyZW5jZXNfa2V5ID0+ICJtaGRlc2lnbl9wcm9ncmVzcyIsCiAgICAgIDpzY3JvbGxhYmxlID0+IGZhbHNlLAogICAgICA6cmVzaXphYmxlID0+IGZhbHNlLAogICAgICA6d2lkdGggPT4gMzAwLAogICAgICA6aGVpZ2h0ID0+IDE1MAogICAgfSkKCiAgICBwcm9ncmVzcy5zZXRfaHRtbCA8PC1IVE1MCiAgICAgIDxodG1sPjxoZWFkPgogICAgICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgICAgICA8c3R5bGU+CiAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdUYWphd2FsJywgc2Fucy1zZXJpZjsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDA7IHBhZGRpbmc6IDIwcHg7IGRpcmVjdGlvbjogcnRsOyB9CiAgICAgICAgICBoMyB7IG1hcmdpbjogMTBweCAwOyB9CiAgICAgICAgICAjcHJvZ3Jlc3MtYmFyIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMjBweDsgYmFja2dyb3VuZDogI2RkZDsgYm9yZGVyLXJhZGl1czogMTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgICAgI3Byb2dyZXNzLWZpbGwgeyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAwJTsgYmFja2dyb3VuZDogIzRjYWY1MDsgdHJhbnNpdGlvbjogd2lkdGggMC4ycyBlYXNlOyB9CiAgICAgICAgICAjcGVyY2VudCB7IG1hcmdpbi10b3A6IDhweDsgZm9udC1zaXplOiAxNHB4OyB9CiAgICAgICAgPC9zdHlsZT4KICAgICAgPC9oZWFkPjxib2R5PgogICAgICAgIDxoMz7YrNin2LHZiiDYqtit2YXZitmEINin2YTZhdmD2YjZhi4uLjwvaDM+CiAgICAgICAgPGRpdiBpZD0icHJvZ3Jlc3MtYmFyIj48ZGl2IGlkPSJwcm9ncmVzcy1maWxsIj48L2Rpdj48L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJwZXJjZW50Ij4wJTwvZGl2PgogICAgICA8L2JvZHk+PC9odG1sPgogICAgSFRNTAoKICAgIHByb2dyZXNzLnNob3cKCiAgICBVSS5zdGFydF90aW1lcigwLjMsIGZhbHNlKSBkbwogICAgICBiZWdpbgogICAgICAgIGNvbnRlbnRfbGVuZ3RoID0gbmlsCiAgICAgICAgdGVtcGZpbGUgPSBUZW1wZmlsZS5uZXcoIm1oY29tcG9uZW50IikKCiAgICAgICAgVVJJLm9wZW4odXJsLAogICAgICAgICAgY29udGVudF9sZW5ndGhfcHJvYzogLT4obGVuKSB7IGNvbnRlbnRfbGVuZ3RoID0gbGVuIH0sCiAgICAgICAgICBwcm9ncmVzc19wcm9jOiAtPihieXRlcykgewogICAgICAgICAgICBwZXJjZW50ID0gY29udGVudF9sZW5ndGggPyAoKGJ5dGVzLnRvX2YgLyBjb250ZW50X2xlbmd0aCkgKiAxMDApLnRvX2kgOiAwCiAgICAgICAgICAgIHByb2dyZXNzLmV4ZWN1dGVfc2NyaXB0KCJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MtZmlsbCcpLnN0eWxlLndpZHRoID0gJyN7cGVyY2VudH0lJyIpCiAgICAgICAgICAgIHByb2dyZXNzLmV4ZWN1dGVfc2NyaXB0KCJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyY2VudCcpLmlubmVyVGV4dCA9ICcje3BlcmNlbnR9JSciKQogICAgICAgICAgfQogICAgICAgICkgZG8gfHJlbW90ZV9maWxlfAogICAgICAgICAgSU8uY29weV9zdHJlYW0ocmVtb3RlX2ZpbGUsIHRlbXBmaWxlKQogICAgICAgIGVuZAoKICAgICAgICB0ZW1wZmlsZS5jbG9zZQogICAgICAgIEZpbGVVdGlscy5tdih0ZW1wZmlsZS5wYXRoLCBsb2NhbF9wYXRoKQogICAgICAgIHByb2dyZXNzLmNsb3NlIGlmIHByb2dyZXNzLnZpc2libGU/CgogICAgICAgIGlmIEZpbGUuZXhpc3Q/KGxvY2FsX3BhdGgpICYmIEZpbGUuc2l6ZShsb2NhbF9wYXRoKSA+IDAKICAgICAgICAgIGRlZmluaXRpb24gPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuZGVmaW5pdGlvbnMubG9hZChsb2NhbF9wYXRoLCBhbGxvd19uZXdlcjogdHJ1ZSkKICAgICAgICAgIGlmIGRlZmluaXRpb24KICAgICAgICAgICAgaW5zdGFuY2UgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwucGxhY2VfY29tcG9uZW50KGRlZmluaXRpb24pCiAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINil2K/Ysdin2Kwg2KfZhNmF2YPZiNmGINio2YbYrNin2K0iKSB1bmxlc3MgaW5zdGFuY2UKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pqg77iPINmE2YUg2YrYqtmFINiq2LnYsdmK2YEg2KfZhNmF2YPZiNmGIikKICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDZhNmFINmK2KrZhSDYrdmB2Lgg2KfZhNmF2YTZgSDYqNi02YPZhCDYtdit2YrYrSIpCiAgICAgICAgZW5kCgogICAgICByZXNjdWUgPT4gZQogICAgICAgIHRlbXBmaWxlLmNsb3NlIGlmIHRlbXBmaWxlCiAgICAgICAgdGVtcGZpbGUudW5saW5rIGlmIHRlbXBmaWxlCiAgICAgICAgcHJvZ3Jlc3MuY2xvc2UgaWYgcHJvZ3Jlc3MudmlzaWJsZT8KICAgICAgICBVSS5tZXNzYWdlYm94KCLinYwg2K7Yt9ijINmB2Yog2KfZhNiq2K3ZhdmK2YQg2KPZiCDYp9mE2KXYr9ix2KfYrDogI3tlLm1lc3NhZ2V9IikKICAgICAgZW5kCiAgICBlbmQKICBlbHNlCiAgICBiZWdpbgogICAgICBpZiBGaWxlLmV4aXN0Pyhsb2NhbF9wYXRoKSAmJiBGaWxlLnNpemUobG9jYWxfcGF0aCkgPiAwCiAgICAgICAgZGVmaW5pdGlvbiA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5kZWZpbml0aW9ucy5sb2FkKGxvY2FsX3BhdGgsIGFsbG93X25ld2VyOiB0cnVlKQogICAgICAgIGlmIGRlZmluaXRpb24KICAgICAgICAgIGluc3RhbmNlID0gU2tldGNodXAuYWN0aXZlX21vZGVsLnBsYWNlX2NvbXBvbmVudChkZWZpbml0aW9uKQogICAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KXYr9ix2KfYrCDYp9mE2YXZg9mI2YYg2KjZhtis2KfYrSIpIHVubGVzcyBpbnN0YW5jZQogICAgICAgIGVsc2UKICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDZhNmFINmK2KrZhSDYqti52LHZitmBINin2YTZhdmD2YjZhiIpCiAgICAgICAgZW5kCiAgICAgIGVsc2UKICAgICAgICBVSS5tZXNzYWdlYm94KCLimqDvuI8g2KfZhNmF2YTZgSDYp9mE2YXZiNis2YjYryDYqtin2YTZgSDYo9mIINmB2KfYsdi6IikKICAgICAgZW5kCiAgICByZXNjdWUgPT4gZQogICAgICBVSS5tZXNzYWdlYm94KCLinYwg2K7Yt9ijINij2KvZhtin2KEg2KfZhNil2K/Ysdin2Kw6ICN7ZS5tZXNzYWdlfSIpCiAgICBlbmQKICBlbmQKZW5kCgpkbGcuYWRkX2FjdGlvbl9jYWxsYmFjaygiY2xlYXJDb21wb25lbnRDYWNoZSIpIGRvIHxffAogIGJlZ2luCiAgICBjYWNoZV9kaXIgPSBGaWxlLmpvaW4oRGlyLnRtcGRpciwgIm1oZGVzaWduX2NhY2hlXzEiKQogICAgaWYgRmlsZS5kaXJlY3Rvcnk/KGNhY2hlX2RpcikKICAgICAgRmlsZVV0aWxzLnJtX3JmKGNhY2hlX2RpcikKICAgIGVuZAogICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KfZhNiq2K3Yr9mK2Ksg2KjZhtis2KfYrS4iKQogIHJlc2N1ZSA9PiBlCiAgICBVSS5tZXNzYWdlYm94KCLinYwg2YHYtNmEINit2LDZgSDYp9mE2YXZhNmB2KfYqiDYp9mE2YXYpNmC2KrYqTogI3tlLm1lc3NhZ2V9IikKICBlbmQKZW5kCmRsZy5zaG93CiAgZW5kCgogIHVubGVzcyBmaWxlX2xvYWRlZD8oX19GSUxFX18pCiAgICBVSS5tZW51KCJQbHVnaW5zIikuYWRkX2l0ZW0oIiN7UExVR0lOX05BTUV9IC0g2KrZgdi52YrZhCIpIHsgYWN0aXZhdGUodHJ1ZSkgfQogICAgVUkubWVudSgiUGx1Z2lucyIpLmFkZF9pdGVtKCIje1BMVUdJTl9OQU1FfSAtINix2YLZhSDYp9mE2KzZh9in2LIiKSB7IFVJLm1lc3NhZ2Vib3goIvCflJEg2LHZgtmFINin2YTYrNmH2KfYsjpcbiIgKyBnZXRfZGV2aWNlX2lkKSB9CiAgICBVSS5tZW51KCJQbHVnaW5zIikuYWRkX2l0ZW0oIk1IREVTSUdOIC0g2KrYrdiv2YrYqyDYp9mE2YXZg9iq2KjYqSIpIGRvCiAgICAgIGNhY2hlX2RpciA9IEZpbGUuam9pbihEaXIudG1wZGlyLCAibWhkZXNpZ25fY2FjaGVfMSIpCiAgICAgIGlmIEZpbGUuZGlyZWN0b3J5PyhjYWNoZV9kaXIpCiAgICAgICAgRmlsZVV0aWxzLnJtX3JmKGNhY2hlX2RpcikKICAgICAgZW5kCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINin2YTYqtit2K/ZitirINio2YbYrNin2K0uIikKICAgIGVuZAoKICAgIHRvb2xiYXIgPSBVSTo6VG9vbGJhci5uZXcoUExVR0lOX05BTUUpCiAgICBjbWQgPSBVSTo6Q29tbWFuZC5uZXcoItmF2YPYqtio2KkgI3tQTFVHSU5fTkFNRX0iKSB7IHNob3dfbGlicmFyeSB9CgogICAgaWNvbl9wYXRoID0gRmlsZS5qb2luKFBMVUdJTl9ESVIsICJpY29uLnBuZyIpIHJlc2N1ZSBuaWwKICAgIGlmIEZpbGUuZXhpc3Q/KGljb25fcGF0aCkKICAgICAgY21kLnNtYWxsX2ljb24gPSBpY29uX3BhdGgKICAgICAgY21kLmxhcmdlX2ljb24gPSBpY29uX3BhdGgKICAgIGVuZAogICAgY21kLnRvb2x0aXAgPSAi2KrYtNi62YrZhCDZhdmD2KrYqNipIE1IREVTSUdOIgogICAgdG9vbGJhci5hZGRfaXRlbShjbWQpCgogICAgY21kX3VuaXF1ZSA9IFVJOjpDb21tYW5kLm5ldygi2KzYudmEINmD2YQg2KfZhNmF2YPZiNmG2KfYqiDZgdix2YrYr9ipIikgewogICAgICBtb2R1bGUgTUhERVNJR05fVU5JUVVJRlkKICAgICAgICBkZWYgc2VsZi5tYWtlX2FsbF9jb21wb25lbnRzX3VuaXF1ZShlbnRpdGllcykKICAgICAgICAgIGVudGl0aWVzLmdyZXAoU2tldGNodXA6OkNvbXBvbmVudEluc3RhbmNlKS5lYWNoIGRvIHxpbnN0YW5jZXwKICAgICAgICAgICAgaW5zdGFuY2UubWFrZV91bmlxdWUKICAgICAgICAgICAgbWFrZV9hbGxfY29tcG9uZW50c191bmlxdWUoaW5zdGFuY2UuZGVmaW5pdGlvbi5lbnRpdGllcykKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGRlZiBzZWxmLm1ha2VfZGVmaW5pdGlvbnNfdW5pcXVlCiAgICAgICAgICBtb2RlbCA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbAogICAgICAgICAgbW9kZWwuZGVmaW5pdGlvbnMuZWFjaCBkbyB8ZGVmaW5pdGlvbnwKICAgICAgICAgICAgbmV4dCBpZiBkZWZpbml0aW9uLmdyb3VwPyB8fCBkZWZpbml0aW9uLmltYWdlPwogICAgICAgICAgICBkZWZpbml0aW9uLmluc3RhbmNlcy5lYWNoIGRvIHxpbnN0YW5jZXwKICAgICAgICAgICAgICBpbnN0YW5jZS5tYWtlX3VuaXF1ZQogICAgICAgICAgICAgIG1ha2VfYWxsX2NvbXBvbmVudHNfdW5pcXVlKGluc3RhbmNlLmRlZmluaXRpb24uZW50aXRpZXMpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZGVmIHNlbGYucnVuX3VuaXF1aWZ5CiAgICAgICAgICBtb2RlbCA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbAogICAgICAgICAgbW9kZWwuc3RhcnRfb3BlcmF0aW9uKCLYrNi52YQg2YPZhCDYp9mE2YXZg9mI2YbYp9iqINmB2LHZitiv2KkiLCB0cnVlKQogICAgICAgICAgbWFrZV9hbGxfY29tcG9uZW50c191bmlxdWUobW9kZWwuZW50aXRpZXMpCiAgICAgICAgICBtYWtlX2RlZmluaXRpb25zX3VuaXF1ZQogICAgICAgICAgbW9kZWwuY29tbWl0X29wZXJhdGlvbgogICAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KzYudmEINmD2YQg2KfZhNmD2YXYqNmI2YbZhtiq2KfYqiDZgdix2YrYr9ipLiIpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBNSERFU0lHTl9VTklRVUlGWS5ydW5fdW5pcXVpZnkKICAgIH0KICAgIHVuaXF1ZV9pY29uX3BhdGggPSBGaWxlLmpvaW4oUExVR0lOX0RJUiwgInVuaXF1ZV9pY29uLnBuZyIpIHJlc2N1ZSBuaWwKICAgIGlmIEZpbGUuZXhpc3Q/KHVuaXF1ZV9pY29uX3BhdGgpCiAgICAgIGNtZF91bmlxdWUuc21hbGxfaWNvbiA9IHVuaXF1ZV9pY29uX3BhdGgKICAgICAgY21kX3VuaXF1ZS5sYXJnZV9pY29uID0gdW5pcXVlX2ljb25fcGF0aAogICAgZW5kCiAgICBjbWRfdW5pcXVlLnRvb2x0aXAgPSAi2KfYrNi52YQg2KfZhNmF2YPZiNmG2KfYqiDYp9mE2YHYsdi52YrYqSDZgdix2YrYr9ipIgogICAgdG9vbGJhci5hZGRfaXRlbShjbWRfdW5pcXVlKQoKICAgIHRvb2xiYXIucmVzdG9yZQogICAgZmlsZV9sb2FkZWQoX19GSUxFX18pCiAgZW5kCmVuZA=="
}
