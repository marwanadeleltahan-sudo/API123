{
  "main_code": "cmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ29wZW4tdXJpJwpyZXF1aXJlICd0bXBkaXInCnJlcXVpcmUgJ2Jhc2U2NCcKcmVxdWlyZSAndGVtcGZpbGUnCnJlcXVpcmUgJ2RpZ2VzdCcKcmVxdWlyZSAnZmlsZXV0aWxzJwoKbW9kdWxlIE1IREVTSUdOCiAgUExVR0lOX05BTUUgPSAiTUhERVNJR04iCiAgQVBJX1VSTCA9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbWFyd2FuYWRlbGVsdGFoYW4tc3Vkby9BUEkxMjMvcmVmcy9oZWFkcy9tYWluL2VtYWlsLmpzb24iCgogIENPTVBPTkVOVFMgPSBiZWdpbgogICAgdXJsID0gImh0dHBzOi8vbWFobW91ZGRlc2lnbi5jb20vU0tFVENIVVAvY29tcG9uZW50cy1WNC5qc29uIgogICAganNvbl9yYXcgPSBVUkkub3Blbih1cmwpLnJlYWQKICAgIGpzb25fZGF0YSA9IEpTT04ucGFyc2UoanNvbl9yYXcpCiAgICBkZWNvZGVkX2pzb24gPSBCYXNlNjQuZGVjb2RlNjQoanNvbl9kYXRhWyJkYXRhIl0pCiAgICBKU09OLnBhcnNlKGRlY29kZWRfanNvbiwgc3ltYm9saXplX25hbWVzOiB0cnVlKQogIHJlc2N1ZSA9PiBlCiAgICBVSS5tZXNzYWdlYm94KCLinYwg2K3Yr9irINiu2LfYoyDZgdmKINiq2K3ZhdmK2YQg2KfZhNmF2YPYqtio2Kk6ICN7ZS5tZXNzYWdlfSIpCiAgICBbXQogIGVuZAoKICAjID09PSDZhti42KfZhSDYp9mE2KrZgdi52YrZhCDYp9mE2YXYrdiv2KsgPT09CiAgZGVmIHNlbGYuYWN0aXZhdGUoZm9yY2VfcHJvbXB0ID0gdHJ1ZSkKICAgICMg2YHZiiDZg9mEINmF2LHYqSDZhti32YTYqCDYp9mE2KjZitin2YbYp9iqINmF2YYg2KfZhNmF2LPYqtiu2K/ZhQogICAgZW1haWwgPSAiIgogICAgcGFzc3dvcmQgPSAiIgogICAgCiAgICAjINi32YTYqCDYp9mE2KjZitin2YbYp9iqINmF2YYg2KfZhNmF2LPYqtiu2K/ZhQogICAgaW5wdXQgPSBVSS5pbnB1dGJveChbItin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZiiIsICLZg9mE2YXYqSDYp9mE2YXYsdmI2LEiXSwgW2VtYWlsLCBwYXNzd29yZF0sICLYqtmB2LnZitmEIE1IREVTSUdOIikKICAgIHJldHVybiBmYWxzZSB1bmxlc3MgaW5wdXQKICAgIGVtYWlsLCBwYXNzd29yZCA9IGlucHV0CgogICAgIyDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2KjZitin2YbYp9iqINi52KjYsSBBUEkg2YHZiiDZg9mEINmF2LHYqQogICAgdmFsaWQgPSBjaGVja19jcmVkZW50aWFscyhlbWFpbCwgcGFzc3dvcmQpCiAgICAKICAgIGlmIHZhbGlkCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDZhdio2LHZiNmDINmK2Kcg2YfZhtiv2LPYqSDYp9mE2KXYttin2YHYqSDYtNi62KfZhNipXG7YqtmFINio2LHZhdis2Kkg2KfZhNil2LbYp9mB2Kkg2KjZiNin2LPYt9ipINmF2YfZhtiv2LMg2YXYsdmI2KfZhiDYudin2K/ZhCIpCiAgICAgIHJldHVybiB0cnVlCiAgICBlbHNlCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYp9mE2KjZitin2YbYp9iqINi62YTYtyDYrdin2YjZhCDZhdix2Kkg2KrYp9mG2YrYqSDZitinINmH2YbYr9iz2Kkg2KfZiCDZg9mE2YUgMDEyMDQyNzk2MDYiKQogICAgICByZXR1cm4gZmFsc2UKICAgIGVuZAogIHJlc2N1ZSA9PiBlCiAgICBVSS5tZXNzYWdlYm94KCLimqDvuI8g2K3Yr9irINiu2LfYoyDZgdmKINin2YTYqtit2YLZgjogI3tlLm1lc3NhZ2V9IikKICAgIHJldHVybiBmYWxzZQogIGVuZAoKICBkZWYgc2VsZi5jaGVja19jcmVkZW50aWFscyhlbWFpbCwgcGFzc3dvcmQpCiAgICBiZWdpbgogICAgICAjINiq2YbYuNmK2YEg2KfZhNio2YrYp9mG2KfYqiDZhdmGINin2YTZhdiz2KfZgdin2KoKICAgICAgZW1haWwgPSBlbWFpbC50b19zLnN0cmlwCiAgICAgIHBhc3N3b3JkID0gcGFzc3dvcmQudG9fcy5zdHJpcAogICAgICAKICAgICAgIyDYp9mE2KrYrdmC2YIg2YXZhiDYo9mGINin2YTYrdmC2YjZhCDYutmK2LEg2YHYp9ix2LrYqQogICAgICBpZiBlbWFpbC5lbXB0eT8gfHwgcGFzc3dvcmQuZW1wdHk/CiAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINmK2KzYqCDZhdmE2KEg2KzZhdmK2Lkg2KfZhNit2YLZiNmEIikKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgZW5kCiAgICAgIAogICAgICB1cmkgPSBVUkkoQVBJX1VSTCkKICAgICAgaHR0cCA9IE5ldDo6SFRUUC5uZXcodXJpLmhvc3QsIHVyaS5wb3J0KQogICAgICBodHRwLnVzZV9zc2wgPSB0cnVlIGlmIHVyaS5zY2hlbWUgPT0gJ2h0dHBzJwogICAgICBodHRwLm9wZW5fdGltZW91dCA9IDEwCiAgICAgIGh0dHAucmVhZF90aW1lb3V0ID0gMTAKICAgICAgCiAgICAgIHJlcXVlc3QgPSBOZXQ6OkhUVFA6OkdldC5uZXcodXJpKQogICAgICByZXNwb25zZSA9IGh0dHAucmVxdWVzdChyZXF1ZXN0KQogICAgICAKICAgICAgaWYgcmVzcG9uc2UuaXNfYT8oTmV0OjpIVFRQU3VjY2VzcykKICAgICAgICB2YWxpZF91c2VycyA9IEpTT04ucGFyc2UocmVzcG9uc2UuYm9keSkKICAgICAgICAKICAgICAgICAjINin2YTYqNit2Ksg2LnZhiDYp9mE2YXYs9iq2K7Yr9mFINin2YTZhdi32KfYqNmCIC0g2YbYs9iq2K7Yr9mFIHBhc3N3b3JkINio2K/ZhNin2Ysg2YXZhiBsaWNlbnNlCiAgICAgICAgdmFsaWQgPSB2YWxpZF91c2Vycy5hbnk/IGRvIHx1c2VyfAogICAgICAgICAgdXNlcl9lbWFpbCA9ICh1c2VyWyJlbWFpbCJdIHx8IHVzZXJbOmVtYWlsXSB8fCAiIikudG9fcy5zdHJpcC5kb3duY2FzZQogICAgICAgICAgdXNlcl9wYXNzd29yZCA9ICh1c2VyWyJwYXNzd29yZCJdIHx8IHVzZXJbOnBhc3N3b3JkXSB8fCAiIikudG9fcy5zdHJpcAogICAgICAgICAgCiAgICAgICAgICB1c2VyX2VtYWlsID09IGVtYWlsLmRvd25jYXNlICYmIHVzZXJfcGFzc3dvcmQgPT0gcGFzc3dvcmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICByZXR1cm4gdmFsaWQKICAgICAgICAKICAgICAgZWxzZQogICAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYqti52LDYsSDYp9mE2KfYqti12KfZhCDYqNiu2KfYr9mFINin2YTYqtit2YLZgiAtINin2YTYsdmF2LI6ICN7cmVzcG9uc2UuY29kZX0iKQogICAgICAgIHJldHVybiBmYWxzZQogICAgICBlbmQKICAgICAgCiAgICByZXNjdWUgTmV0OjpPcGVuVGltZW91dCwgTmV0OjpSZWFkVGltZW91dAogICAgICBVSS5tZXNzYWdlYm94KCLinYwg2KfZhtiq2YfYqiDZhdmH2YTYqSDYp9mE2KfYqti12KfZhCDYqNin2YTYrtin2K/ZhSIpCiAgICAgIHJldHVybiBmYWxzZQogICAgcmVzY3VlIEpTT046OlBhcnNlckVycm9yCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYqtmG2LPZitmCINin2YTYqNmK2KfZhtin2Kog2YXZhiDYp9mE2K7Yp9iv2YUg2LrZitixINi12K3ZititIikKICAgICAgcmV0dXJuIGZhbHNlCiAgICByZXNjdWUgPT4gZQogICAgICBVSS5tZXNzYWdlYm94KCLinYwg2K7Yt9ijINmB2Yog2KfZhNin2KrYtdin2YQg2KjYp9mE2K7Yp9iv2YU6ICN7ZS5tZXNzYWdlfSIpCiAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCiAgZW5kCiAgIyA9PT09PT09PT09PT09PT09PT09PT09CgogIGRlZiBzZWxmLnNob3dfbGlicmFyeQogICAgIyA9PT0g2KrYrdmC2YIg2YXZhiDYp9mE2KrZgdi52YrZhCDYo9mI2YTYp9mLINmB2Yog2YPZhCDZhdix2KkgPT09CiAgICB1bmxlc3MgYWN0aXZhdGUodHJ1ZSkKICAgICAgcmV0dXJuCiAgICBlbmQKICAgICMgPT09PT09PT09PT09PT09PT09PT09PQoKICAgIGRsZyA9IFVJOjpIdG1sRGlhbG9nLm5ldyh7CiAgICAgIDpkaWFsb2dfdGl0bGUgPT4gItmF2YPYqtio2Kkg2YXZg9mI2YbYp9iqIE1IREVTSUdOIiwKICAgICAgOnByZWZlcmVuY2VzX2tleSA9PiAibWhkZXNpZ25fbGlicmFyeSIsCiAgICAgIDpzY3JvbGxhYmxlID0+IHRydWUsCiAgICAgIDpyZXNpemFibGUgPT4gdHJ1ZSwKICAgICAgOndpZHRoID0+IDgwMCwKICAgICAgOmhlaWdodCA9PiA2NTAKICAgIH0pCgogICAgY2F0ZWdvcmllcyA9IENPTVBPTkVOVFMubWFwIHsgfGN8IGNbOmNhdGVnb3J5XSB9LnVuaXEKCiAgICBodG1sID0gPDwtSFRNTAogICAgPGh0bWw+PGhlYWQ+CiAgICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1UYWphd2FsOndnaHRANDAwOzcwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CiAgICAgIDxzdHlsZT4KICAgICAgICBib2R5IHtmb250LWZhbWlseTonVGFqYXdhbCcsc2Fucy1zZXJpZjttYXJnaW46MDtiYWNrZ3JvdW5kOiNmOWY5Zjk7cGFkZGluZzowIDIwcHggNDBweDtkaXJlY3Rpb246cnRsO30KICAgICAgICBoZWFkZXIge2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzoyMHB4IDA7fQogICAgICAgIGhlYWRlciBpbWcge2hlaWdodDo1MHB4O2JvcmRlci1yYWRpdXM6NTAlO30KICAgICAgICBoZWFkZXIgaDIge21hcmdpbjowO2ZvbnQtc2l6ZToyNHB4O2NvbG9yOiMyZTdkMzI7fQogICAgICAgIC5tZW51LXRvZ2dsZSB7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjI4cHg7dXNlci1zZWxlY3Q6bm9uZTt9CiAgICAgICAgLmZpbHRlciB7ZGlzcGxheTpub25lO21hcmdpbi1ib3R0b206MjBweDt9CiAgICAgICAgLmZpbHRlciBzZWxlY3Qge2ZvbnQtc2l6ZToxNnB4O3BhZGRpbmc6NnB4IDEwcHg7Ym9yZGVyLXJhZGl1czo2cHg7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO30KICAgICAgICAuZ3JpZCB7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoYXV0by1maWxsLG1pbm1heCgyMDBweCwxZnIpKTtnYXA6MjBweDt9CiAgICAgICAgLmNhcmQge2JhY2tncm91bmQ6d2hpdGU7Ym9yZGVyLXJhZGl1czoxMnB4O3BhZGRpbmc6MTJweDtib3gtc2hhZG93OjAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjA4KTt0ZXh0LWFsaWduOmNlbnRlcjt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjNzIGVhc2UsYm94LXNoYWRvdyAwLjNzIGVhc2U7fQogICAgICAgIC5jYXJkOmhvdmVyIHt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNXB4KTtib3gtc2hhZG93OjAgOHB4IDIwcHggcmdiYSgwLDAsMCwwLjEyKTt9CiAgICAgICAgaW1nLmNvbXBvbmVudC1pbWcge3dpZHRoOjEwMCU7aGVpZ2h0OjIwMHB4O29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo4cHg7fQogICAgICAgIGg0IHttYXJnaW46MTBweCAwIDVweDtmb250LXNpemU6MTdweDtjb2xvcjojMzMzO30KICAgICAgICBwIHtmb250LXNpemU6MTNweDtjb2xvcjojNjY2O21hcmdpbjowO30KICAgICAgICBidXR0b24ge21hcmdpbi10b3A6MTBweDtwYWRkaW5nOjZweCAxNHB4O2JhY2tncm91bmQ6IzQzYTA0Nztjb2xvcjp3aGl0ZTtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjVweDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmJhY2tncm91bmQgMC4zczt9CiAgICAgICAgYnV0dG9uOmhvdmVyIHtiYWNrZ3JvdW5kOiMyZTdkMzI7fQogICAgICAgIGZvb3RlciB7bWFyZ2luLXRvcDo0MHB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiM5OTk7fQogICAgICA8L3N0eWxlPgogICAgPC9oZWFkPgogICAgPGJvZHkgb25jb250ZXh0bWVudT0icmV0dXJuIGZhbHNlIj4KICAgICAgPGhlYWRlcj4KICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9tYWhtb3VkZGVzaWduLmNvbS9TS0VUQ0hVUC9jb21wb25lbnRzL2xvZ28uanBlZyIgYWx0PSJMb2dvIiAvPgogICAgICAgIDxoMj7ZhdmD2KrYqNipINmF2YPZiNmG2KfYqiBNSERFU0lHTjwvaDI+CiAgICAgICAgPGRpdiBjbGFzcz0ibWVudS10b2dnbGUiIG9uY2xpY2s9InRvZ2dsZU1lbnUoKSI+4piwPC9kaXY+CiAgICAgIDwvaGVhZGVyPgoKICAgICAgPGRpdiBjbGFzcz0iZmlsdGVyIiBpZD0iZmlsdGVyLWJveCI+CiAgICAgICAgPGxhYmVsPgogICAgICAgICAg8J+UjSDYqti12YHZitipINit2LPYqDoKICAgICAgICAgIDxzZWxlY3QgaWQ9ImNhdGVnb3J5IiBvbmNoYW5nZT0iZmlsdGVyQ29tcG9uZW50cygpIj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYWxsIj7Yp9mE2YPZhDwvb3B0aW9uPgogICAgICAgICAgICAje2NhdGVnb3JpZXMubWFwIHsgfGNhdHwgIjxvcHRpb24gdmFsdWU9JyN7Y2F0fSc+I3tjYXR9PC9vcHRpb24+IiB9LmpvaW59CiAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICA8L2xhYmVsPgogICAgICA8L2Rpdj4KCiAgICAgIDxkaXYgaWQ9ImNvbXBvbmVudHMiIGNsYXNzPSJncmlkIj48L2Rpdj4KCiAgICAgIDxmb290ZXI+CiAgICAgICAg2KrZhSDYqti32YjZitixINin2YTYpdi22KfZgdipINio2YjYp9iz2LfYqSA8Yj7ZhdmH2YbYr9izINmF2LHZiNin2YYg2LnYp9iv2YQ8L2I+PGJyPgogICAgICAgINmE2YTYr9i52YUg2KfZhNmB2YbZijogPGI+MDEyMDQyNzk2MDY8L2I+CiAgICAgIDwvZm9vdGVyPgoKICAgICAgPHNjcmlwdD4KZnVuY3Rpb24gbG9hZENvbXBvbmVudChjb21wKXtza2V0Y2h1cC5sb2FkQ29tcG9uZW50QnlEYXRhKEpTT04uc3RyaW5naWZ5KGNvbXApKTt9CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZT0+ZS5wcmV2ZW50RGVmYXVsdCgpKTsKY29uc3QgYWxsQ29tcG9uZW50cz0je0NPTVBPTkVOVFMudG9fanNvbn07CmZ1bmN0aW9uIHJlbmRlcihjKXtsZXQgaD0iIjtjLmZvckVhY2goeD0+e2grPWA8ZGl2IGNsYXNzPSJjYXJkIj48aW1nIGNsYXNzPSJjb21wb25lbnQtaW1nIiBzcmM9IiR7eC5pbWFnZX0iIC8+PGg0PiR7eC5uYW1lfTwvaDQ+PHA+JHt4LmRlc2N9PC9wPjxidXR0b24gb25jbGljaz0nbG9hZENvbXBvbmVudCgke0pTT04uc3RyaW5naWZ5KHgpfSknPtiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGPC9idXR0b24+PC9kaXY+YH0pO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb21wb25lbnRzIikuaW5uZXJIVE1MPWg7fQpmdW5jdGlvbiBmaWx0ZXJDb21wb25lbnRzKCl7Y29uc3QgY2F0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYXRlZ29yeSIpLnZhbHVlO2lmKGNhdD09PSJhbGwiKXJlbmRlcihhbGxDb21wb25lbnRzKTtlbHNlIHJlbmRlcihhbGxDb21wb25lbnRzLmZpbHRlcihjPT5jLmNhdGVnb3J5PT09Y2F0KSk7fQpmdW5jdGlvbiB0b2dnbGVNZW51KCl7Y29uc3QgYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmlsdGVyLWJveCIpO2Iuc3R5bGUuZGlzcGxheT0oYi5zdHlsZS5kaXNwbGF5PT09ImJsb2NrIik/Im5vbmUiOiJibG9jayI7fQp3aW5kb3cub25sb2FkPSgpPT5maWx0ZXJDb21wb25lbnRzKCk7CiAgICAgIDwvc2NyaXB0PgogICAgPC9ib2R5PjwvaHRtbD4KICAgIEhUTUwKCiAgICBkbGcuc2V0X2h0bWwoaHRtbCkKCiAgICBkbGcuYWRkX2FjdGlvbl9jYWxsYmFjaygibG9hZENvbXBvbmVudEJ5RGF0YSIpIGRvIHxfLCBjb21wX2pzb258CiAgICAgICMg2KfZhNiq2K3ZgtmCINmF2YYg2KfZhNiq2YHYudmK2YQg2YXYsdipINij2K7YsdmJINmC2KjZhCDYqtit2YXZitmEINij2Yog2YXZg9mI2YYKICAgICAgdW5sZXNzIGFjdGl2YXRlKHRydWUpCiAgICAgICAgbmV4dAogICAgICBlbmQKICAgICAgCiAgICAgIGNvbXAgPSBKU09OLnBhcnNlKGNvbXBfanNvbiwgc3ltYm9saXplX25hbWVzOiB0cnVlKQogICAgICB1cmwgPSBVUkkucGFyc2UoY29tcFs6dXJsXSkKICAgICAgaGFzaF9uYW1lID0gRGlnZXN0OjpTSEEyNTYuaGV4ZGlnZXN0KHVybC50b19zKVswLi4xNl0gKyAiLnNrcCIKICAgICAgY2FjaGVfZGlyID0gRmlsZS5qb2luKERpci50bXBkaXIsICJtaGRlc2lnbl9jYWNoZV8xIikKICAgICAgRmlsZVV0aWxzLm1rZGlyX3AoY2FjaGVfZGlyKQogICAgICBsb2NhbF9wYXRoID0gRmlsZS5qb2luKGNhY2hlX2RpciwgaGFzaF9uYW1lKQoKICAgICAgdW5sZXNzIEZpbGUuZXhpc3Q/KGxvY2FsX3BhdGgpCiAgICAgICAgcHJvZ3Jlc3MgPSBVSTo6SHRtbERpYWxvZy5uZXcoewogICAgICAgICAgOmRpYWxvZ190aXRsZSA9PiAi2KzYp9ix2Yog2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYuLi4iLAogICAgICAgICAgOnByZWZlcmVuY2VzX2tleSA9PiAibWhkZXNpZ25fcHJvZ3Jlc3MiLAogICAgICAgICAgOnNjcm9sbGFibGUgPT4gZmFsc2UsCiAgICAgICAgICA6cmVzaXphYmxlID0+IGZhbHNlLAogICAgICAgICAgOndpZHRoID0+IDMwMCwKICAgICAgICAgIDpoZWlnaHQgPT4gMTUwCiAgICAgICAgfSkKCiAgICAgICAgcHJvZ3Jlc3Muc2V0X2h0bWwgPDwtSFRNTAogICAgICAgIDxodG1sPjxoZWFkPgogICAgICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdUYWphd2FsJywgc2Fucy1zZXJpZjsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDA7IHBhZGRpbmc6IDIwcHg7IGRpcmVjdGlvbjogcnRsOyB9CiAgICAgICAgICAgIGgzIHsgbWFyZ2luOiAxMHB4IDA7IH0KICAgICAgICAgICAgI3Byb2dyZXNzLWJhciB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDIwcHg7IGJhY2tncm91bmQ6ICNkZGQ7IGJvcmRlci1yYWRpdXM6IDEwcHg7IG92ZXJmbG93OiBoaWRkZW47IG1hcmdpbi10b3A6IDEwcHg7IH0KICAgICAgICAgICAgI3Byb2dyZXNzLWZpbGwgeyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAwJTsgYmFja2dyb3VuZDogIzRjYWY1MDsgdHJhbnNpdGlvbjogd2lkdGggMC4ycyBlYXNlOyB9CiAgICAgICAgICAgICNwZXJjZW50IHsgbWFyZ2luLXRvcDogOHB4OyBmb250LXNpemU6IDE0cHg7IH0KICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgPC9oZWFkPjxib2R5PgogICAgICAgICAgPGgzPtis2KfYsdmKINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGLi4uPC9oMz4KICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzLWJhciI+PGRpdiBpZD0icHJvZ3Jlc3MtZmlsbCI+PC9kaXY+PC9kaXY+CiAgICAgICAgICA8ZGl2IGlkPSJwZXJjZW50Ij4wJTwvZGl2PgogICAgICAgIDwvYm9keT48L2h0bWw+CiAgICAgICAgSFRNTAoKICAgICAgICBwcm9ncmVzcy5zaG93CgogICAgICAgIFVJLnN0YXJ0X3RpbWVyKDAuMywgZmFsc2UpIGRvCiAgICAgICAgICBiZWdpbgogICAgICAgICAgICBjb250ZW50X2xlbmd0aCA9IG5pbAogICAgICAgICAgICB0ZW1wZmlsZSA9IFRlbXBmaWxlLm5ldygibWhjb21wb25lbnQiKQoKICAgICAgICAgICAgVVJJLm9wZW4odXJsLAogICAgICAgICAgICAgIGNvbnRlbnRfbGVuZ3RoX3Byb2M6IC0+KGxlbikgeyBjb250ZW50X2xlbmd0aCA9IGxlbiB9LAogICAgICAgICAgICAgIHByb2dyZXNzX3Byb2M6IC0+KGJ5dGVzKSB7CiAgICAgICAgICAgICAgICBwZXJjZW50ID0gY29udGVudF9sZW5ndGggPyAoKGJ5dGVzLnRvX2YgLyBjb250ZW50X2xlbmd0aCkgKiAxMDApLnRvX2kgOiAwCiAgICAgICAgICAgICAgICBwcm9ncmVzcy5leGVjdXRlX3NjcmlwdCgiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzLWZpbGwnKS5zdHlsZS53aWR0aCA9ICcje3BlcmNlbnR9JSciKQogICAgICAgICAgICAgICAgcHJvZ3Jlc3MuZXhlY3V0ZV9zY3JpcHQoImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJjZW50JykuaW5uZXJUZXh0ID0gJyN7cGVyY2VudH0lJyIpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICApIGRvIHxyZW1vdGVfZmlsZXwKICAgICAgICAgICAgICBJTy5jb3B5X3N0cmVhbShyZW1vdGVfZmlsZSwgdGVtcGZpbGUpCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgdGVtcGZpbGUuY2xvc2UKICAgICAgICAgICAgRmlsZVV0aWxzLm12KHRlbXBmaWxlLnBhdGgsIGxvY2FsX3BhdGgpCiAgICAgICAgICAgIHByb2dyZXNzLmNsb3NlIGlmIHByb2dyZXNzLnZpc2libGU/CgogICAgICAgICAgICBpZiBGaWxlLmV4aXN0Pyhsb2NhbF9wYXRoKSAmJiBGaWxlLnNpemUobG9jYWxfcGF0aCkgPiAwCiAgICAgICAgICAgICAgZGVmaW5pdGlvbiA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5kZWZpbml0aW9ucy5sb2FkKGxvY2FsX3BhdGgsIGFsbG93X25ld2VyOiB0cnVlKQogICAgICAgICAgICAgIGlmIGRlZmluaXRpb24KICAgICAgICAgICAgICAgIGluc3RhbmNlID0gU2tldGNodXAuYWN0aXZlX21vZGVsLnBsYWNlX2NvbXBvbmVudChkZWZpbml0aW9uKQogICAgICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYg2KjZhtis2KfYrSIpIHVubGVzcyBpbnN0YW5jZQogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDYqti52LDYsSDYqtit2YXZitmEINin2YTZhdmD2YjZhiIpCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLinYwg2KrYudiw2LEg2KrYrdmF2YrZhCDYp9mE2YXZhNmBIikKICAgICAgICAgICAgZW5kCgogICAgICAgICAgcmVzY3VlID0+IGUKICAgICAgICAgICAgdGVtcGZpbGUuY2xvc2UgaWYgdGVtcGZpbGUKICAgICAgICAgICAgdGVtcGZpbGUudW5saW5rIGlmIHRlbXBmaWxlCiAgICAgICAgICAgIHByb2dyZXNzLmNsb3NlIGlmIHByb2dyZXNzLnZpc2libGU/CiAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYrdiv2Ksg2K7Yt9ijINmB2Yog2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YY6ICN7ZS5tZXNzYWdlfSIpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZWxzZQogICAgICAgIGJlZ2luCiAgICAgICAgICBpZiBGaWxlLmV4aXN0Pyhsb2NhbF9wYXRoKSAmJiBGaWxlLnNpemUobG9jYWxfcGF0aCkgPiAwCiAgICAgICAgICAgIGRlZmluaXRpb24gPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuZGVmaW5pdGlvbnMubG9hZChsb2NhbF9wYXRoLCBhbGxvd19uZXdlcjogdHJ1ZSkKICAgICAgICAgICAgaWYgZGVmaW5pdGlvbgogICAgICAgICAgICAgIGluc3RhbmNlID0gU2tldGNodXAuYWN0aXZlX21vZGVsLnBsYWNlX2NvbXBvbmVudChkZWZpbml0aW9uKQogICAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGINio2YbYrNin2K0iKSB1bmxlc3MgaW5zdGFuY2UKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDYqti52LDYsSDYqtit2YXZitmEINin2YTZhdmD2YjZhiIpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZWxzZQogICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLinYwg2KfZhNmF2YTZgSDYp9mE2YXYrdmE2Yog2KrYp9mE2YEiKQogICAgICAgICAgZW5kCiAgICAgICAgcmVzY3VlID0+IGUKICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYrdiv2Ksg2K7Yt9ijINmB2Yog2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YY6ICN7ZS5tZXNzYWdlfSIpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCgogICAgZGxnLmFkZF9hY3Rpb25fY2FsbGJhY2soImNsZWFyQ29tcG9uZW50Q2FjaGUiKSBkbyB8X3wKICAgICAgYmVnaW4KICAgICAgICBjYWNoZV9kaXIgPSBGaWxlLmpvaW4oRGlyLnRtcGRpciwgIm1oZGVzaWduX2NhY2hlXzEiKQogICAgICAgIGlmIEZpbGUuZGlyZWN0b3J5PyhjYWNoZV9kaXIpCiAgICAgICAgICBGaWxlVXRpbHMucm1fcmYoY2FjaGVfZGlyKQogICAgICAgIGVuZAogICAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINmF2LPYrSDYsNin2YPYsdipINin2YTYqtiu2LLZitmGINin2YTZhdik2YLYqiIpCiAgICAgIHJlc2N1ZSA9PiBlCiAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINit2K/YqyDYrti32KMg2YHZiiDZhdiz2K0g2KfZhNiw2KfZg9ix2Kk6ICN7ZS5tZXNzYWdlfSIpCiAgICAgIGVuZAogICAgZW5kCiAgICBkbGcuc2hvdwogIGVuZAoKICB1bmxlc3MgZmlsZV9sb2FkZWQ/KF9fRklMRV9fKQogICAgVUkubWVudSgiUGx1Z2lucyIpLmFkZF9pdGVtKCIje1BMVUdJTl9OQU1FfSAtINmB2KrYrSDYp9mE2YXZg9iq2KjYqSIpIHsgc2hvd19saWJyYXJ5IH0KICAgIFVJLm1lbnUoIlBsdWdpbnMiKS5hZGRfaXRlbSgiTUhERVNJR04gLSDZhdiz2K0g2KfZhNiw2KfZg9ix2KkiKSBkbwogICAgICBjYWNoZV9kaXIgPSBGaWxlLmpvaW4oRGlyLnRtcGRpciwgIm1oZGVzaWduX2NhY2hlXzEiKQogICAgICBpZiBGaWxlLmRpcmVjdG9yeT8oY2FjaGVfZGlyKQogICAgICAgIEZpbGVVdGlscy5ybV9yZihjYWNoZV9kaXIpCiAgICAgIGVuZAogICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDZhdiz2K0g2LDYp9mD2LHYqSDYp9mE2KrYrtiy2YrZhiDYp9mE2YXYpNmC2KoiKQogICAgZW5kCgogICAgdG9vbGJhciA9IFVJOjpUb29sYmFyLm5ldyhQTFVHSU5fTkFNRSkKICAgIGNtZCA9IFVJOjpDb21tYW5kLm5ldygi2YXZg9iq2KjYqSAje1BMVUdJTl9OQU1FfSIpIHsgc2hvd19saWJyYXJ5IH0KCiAgICBpY29uX3BhdGggPSBGaWxlLmpvaW4oUExVR0lOX0RJUiwgImljb24ucG5nIikgcmVzY3VlIG5pbAogICAgaWYgRmlsZS5leGlzdD8oaWNvbl9wYXRoKQogICAgICBjbWQuc21hbGxfaWNvbiA9IGljb25fcGF0aAogICAgICBjbWQubGFyZ2VfaWNvbiA9IGljb25fcGF0aAogICAgZW5kCiAgICBjbWQudG9vbHRpcCA9ICLZgdiq2K0g2YXZg9iq2KjYqSDZhdmD2YjZhtin2KogTUhERVNJR04iCiAgICB0b29sYmFyLmFkZF9pdGVtKGNtZCkKCiAgICB0b29sYmFyLnJlc3RvcmUKICAgIGZpbGVfbG9hZGVkKF9fRklMRV9fKQogIGVuZAplbmQ="
}
