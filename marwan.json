{
  "main_code": "cmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ3NlY3VyZXJhbmRvbScKcmVxdWlyZSAnb3Blbi11cmknCnJlcXVpcmUgJ3RtcGRpcicKcmVxdWlyZSAnYmFzZTY0JwpyZXF1aXJlICd0ZW1wZmlsZScKcmVxdWlyZSAnZGlnZXN0JwpyZXF1aXJlICdmaWxldXRpbHMnCgptb2R1bGUgTUhERVNJR04KICBQTFVHSU5fTkFNRSA9ICJNSERFU0lHTiIKICBBUElfVVJMID0gImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9tYXJ3YW5hZGVsZWx0YWhhbi1zdWRvL0FQSTEyMy9yZWZzL2hlYWRzL21haW4vZW1haWwuanNvbiIKCiAgQ09NUE9ORU5UUyA9IGJlZ2luCiAgICB1cmwgPSAiaHR0cHM6Ly9tYWhtb3VkZGVzaWduLmNvbS9TS0VUQ0hVUC9jb21wb25lbnRzLVY0Lmpzb24iCiAgICBqc29uX3JhdyA9IFVSSS5vcGVuKHVybCkucmVhZAogICAganNvbl9kYXRhID0gSlNPTi5wYXJzZShqc29uX3JhdykKICAgIGRlY29kZWRfanNvbiA9IEJhc2U2NC5kZWNvZGU2NChqc29uX2RhdGFbImRhdGEiXSkKICAgIEpTT04ucGFyc2UoZGVjb2RlZF9qc29uLCBzeW1ib2xpemVfbmFtZXM6IHRydWUpCiAgcmVzY3VlID0+IGUKICAgIFVJLm1lc3NhZ2Vib3goItmB2LTZhCDYqtit2YXZitmEINin2YTZhdmD2YjZhtin2Ko6ICN7ZS5tZXNzYWdlfSIpCiAgICBbXQogIGVuZAoKICAjID09PT0g2YHYptipINmE2YjYtti5INin2YTZhdmD2YjZhtin2KogPT09PQogIGNsYXNzIENvbXBvbmVudFBsYWNlcgogICAgZGVmIGluaXRpYWxpemUoZGVmaW5pdGlvbiwgbmFtZSkKICAgICAgQGRlZmluaXRpb24gPSBkZWZpbml0aW9uCiAgICAgIEBuYW1lID0gbmFtZQogICAgICBAaXAgPSBTa2V0Y2h1cDo6SW5wdXRQb2ludC5uZXcKICAgIGVuZAoKICAgIGRlZiBvbk1vdXNlTW92ZShmbGFncywgeCwgeSwgdmlldykKICAgICAgQGlwLnBpY2sodmlldywgeCwgeSkKICAgICAgdmlldy5pbnZhbGlkYXRlCiAgICBlbmQKCiAgICBkZWYgZHJhdyh2aWV3KQogICAgICByZXR1cm4gdW5sZXNzIEBpcC52YWxpZD8KICAgICAgdHIgPSBHZW9tOjpUcmFuc2Zvcm1hdGlvbi5uZXcoQGlwLnBvc2l0aW9uKQogICAgICB2aWV3LmRyYXcoR0xfTElORV9TVFJJUCwgW0BpcC5wb3NpdGlvbl0pCiAgICAgIGJlZ2luCiAgICAgICAgcHRzID0gQGRlZmluaXRpb24uYm91bmRzLmNvcm5lcigwLi43KS5tYXAgeyB8cHR8IHB0LnRyYW5zZm9ybSh0cikgfQogICAgICAgIHZpZXcuZHJhdyhHTF9QT0xZR09OLCBwdHMpCiAgICAgIHJlc2N1ZQogICAgICBlbmQKICAgIGVuZAoKICAgIGRlZiBvbkxCdXR0b25Eb3duKGZsYWdzLCB4LCB5LCB2aWV3KQogICAgICBpZiBAaXAudmFsaWQ/CiAgICAgICAgdHIgPSBHZW9tOjpUcmFuc2Zvcm1hdGlvbi5uZXcoQGlwLnBvc2l0aW9uKQogICAgICAgIGluc3RhbmNlID0gU2tldGNodXAuYWN0aXZlX21vZGVsLmVudGl0aWVzLmFkZF9pbnN0YW5jZShAZGVmaW5pdGlvbiwgdHIpCiAgICAgICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnNlbGVjdGlvbi5jbGVhcgogICAgICAgIFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5zZWxlY3Rpb24uYWRkKGluc3RhbmNlKQogICAgICAgIFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC50b29scy5wb3BfdG9vbAogICAgICAgIFNrZXRjaHVwLnNlbmRfYWN0aW9uKCJzZWxlY3RNb3ZlVG9vbDoiKQogICAgICBlbmQKICAgIGVuZAogIGVuZAoKICBkZWYgc2VsZi5nZXRfZGV2aWNlX2lkCiAgICBwcmVmcyA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImRldmljZV9pZCIpCiAgICByZXR1cm4gcHJlZnMgdW5sZXNzIHByZWZzLm5pbD8gfHwgcHJlZnMuZW1wdHk/CiAgICBpZCA9IFNlY3VyZVJhbmRvbS51dWlkCiAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZGV2aWNlX2lkIiwgaWQpCiAgICBpZAogIGVuZAoKICAjID09PT0g2KrZgdi52YrZhCDYp9mE2KXYttin2YHYqSA9PT09CiAgZGVmIHNlbGYuYWN0aXZhdGUoZm9yY2VfcHJvbXB0ID0gdHJ1ZSkKICAgIGVtYWlsID0gU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZW1haWwiKSB8fCAiIgogICAgbGljZW5zZSA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImxpY2Vuc2UiKSB8fCAiIgoKICAgICMg2KXYsNinINmD2KfZhiDYp9mE2KXYrNio2KfYsdmKINij2Ygg2KfZhNit2YLZiNmEINmB2KfYsdi62KnYjCDYp9i32YTYqCDYp9mE2KXYr9iu2KfZhAogICAgaWYgZm9yY2VfcHJvbXB0IHx8IGVtYWlsLmVtcHR5PyB8fCBsaWNlbnNlLmVtcHR5PwogICAgICBpbnB1dCA9IFVJLmlucHV0Ym94KFsi2KfZhNio2LHZitivINin2YTYpdmE2YPYqtix2YjZhtmKIiwgItmD2YTZhdipINin2YTZhdix2YjYsSJdLCBbZW1haWwsIGxpY2Vuc2VdLCAi2KrZgdi52YrZhCBNSERFU0lHTiIpCiAgICAgIHJldHVybiB1bmxlc3MgaW5wdXQKICAgICAgZW1haWwsIGxpY2Vuc2UgPSBpbnB1dAogICAgZW5kCgogICAgIyDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2KjYsdmK2K8g2KfZhNil2YTZg9iq2LHZiNmG2Yog2YjZg9mE2YXYqSDYp9mE2YXYsdmI2LEg2LnYqNixIEFQSQogICAgdmFsaWQgPSB2ZXJpZnlfY3JlZGVudGlhbHMoZW1haWwsIGxpY2Vuc2UpCgogICAgaWYgdmFsaWQKICAgICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImVtYWlsIiwgZW1haWwpCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJsaWNlbnNlIiwgbGljZW5zZSkKICAgICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImFjdGl2YXRlZF9vbmNlIiwgdHJ1ZSkKICAgICAgVUkubWVzc2FnZWJveCgi2YXYqNix2YjZgyDZitinINmH2YbYr9iz2Kkg2KfZhNil2LbYp9mB2Kkg2LTYutin2YTYqVxu2KrZhSDYqNix2YXYrNipINin2YTYpdi22KfZgdipINio2YjYp9iz2LfYqSDZhdmH2YbYr9izINmF2LHZiNin2YYg2LnYp9iv2YQiKSBpZiBmb3JjZV9wcm9tcHQKICAgICAgdHJ1ZQogICAgZWxzZQogICAgICBVSS5tZXNzYWdlYm94KCLYp9mE2KjZitin2YbYp9iqINi62YTYtyDYrdin2YjZhCDZhdix2Kkg2KrYp9mG2YrYqSDZitinINmH2YbYr9iz2Kkg2KfZiCDZg9mE2YUgMDEyMDQyNzk2MDYiKSBpZiBmb3JjZV9wcm9tcHQKICAgICAgZmFsc2UKICAgIGVuZAogIHJlc2N1ZSA9PiBlCiAgICBpZiBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJhY3RpdmF0ZWRfb25jZSIpCiAgICAgIHRydWUKICAgIGVsc2UKICAgICAgVUkubWVzc2FnZWJveCgi2YHYtNmEINin2YTYqtit2YLZgiDZhdmGINin2YTYqNmK2KfZhtin2Ko6ICN7ZS5tZXNzYWdlfSIpIGlmIGZvcmNlX3Byb21wdAogICAgICBmYWxzZQogICAgZW5kCiAgZW5kCgogICMg2K/Yp9mE2Kkg2KfZhNiq2K3ZgtmCINmF2YYg2KfZhNio2LHZitivINin2YTYpdmE2YPYqtix2YjZhtmKINmI2YPZhNmF2Kkg2KfZhNmF2LHZiNixCiAgZGVmIHNlbGYudmVyaWZ5X2NyZWRlbnRpYWxzKGVtYWlsLCBsaWNlbnNlKQogICAgYmVnaW4KICAgICAgdXJpID0gVVJJLnBhcnNlKEFQSV9VUkwpCiAgICAgIGh0dHAgPSBOZXQ6OkhUVFAubmV3KHVyaS5ob3N0LCB1cmkucG9ydCkKICAgICAgaHR0cC51c2Vfc3NsID0gdHJ1ZSBpZiB1cmkuc2NoZW1lID09ICdodHRwcycKICAgICAgaHR0cC5vcGVuX3RpbWVvdXQgPSAxMCAgIyDZiNmC2Kog2KfZhtiq2LjYp9ixIDEwINir2YjYp9mG2YoKICAgICAgaHR0cC5yZWFkX3RpbWVvdXQgPSAxMCAgIyDZiNmC2Kog2YLYsdin2KHYqSAxMCDYq9mI2KfZhtmKCiAgICAgIAogICAgICByZXF1ZXN0ID0gTmV0OjpIVFRQOjpHZXQubmV3KHVyaSkKICAgICAgcmVzcG9uc2UgPSBodHRwLnJlcXVlc3QocmVxdWVzdCkKICAgICAgCiAgICAgIGlmIHJlc3BvbnNlLmlzX2E/KE5ldDo6SFRUUFN1Y2Nlc3MpCiAgICAgICAgIyDYqtit2YTZitmEIEpTT04g2KfZhNmF2LPYqtmE2YUKICAgICAgICBqc29uX2RhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmJvZHkpCiAgICAgICAgCiAgICAgICAgIyDZgdmDINiq2LTZgdmK2LEg2KfZhNio2YrYp9mG2KfYqiDZhdmGINit2YLZhCBtYWluX2NvZGUKICAgICAgICBpZiBqc29uX2RhdGFbIm1haW5fY29kZSJdCiAgICAgICAgICBlbmNvZGVkX2RhdGEgPSBqc29uX2RhdGFbIm1haW5fY29kZSJdCiAgICAgICAgICBkZWNvZGVkX2RhdGEgPSBCYXNlNjQuZGVjb2RlNjQoZW5jb2RlZF9kYXRhKQogICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGVjb2RlZF9kYXRhKQogICAgICAgICAgCiAgICAgICAgICAjINin2YTYqtit2YLZgiDZhdmGINij2YYg2KfZhNio2YrYp9mG2KfYqiDZhdi12YHZiNmB2KkKICAgICAgICAgIGlmIGRhdGEuaXNfYT8oQXJyYXkpCiAgICAgICAgICAgICMg2KfZhNio2K3YqyDYudmGINin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZiiDZiNmD2YTZhdipINin2YTZhdix2YjYsSDYp9mE2YXYt9in2KjZgtipCiAgICAgICAgICAgIHVzZXIgPSBkYXRhLmZpbmQgZG8gfHVzZXJ8IAogICAgICAgICAgICAgIHVzZXJfZW1haWwgPSB1c2VyWyJlbWFpbCJdCiAgICAgICAgICAgICAgdXNlcl9wYXNzd29yZCA9IHVzZXJbInBhc3N3b3JkIl0gCiAgICAgICAgICAgICAgdXNlcl9lbWFpbCA9PSBlbWFpbCAmJiB1c2VyX3Bhc3N3b3JkID09IGxpY2Vuc2UKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybiAhdXNlci5uaWw/CiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goItiq2YbYs9mK2YIg2KfZhNio2YrYp9mG2KfYqiDYutmK2LEg2LXYrdmK2K0iKQogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgIFVJLm1lc3NhZ2Vib3goItit2YLZhCBtYWluX2NvZGUg2LrZitixINmF2YjYrNmI2K8g2YHZiiDYp9mE2KjZitin2YbYp9iqIikKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIGVuZAogICAgICBlbHNlCiAgICAgICAgVUkubWVzc2FnZWJveCgi2YTYpyDZitmI2KzYryDYp9mG2KrYsdmG2KoiKQogICAgICAgIHJldHVybiBmYWxzZQogICAgICBlbmQKICAgICAgCiAgICByZXNjdWUgTmV0OjpPcGVuVGltZW91dCwgTmV0OjpSZWFkVGltZW91dCwgU29ja2V0RXJyb3IsIEVycm5vOjpFQ09OTlJFRlVTRUQsIEVycm5vOjpFSE9TVFVOUkVBQ0gKICAgICAgVUkubWVzc2FnZWJveCgi2YTYpyDZitmI2KzYryDYp9mG2KrYsdmG2KoiKQogICAgICByZXR1cm4gZmFsc2UKICAgIHJlc2N1ZSBKU09OOjpQYXJzZXJFcnJvciA9PiBlCiAgICAgIFVJLm1lc3NhZ2Vib3goItiu2LfYoyDZgdmKINiq2K3ZhNmK2YQg2KfZhNio2YrYp9mG2KfYqiIpCiAgICAgIHJldHVybiBmYWxzZQogICAgcmVzY3VlID0+IGUKICAgICAgVUkubWVzc2FnZWJveCgi2YTYpyDZitmI2KzYryDYp9mG2KrYsdmG2KoiKQogICAgICByZXR1cm4gZmFsc2UKICAgIGVuZAogIGVuZAoKICBkZWYgc2VsZi5hY3RpdmF0ZWQ/CiAgICBlbWFpbCA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImVtYWlsIikKICAgIGxpY2Vuc2UgPSBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJsaWNlbnNlIikKICAgICFlbWFpbC50b19zLmVtcHR5PyAmJiAhbGljZW5zZS50b19zLmVtcHR5PwogIGVuZAoKICBkZWYgc2VsZi5zaG93X2xpYnJhcnkKICAgICMgPT09PSDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2KrZgdi52YrZhCA9PT09CiAgICB1bmxlc3MgYWN0aXZhdGUoZmFsc2UpCiAgICAgIGFjdGl2YXRlKHRydWUpCiAgICAgIHJldHVybgogICAgZW5kCiAgICAjID09PT0g2YbZh9in2YrYqSDYp9mE2KrYrdmC2YIgPT09PQoKICAgIGRsZyA9IFVJOjpIdG1sRGlhbG9nLm5ldyh7CiAgICAgIDpkaWFsb2dfdGl0bGUgPT4gItmF2YPYqtio2Kkg2KfZhNmF2YPZiNmG2KfYqiIsCiAgICAgIDpwcmVmZXJlbmNlc19rZXkgPT4gIm1oZGVzaWduX2xpYnJhcnkiLAogICAgICA6c2Nyb2xsYWJsZSA9PiB0cnVlLAogICAgICA6cmVzaXphYmxlID0+IHRydWUsCiAgICAgIDp3aWR0aCA9PiA4MDAsCiAgICAgIDpoZWlnaHQgPT4gNjUwCiAgICB9KQoKICAgIGNhdGVnb3JpZXMgPSBDT01QT05FTlRTLm1hcCB7IHxjfCBjWzpjYXRlZ29yeV0gfS51bmlxCgogICAgaHRtbCA9IDw8LUhUTUwKICAgIDxodG1sPjxoZWFkPgogICAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9VGFqYXdhbDp3Z2h0QDQwMDs3MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgogICAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7Zm9udC1mYW1pbHk6J1RhamF3YWwnLHNhbnMtc2VyaWY7bWFyZ2luOjA7YmFja2dyb3VuZDojZjlmOWY5O3BhZGRpbmc6MCAyMHB4IDQwcHg7ZGlyZWN0aW9uOnJ0bDt9CiAgICAgICAgaGVhZGVyIHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmc6MjBweCAwO30KICAgICAgICBoZWFkZXIgaW1nIHtoZWlnaHQ6NTBweDtib3JkZXItcmFkaXVzOjUwJTt9CiAgICAgICAgaGVhZGVyIGgyIHttYXJnaW46MDtmb250LXNpemU6MjRweDtjb2xvcjojMmU3ZDMyO30KICAgICAgICAubWVudS10b2dnbGUge2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToyOHB4O3VzZXItc2VsZWN0Om5vbmU7fQogICAgICAgIC5maWx0ZXIge2Rpc3BsYXk6bm9uZTttYXJnaW4tYm90dG9tOjIwcHg7fQogICAgICAgIC5maWx0ZXIgc2VsZWN0IHtmb250LXNpemU6MTZweDtwYWRkaW5nOjZweCAxMHB4O2JvcmRlci1yYWRpdXM6NnB4O2JvcmRlcjoxcHggc29saWQgI2NjYzt9CiAgICAgICAgLmdyaWQge2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KGF1dG8tZmlsbCxtaW5tYXgoMjAwcHgsMWZyKSk7Z2FwOjIwcHg7fQogICAgICAgIC5jYXJkIHtiYWNrZ3JvdW5kOndoaXRlO2JvcmRlci1yYWRpdXM6MTJweDtwYWRkaW5nOjEycHg7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoMCwwLDAsMC4wOCk7dGV4dC1hbGlnbjpjZW50ZXI7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC4zcyBlYXNlLGJveC1zaGFkb3cgMC4zcyBlYXNlO30KICAgICAgICAuY2FyZDpob3ZlciB7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTVweCk7Ym94LXNoYWRvdzowIDhweCAyMHB4IHJnYmEoMCwwLDAsMC4xMik7fQogICAgICAgIGltZy5jb21wb25lbnQtaW1nIHt3aWR0aDoxMDAlO2hlaWdodDoyMDBweDtvYmplY3QtZml0OmNvdmVyO2JvcmRlci1yYWRpdXM6OHB4O30KICAgICAgICBoNCB7bWFyZ2luOjEwcHggMCA1cHg7Zm9udC1zaXplOjE3cHg7Y29sb3I6IzMzMzt9CiAgICAgICAgcCB7Zm9udC1zaXplOjEzcHg7Y29sb3I6IzY2NjttYXJnaW46MDt9CiAgICAgICAgYnV0dG9uIHttYXJnaW4tdG9wOjEwcHg7cGFkZGluZzo2cHggMTRweDtiYWNrZ3JvdW5kOiM0M2EwNDc7Y29sb3I6d2hpdGU7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo1cHg7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIDAuM3M7fQogICAgICAgIGJ1dHRvbjpob3ZlciB7YmFja2dyb3VuZDojMmU3ZDMyO30KICAgICAgICBmb290ZXIge21hcmdpbi10b3A6NDBweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MTJweDtjb2xvcjojOTk5O30KICAgICAgPC9zdHlsZT4KICAgIDwvaGVhZD4KICAgIDxib2R5IG9uY29udGV4dG1lbnU9InJldHVybiBmYWxzZSI+CiAgICAgIDxoZWFkZXI+CiAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vbWFobW91ZGRlc2lnbi5jb20vU0tFVENIVVAvY29tcG9uZW50cy9sb2dvLmpwZWciIGFsdD0iTG9nbyIgLz4KICAgICAgICA8aDI+2YXZg9iq2KjYqSDZhdmD2YjZhtin2Kog2YXZh9mG2K/YsyDZhdix2YjYp9mGINi52KfYr9mEPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJtZW51LXRvZ2dsZSIgb25jbGljaz0idG9nZ2xlTWVudSgpIj7imLA8L2Rpdj4KICAgICAgPC9oZWFkZXI+CgogICAgICA8ZGl2IGNsYXNzPSJmaWx0ZXIiIGlkPSJmaWx0ZXItYm94Ij4KICAgICAgICA8bGFiZWw+CiAgICAgICAgICDwn5SNINiq2LXZgdmK2Kkg2K3Ys9ioOgogICAgICAgICAgPHNlbGVjdCBpZD0iY2F0ZWdvcnkiIG9uY2hhbmdlPSJmaWx0ZXJDb21wb25lbnRzKCkiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJhbGwiPtin2YTZg9mEPC9vcHRpb24+CiAgICAgICAgICAgICN7Y2F0ZWdvcmllcy5tYXAgeyB8Y2F0fCAiPG9wdGlvbiB2YWx1ZT0nI3tjYXR9Jz4je2NhdH08L29wdGlvbj4iIH0uam9pbn0KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgIDwvbGFiZWw+CiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBpZD0iY29tcG9uZW50cyIgY2xhc3M9ImdyaWQiPjwvZGl2PgoKICAgICAgPGZvb3Rlcj4KICAgICAgICDYqtmFINio2LHZhdis2Kkg2YjYqti12YXZitmFINmH2LDZhyDYp9mE2KXYttin2YHYqSDYqNmI2KfYs9i32KkgPGI+2YXZh9mG2K/YsyDZhdix2YjYp9mGINi52KfYr9mEPC9iPiDZhNmE2K3YtdmI2YQg2LnZhNmJINin2YTYr9i52YUg2KfZhNmB2YbZiiDYo9mIINin2YTYpdi22KfZgdin2Kog2KfZhNis2K/Zitiv2Kkg2YrYsdis2Ykg2KfZhNiq2YjYp9i12YQg2LnZhNmJINin2YTYsdmC2YU6IDxiPjAxMjA0Mjc5NjA2PC9iPjxicj4KICAgICAgICDwn5OeINmE2YTYqtmI2KfYtdmEOiA8Yj4wMTIwNDI3OTYwNjwvYj4KICAgICAgPC9mb290ZXI+CgogICAgICA8c2NyaXB0PgpmdW5jdGlvbiBsb2FkQ29tcG9uZW50KGNvbXApe3NrZXRjaHVwLmxvYWRDb21wb25lbnRCeURhdGEoSlNPTi5zdHJpbmdpZnkoY29tcCkpO30KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBlPT5lLnByZXZlbnREZWZhdWx0KCkpOwpjb25zdCBhbGxDb21wb25lbnRzPSN7Q09NUE9ORU5UUy50b19qc29ufTsKZnVuY3Rpb24gcmVuZGVyKGMpe2xldCBoPSIiO2MuZm9yRWFjaCh4PT57aCs9YDxkaXYgY2xhc3M9ImNhcmQiPjxpbWcgY2xhc3M9ImNvbXBvbmVudC1pbWciIHNyYz0iJHt4LmltYWdlfSIgLz48aDQ+JHt4Lm5hbWV9PC9oND48cD4ke3guZGVzY308L3A+PGJ1dHRvbiBvbmNsaWNrPSdsb2FkQ29tcG9uZW50KCR7SlNPTi5zdHJpbmdpZnkoeCl9KSc+2KXYr9ix2KfYrDwvYnV0dG9uPjwvZGl2PmB9KTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29tcG9uZW50cyIpLmlubmVySFRNTD1oO30KZnVuY3Rpb24gZmlsdGVyQ29tcG9uZW50cygpe2NvbnN0IGNhdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2F0ZWdvcnkiKS52YWx1ZTtpZihjYXQ9PT0iYWxsIilyZW5kZXIoYWxsQ29tcG9uZW50cyk7ZWxzZSByZW5kZXIoYWxsQ29tcG9uZW50cy5maWx0ZXIoYz0+Yy5jYXRlZ29yeT09PWNhdCkpO30KZnVuY3Rpb24gdG9nZ2xlTWVudSgpe2NvbnN0IGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpbHRlci1ib3giKTtiLnN0eWxlLmRpc3BsYXk9KGIuc3R5bGUuZGlzcGxheT09PSJibG9jayIpPyJub25lIjoiYmxvY2siO30Kd2luZG93Lm9ubG9hZD0oKT0+ZmlsdGVyQ29tcG9uZW50cygpOwogICAgICA8L3NjcmlwdD4KICAgIDwvYm9keT48L2h0bWw+CiAgICBIVE1MCgogICAgZGxnLnNldF9odG1sKGh0bWwpCgogICAgZGxnLmFkZF9hY3Rpb25fY2FsbGJhY2soImxvYWRDb21wb25lbnRCeURhdGEiKSBkbyB8XywgY29tcF9qc29ufAogICAgICBjb21wID0gSlNPTi5wYXJzZShjb21wX2pzb24sIHN5bWJvbGl6ZV9uYW1lczogdHJ1ZSkKICAgICAgdXJsID0gVVJJLnBhcnNlKGNvbXBbOnVybF0pCiAgICAgIGhhc2hfbmFtZSA9IERpZ2VzdDo6U0hBMjU2LmhleGRpZ2VzdCh1cmwudG9fcylbMC4uMTZdICsgIi5za3AiCiAgICAgIGNhY2hlX2RpciA9IEZpbGUuam9pbihEaXIudG1wZGlyLCAibWhkZXNpZ25fY2FjaGVfMSIpCiAgICAgIEZpbGVVdGlscy5ta2Rpcl9wKGNhY2hlX2RpcikKICAgICAgbG9jYWxfcGF0aCA9IEZpbGUuam9pbihjYWNoZV9kaXIsIGhhc2hfbmFtZSkKCiAgICAgIHVubGVzcyBGaWxlLmV4aXN0Pyhsb2NhbF9wYXRoKQogICAgICAgIHByb2dyZXNzID0gVUk6Okh0bWxEaWFsb2cubmV3KHsKICAgICAgICAgIDpkaWFsb2dfdGl0bGUgPT4gItis2KfYsdmKINin2YTYqtit2YXZitmELi4uIiwKICAgICAgICAgIDpwcmVmZXJlbmNlc19rZXkgPT4gIm1oZGVzaWduX3Byb2dyZXNzIiwKICAgICAgICAgIDpzY3JvbGxhYmxlID0+IGZhbHNlLAogICAgICAgICAgOnJlc2l6YWJsZSA9PiBmYWxzZSwKICAgICAgICAgIDp3aWR0aCA9PiAzMDAsCiAgICAgICAgICA6aGVpZ2h0ID0+IDE1MAogICAgICAgIH0pCgogICAgICAgIHByb2dyZXNzLnNldF9odG1sIDw8LUhUTUwKICAgICAgICAgIDxodG1sPjxoZWFkPgogICAgICAgICAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICAgICAgICAgIDxzdHlsZT4KICAgICAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdUYWphd2FsJywgc2Fucy1zZXJpZjsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDA7IHBhZGRpbmc6IDIwcHg7IGRpcmVjdGlvbjogcnRsOyB9CiAgICAgICAgICAgICAgaDMgeyBtYXJnaW46IDEwcHggMDsgfQogICAgICAgICAgICAgICNwcm9ncmVzcy1iYXIgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAyMHB4OyBiYWNrZ3JvdW5kOiAjZGRkOyBib3JkZXItcmFkaXVzOiAxMHB4OyBvdmVyZmxvdzogaGlkZGVuOyBtYXJnaW4tdG9wOiAxMHB4OyB9CiAgICAgICAgICAgICAgI3Byb2dyZXNzLWZpbGwgeyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAwJTsgYmFja2dyb3VuZDogIzRjYWY1MDsgdHJhbnNpdGlvbjogd2lkdGggMC4ycyBlYXNlOyB9CiAgICAgICAgICAgICAgI3BlcmNlbnQgeyBtYXJnaW4tdG9wOiA4cHg7IGZvbnQtc2l6ZTogMTRweDsgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgICAgPC9oZWFkPjxib2R5PgogICAgICAgICAgICA8aDM+2KzYp9ix2Yog2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYuLi48L2gzPgogICAgICAgICAgICA8ZGl2IGlkPSJwcm9ncmVzcy1iYXIiPjxkaXYgaWQ9InByb2dyZXNzLWZpbGwiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGlkPSJwZXJjZW50Ij4wJTwvZGl2PgogICAgICAgICAgPC9ib2R5PjwvaHRtbD4KICAgICAgICBIVE1MCgogICAgICAgIHByb2dyZXNzLnNob3cKCiAgICAgICAgVUkuc3RhcnRfdGltZXIoMC4zLCBmYWxzZSkgZG8KICAgICAgICAgIGJlZ2luCiAgICAgICAgICAgIGNvbnRlbnRfbGVuZ3RoID0gbmlsCiAgICAgICAgICAgIHRlbXBmaWxlID0gVGVtcGZpbGUubmV3KCJtaGNvbXBvbmVudCIpCgogICAgICAgICAgICBVUkkub3Blbih1cmwsCiAgICAgICAgICAgICAgY29udGVudF9sZW5ndGhfcHJvYzogLT4obGVuKSB7IGNvbnRlbnRfbGVuZ3RoID0gbGVuIH0sCiAgICAgICAgICAgICAgcHJvZ3Jlc3NfcHJvYzogLT4oYnl0ZXMpIHsKICAgICAgICAgICAgICAgIHBlcmNlbnQgPSBjb250ZW50X2xlbmd0aCA/ICgoYnl0ZXMudG9fZiAvIGNvbnRlbnRfbGVuZ3RoKSAqIDEwMCkudG9faSA6IDAKICAgICAgICAgICAgICAgIHByb2dyZXNzLmV4ZWN1dGVfc2NyaXB0KCJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MtZmlsbCcpLnN0eWxlLndpZHRoID0gJyN7cGVyY2VudH0lJyIpCiAgICAgICAgICAgICAgICBwcm9ncmVzcy5leGVjdXRlX3NjcmlwdCgiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcmNlbnQnKS5pbm5lclRleHQgPSAnI3twZXJjZW50fSUnIikKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkgZG8gfHJlbW90ZV9maWxlfAogICAgICAgICAgICAgIElPLmNvcHlfc3RyZWFtKHJlbW90ZV9maWxlLCB0ZW1wZmlsZSkKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICB0ZW1wZmlsZS5jbG9zZQogICAgICAgICAgICBGaWxlVXRpbHMubXYodGVtcGZpbGUucGF0aCwgbG9jYWxfcGF0aCkKICAgICAgICAgICAgcHJvZ3Jlc3MuY2xvc2UgaWYgcHJvZ3Jlc3MudmlzaWJsZT8KCiAgICAgICAgICAgIGlmIEZpbGUuZXhpc3Q/KGxvY2FsX3BhdGgpICYmIEZpbGUuc2l6ZShsb2NhbF9wYXRoKSA+IDAKICAgICAgICAgICAgICBkZWZpbml0aW9uID0gU2tldGNodXAuYWN0aXZlX21vZGVsLmRlZmluaXRpb25zLmxvYWQobG9jYWxfcGF0aCwgYWxsb3dfbmV3ZXI6IHRydWUpCiAgICAgICAgICAgICAgaWYgZGVmaW5pdGlvbgogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwucGxhY2VfY29tcG9uZW50KGRlZmluaXRpb24pCiAgICAgICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLYqtmFINil2K/Ysdin2Kwg2KfZhNmF2YPZiNmGINio2YbYrNin2K0iKSB1bmxlc3MgaW5zdGFuY2UKICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLYrti32KMg2YHZiiDYqtit2YXZitmEINin2YTZhdmD2YjZhiIpCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLYrti32KMg2YHZiiDYqtit2YXZitmEINin2YTZhdmE2YEiKQogICAgICAgICAgICBlbmQKCiAgICAgICAgICByZXNjdWUgPT4gZQogICAgICAgICAgICB0ZW1wZmlsZS5jbG9zZSBpZiB0ZW1wZmlsZQogICAgICAgICAgICB0ZW1wZmlsZS51bmxpbmsgaWYgdGVtcGZpbGUKICAgICAgICAgICAgcHJvZ3Jlc3MuY2xvc2UgaWYgcHJvZ3Jlc3MudmlzaWJsZT8KICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi2YHYtNmEINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGOiAje2UubWVzc2FnZX0iKQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVsc2UKICAgICAgICBiZWdpbgogICAgICAgICAgaWYgRmlsZS5leGlzdD8obG9jYWxfcGF0aCkgJiYgRmlsZS5zaXplKGxvY2FsX3BhdGgpID4gMAogICAgICAgICAgICBkZWZpbml0aW9uID0gU2tldGNodXAuYWN0aXZlX21vZGVsLmRlZmluaXRpb25zLmxvYWQobG9jYWxfcGF0aCwgYWxsb3dfbmV3ZXI6IHRydWUpCiAgICAgICAgICAgIGlmIGRlZmluaXRpb24KICAgICAgICAgICAgICBpbnN0YW5jZSA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5wbGFjZV9jb21wb25lbnQoZGVmaW5pdGlvbikKICAgICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLYqtmFINil2K/Ysdin2Kwg2KfZhNmF2YPZiNmGINio2YbYrNin2K0iKSB1bmxlc3MgaW5zdGFuY2UKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goItiu2LfYoyDZgdmKINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGIikKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goItin2YTZhdmE2YEg2LrZitixINmF2YjYrNmI2K8g2KPZiCDZgdin2LHYuiIpCiAgICAgICAgICBlbmQKICAgICAgICByZXNjdWUgPT4gZQogICAgICAgICAgVUkubWVzc2FnZWJveCgi2YHYtNmEINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGOiAje2UubWVzc2FnZX0iKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAoKICAgIGRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJjbGVhckNvbXBvbmVudENhY2hlIikgZG8gfF98CiAgICAgIGJlZ2luCiAgICAgICAgY2FjaGVfZGlyID0gRmlsZS5qb2luKERpci50bXBkaXIsICJtaGRlc2lnbl9jYWNoZV8xIikKICAgICAgICBpZiBGaWxlLmRpcmVjdG9yeT8oY2FjaGVfZGlyKQogICAgICAgICAgRmlsZVV0aWxzLnJtX3JmKGNhY2hlX2RpcikKICAgICAgICBlbmQKICAgICAgICBVSS5tZXNzYWdlYm94KCLYqtmFINmF2LPYrSDYp9mE2LDYp9mD2LHYqSDYp9mE2YXYpNmC2KrYqSDYqNmG2KzYp9itLiIpCiAgICAgIHJlc2N1ZSA9PiBlCiAgICAgICAgVUkubWVzc2FnZWJveCgi2YHYtNmEINmF2LPYrSDYp9mE2LDYp9mD2LHYqTogI3tlLm1lc3NhZ2V9IikKICAgICAgZW5kCiAgICBlbmQKICAgIGRsZy5zaG93CiAgZW5kCgogIHVubGVzcyBmaWxlX2xvYWRlZD8oX19GSUxFX18pCiAgICBVSS5tZW51KCJQbHVnaW5zIikuYWRkX2l0ZW0oIiN7UExVR0lOX05BTUV9IC0g2KrZgdi52YrZhCIpIHsgYWN0aXZhdGUodHJ1ZSkgfQogICAgVUkubWVudSgiUGx1Z2lucyIpLmFkZF9pdGVtKCIje1BMVUdJTl9OQU1FfSAtINin2YTYsdmC2YUg2KfZhNiq2LPZhNiz2YTZiiIpIHsgVUkubWVzc2FnZWJveCgi2KfZhNix2YLZhSDYp9mE2KrYs9mE2LPZhNmKOlxcbiIgKyBnZXRfZGV2aWNlX2lkKSB9CiAgICBVSS5tZW51KCJQbHVnaW5zIikuYWRkX2l0ZW0oIk1IREVTSUdOIC0g2YXYs9itINin2YTYsNin2YPYsdipINin2YTZhdik2YLYqtipIikgZG8KICAgICAgY2FjaGVfZGlyID0gRmlsZS5qb2luKERpci50bXBkaXIsICJtaGRlc2lnbl9jYWNoZV8xIikKICAgICAgaWYgRmlsZS5kaXJlY3Rvcnk/KGNhY2hlX2RpcikKICAgICAgICBGaWxlVXRpbHMucm1fcmYoY2FjaGVfZGlyKQogICAgICBlbmQKICAgICAgVUkubWVzc2FnZWJveCgi2KrZhSDZhdiz2K0g2KfZhNiw2KfZg9ix2Kkg2KfZhNmF2KTZgtiq2Kkg2KjZhtis2KfYrS4iKQogICAgZW5kCgogICAgdG9vbGJhciA9IFVJOjpUb29sYmFyLm5ldyhQTFVHSU5fTkFNRSkKICAgIGNtZCA9IFVJOjpDb21tYW5kLm5ldygi2YXZg9iq2KjYqSAje1BMVUdJTl9OQU1FfSIpIHsgc2hvd19saWJyYXJ5IH0KCiAgICBpY29uX3BhdGggPSBGaWxlLmpvaW4oUExVR0lOX0RJUiwgImljb24ucG5nIikgcmVzY3VlIG5pbAogICAgaWYgRmlsZS5leGlzdD8oaWNvbl9wYXRoKQogICAgICBjbWQuc21hbGxfaWNvbiA9IGljb25fcGF0aAogICAgICBjbWQubGFyZ2VfaWNvbiA9IGljb25fcGF0aAogICAgZW5kCiAgICBjbWQudG9vbHRpcCA9ICLZhdmD2KrYqNipINmF2YPZiNmG2KfYqiBNSERFU0lHTiIKICAgIHRvb2xiYXIuYWRkX2l0ZW0oY21kKQoKICAgIGNtZF91bmlxdWUgPSBVSTo6Q29tbWFuZC5uZXcoItis2LnZhCDYp9mE2YXZg9mI2YbYp9iqINmB2LHZitiv2KkiKSBkbwogICAgICBtb2R1bGUgTUhERVNJR05fVU5JUVVJRlkKICAgICAgICBkZWYgc2VsZi5tYWtlX2FsbF9jb21wb25lbnRzX3VuaXF1ZShlbnRpdGllcykKICAgICAgICAgIGVudGl0aWVzLmdyZXAoU2tldGNodXA6OkNvbXBvbmVudEluc3RhbmNlKS5lYWNoIGRvIHxpbnN0YW5jZXwKICAgICAgICAgICAgaW5zdGFuY2UubWFrZV91bmlxdWUKICAgICAgICAgICAgbWFrZV9hbGxfY29tcG9uZW50c191bmlxdWUoaW5zdGFuY2UuZGVmaW5pdGlvbi5lbnRpdGllcykKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGRlZiBzZWxmLm1ha2VfZGVmaW5pdGlvbnNfdW5pcXVlCiAgICAgICAgICBtb2RlbCA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbAogICAgICAgICAgbW9kZWwuZGVmaW5pdGlvbnMuZWFjaCBkbyB8ZGVmaW5pdGlvbnwKICAgICAgICAgICAgbmV4dCBpZiBkZWZpbml0aW9uLmdyb3VwPyB8fCBkZWZpbml0aW9uLmltYWdlPwogICAgICAgICAgICBkZWZpbml0aW9uLmluc3RhbmNlcy5lYWNoIGRvIHxpbnN0YW5jZXwKICAgICAgICAgICAgICBpbnN0YW5jZS5tYWtlX3VuaXF1ZQogICAgICAgICAgICAgIG1ha2VfYWxsX2NvbXBvbmVudHNfdW5pcXVlKGluc3RhbmNlLmRlZmluaXRpb24uZW50aXRpZXMpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZGVmIHNlbGYucnVuX3VuaXF1aWZ5CiAgICAgICAgICBtb2RlbCA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbAogICAgICAgICAgbW9kZWwuc3RhcnRfb3BlcmF0aW9uKCLYrNi52YQg2KfZhNmF2YPZiNmG2KfYqiDZgdix2YrYr9ipIiwgdHJ1ZSkKICAgICAgICAgIG1ha2VfYWxsX2NvbXBvbmVudHNfdW5pcXVlKG1vZGVsLmVudGl0aWVzKQogICAgICAgICAgbWFrZV9kZWZpbml0aW9uc191bmlxdWUKICAgICAgICAgIG1vZGVsLmNvbW1pdF9vcGVyYXRpb24KICAgICAgICAgIFVJLm1lc3NhZ2Vib3goItiq2YUg2KzYudmEINis2YXZiti5INin2YTZhdmD2YjZhtin2Kog2YHYsdmK2K/YqSDYqNmG2KzYp9itLiIpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBNSERFU0lHTl9VTklRVUlGWS5ydW5fdW5pcXVpZnkKICAgIGVuZAogICAgdW5pcXVlX2ljb25fcGF0aCA9IEZpbGUuam9pbihQTFVHSU5fRElSLCAidW5pcXVlX2ljb24ucG5nIikgcmVzY3VlIG5pbAogICAgaWYgRmlsZS5leGlzdD8odW5pcXVlX2ljb25fcGF0aCkKICAgICAgY21kX3VuaXF1ZS5zbWFsbF9pY29uID0gdW5pcXVlX2ljb25fcGF0aAogICAgICBjbWRfdW5pcXVlLmxhcmdlX2ljb24gPSB1bmlxdWVfaWNvbl9wYXRoCiAgICBlbmQKICAgIGNtZF91bmlxdWUudG9vbHRpcCA9ICLYrNi52YQg2KfZhNmF2YPZiNmG2KfYqiDZgdix2YrYr9ipINmE2YXZhti5INin2YTYqtmD2LHYp9ixIgogICAgdG9vbGJhci5hZGRfaXRlbShjbWRfdW5pcXVlKQoKICAgIHRvb2xiYXIucmVzdG9yZQogICAgZmlsZV9sb2FkZWQoX19GSUxFX18pCiAgZW5kCmVuZA=="
}
