{
  "main_code": "cmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ3NlY3VyZXJhbmRvbScKcmVxdWlyZSAnb3Blbi11cmknCnJlcXVpcmUgJ3RtcGRpcicKcmVxdWlyZSAnYmFzZTY0JwpyZXF1aXJlICd0ZW1wZmlsZScKcmVxdWlyZSAnZGlnZXN0JwpyZXF1aXJlICdmaWxldXRpbHMnCgptb2R1bGUgTUhERVNJR04KICBQTFVHSU5fTkFNRSA9ICJNSERFU0lHTiIKICBBUElfVVJMID0gImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9tYXJ3YW5hZGVsZWx0YWhhbi1zdWRvL0FQSTEyMy9yZWZzL2hlYWRzL21haW4vZW1haWwuanNvbiIKCiAgQ09NUE9ORU5UUyA9IGJlZ2luCiAgICB1cmwgPSAiaHR0cHM6Ly9tYWhtb3VkZGVzaWduLmNvbS9TS0VUQ0hVUC9jb21wb25lbnRzLVY0Lmpzb24iCiAgICBqc29uX3JhdyA9IFVSSS5vcGVuKHVybCkucmVhZAogICAganNvbl9kYXRhID0gSlNPTi5wYXJzZShqc29uX3JhdykKICAgIGRlY29kZWRfanNvbiA9IEJhc2U2NC5kZWNvZGU2NChqc29uX2RhdGFbImRhdGEiXSkKICAgIEpTT04ucGFyc2UoZGVjb2RlZF9qc29uLCBzeW1ib2xpemVfbmFtZXM6IHRydWUpCiAgcmVzY3VlID0+IGUKICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYrdiv2Ksg2K7Yt9ijINmB2Yog2KrYrdmF2YrZhCDYp9mE2YXZg9iq2KjYqTogI3tlLm1lc3NhZ2V9IikKICAgIFtdCiAgZW5kCgogICMgPT09INmB2KbYqSDZhNmI2LbYuSDYp9mE2YXZg9mI2YbYp9iqID09PQogIGNsYXNzIENvbXBvbmVudFBsYWNlcgogICAgZGVmIGluaXRpYWxpemUoZGVmaW5pdGlvbiwgbmFtZSkKICAgICAgQGRlZmluaXRpb24gPSBkZWZpbml0aW9uCiAgICAgIEBuYW1lID0gbmFtZQogICAgICBAaXAgPSBTa2V0Y2h1cDo6SW5wdXRQb2ludC5uZXcKICAgIGVuZAoKICAgIGRlZiBvbk1vdXNlTW92ZShmbGFncywgeCwgeSwgdmlldykKICAgICAgQGlwLnBpY2sodmlldywgeCwgeSkKICAgICAgdmlldy5pbnZhbGlkYXRlCiAgICBlbmQKCiAgICBkZWYgZHJhdyh2aWV3KQogICAgICByZXR1cm4gdW5sZXNzIEBpcC52YWxpZD8KICAgICAgdHIgPSBHZW9tOjpUcmFuc2Zvcm1hdGlvbi5uZXcoQGlwLnBvc2l0aW9uKQogICAgICB2aWV3LmRyYXcoR0xfTElORV9TVFJJUCwgW0BpcC5wb3NpdGlvbl0pCiAgICAgIGJlZ2luCiAgICAgICAgcHRzID0gQGRlZmluaXRpb24uYm91bmRzLmNvcm5lcigwLi43KS5tYXAgeyB8cHR8IHB0LnRyYW5zZm9ybSh0cikgfQogICAgICAgIHZpZXcuZHJhdyhHTF9QT0xZR09OLCBwdHMpCiAgICAgIHJlc2N1ZQogICAgICBlbmQKICAgIGVuZAoKICAgIGRlZiBvbkxCdXR0b25Eb3duKGZsYWdzLCB4LCB5LCB2aWV3KQogICAgICBpZiBAaXAudmFsaWQ/CiAgICAgICAgdHIgPSBHZW9tOjpUcmFuc2Zvcm1hdGlvbi5uZXcoQGlwLnBvc2l0aW9uKQogICAgICAgIGluc3RhbmNlID0gU2tldGNodXAuYWN0aXZlX21vZGVsLmVudGl0aWVzLmFkZF9pbnN0YW5jZShAZGVmaW5pdGlvbiwgdHIpCiAgICAgICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnNlbGVjdGlvbi5jbGVhcgogICAgICAgIFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5zZWxlY3Rpb24uYWRkKGluc3RhbmNlKQogICAgICAgIFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC50b29scy5wb3BfdG9vbAogICAgICAgIFNrZXRjaHVwLnNlbmRfYWN0aW9uKCJzZWxlY3RNb3ZlVG9vbDoiKQogICAgICBlbmQKICAgIGVuZAogIGVuZAoKICAjID09PSDZhti42KfZhSDYp9mE2KrZgdi52YrZhCDYp9mE2YXYrdiv2KsgLSDYp9mE2KrYrdmC2YIg2YHZiiDZg9mEINmF2LHYqSA9PT0KICBkZWYgc2VsZi5hY3RpdmF0ZShmb3JjZV9wcm9tcHQgPSB0cnVlKQogICAgIyDZgdmKINmD2YQg2YXYsdipINmG2LfZhNioINin2YTYqNmK2KfZhtin2Kog2YXZhiDYp9mE2YXYs9iq2K7Yr9mFCiAgICBlbWFpbCA9ICIiCiAgICBsaWNlbnNlID0gIiIKICAgIAogICAgIyDYt9mE2Kgg2KfZhNio2YrYp9mG2KfYqiDZhdmGINin2YTZhdiz2KrYrtiv2YUKICAgIGlucHV0ID0gVUkuaW5wdXRib3goWyLYp9mE2KjYsdmK2K8g2KfZhNil2YTZg9iq2LHZiNmG2YoiLCAi2YPZiNivINin2YTYqtix2K7Ziti1Il0sIFtlbWFpbCwgbGljZW5zZV0sICLYqtmB2LnZitmEIE1IREVTSUdOIikKICAgIHJldHVybiBmYWxzZSB1bmxlc3MgaW5wdXQKICAgIGVtYWlsLCBsaWNlbnNlID0gaW5wdXQKCiAgICAjINin2YTYqtit2YLZgiDZhdmGINin2YTYqNmK2KfZhtin2Kog2LnYqNixIEFQSSDZgdmKINmD2YQg2YXYsdipCiAgICB2YWxpZCA9IGNoZWNrX2NyZWRlbnRpYWxzKGVtYWlsLCBsaWNlbnNlKQogICAgCiAgICBpZiB2YWxpZAogICAgICBVSS5tZXNzYWdlYm94KCLinIUg2YXYqNix2YjZgyDZitinINmH2YbYr9iz2Kkg2KfZhNil2LbYp9mB2Kkg2LTYutin2YTYqVxu2KrZhSDYqNix2YXYrNipINin2YTYpdi22KfZgdipINio2YjYp9iz2LfYqSDZhdmH2YbYr9izINmF2LHZiNin2YYg2LnYp9iv2YQiKQogICAgICB0cnVlCiAgICBlbHNlCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYp9mE2KjZitin2YbYp9iqINi62YTYtyDYrdin2YjZhCDZhdix2Kkg2KrYp9mG2YrYqSDZitinINmH2YbYr9iz2Kkg2KfZiCDZg9mE2YUgMDEyMDQyNzk2MDYiKQogICAgICBmYWxzZQogICAgZW5kCiAgcmVzY3VlID0+IGUKICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDYrdiv2Ksg2K7Yt9ijINmB2Yog2KfZhNiq2K3ZgtmCOiAje2UubWVzc2FnZX0iKQogICAgZmFsc2UKICBlbmQKCiAgZGVmIHNlbGYuY2hlY2tfY3JlZGVudGlhbHMoZW1haWwsIGxpY2Vuc2UpCiAgICBiZWdpbgogICAgICB1cmkgPSBVUkkoQVBJX1VSTCkKICAgICAgcmVzcG9uc2UgPSBOZXQ6OkhUVFAuZ2V0X3Jlc3BvbnNlKHVyaSkKICAgICAgCiAgICAgIGlmIHJlc3BvbnNlLmlzX2E/KE5ldDo6SFRUUFN1Y2Nlc3MpCiAgICAgICAgdmFsaWRfdXNlcnMgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmJvZHkpCiAgICAgICAgCiAgICAgICAgIyDYp9mE2KjYrdirINi52YYg2KfZhNmF2LPYqtiu2K/ZhSDYp9mE2YXYt9in2KjZggogICAgICAgIHZhbGlkID0gdmFsaWRfdXNlcnMuYW55PyBkbyB8dXNlcnwKICAgICAgICAgIHVzZXJfZW1haWwgPSB1c2VyWyJlbWFpbCJdIHx8IHVzZXJbOmVtYWlsXQogICAgICAgICAgdXNlcl9saWNlbnNlID0gdXNlclsibGljZW5zZSJdIHx8IHVzZXJbOmxpY2Vuc2VdCiAgICAgICAgICB1c2VyX2VtYWlsID09IGVtYWlsICYmIHVzZXJfbGljZW5zZSA9PSBsaWNlbnNlCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHZhbGlkCiAgICAgIGVsc2UKICAgICAgICBVSS5tZXNzYWdlYm94KCLinYwg2KrYudiw2LEg2KfZhNin2KrYtdin2YQg2KjYrtin2K/ZhSDYp9mE2KrYrdmC2YIiKQogICAgICAgIHJldHVybiBmYWxzZQogICAgICBlbmQKICAgIHJlc2N1ZSA9PiBlCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYrti32KMg2YHZiiDYp9mE2KfYqti12KfZhCDYqNin2YTYrtin2K/ZhTogI3tlLm1lc3NhZ2V9IikKICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKICBlbmQKICAjID09PT09PT09PT09PT09PT09PT09PT0KCiAgZGVmIHNlbGYuc2hvd19saWJyYXJ5CiAgICAjID09PSDYqtit2YLZgiDZhdmGINin2YTYqtmB2LnZitmEINij2YjZhNin2Ysg2YHZiiDZg9mEINmF2LHYqSA9PT0KICAgIHVubGVzcyBhY3RpdmF0ZSh0cnVlKQogICAgICByZXR1cm4KICAgIGVuZAogICAgIyA9PT09PT09PT09PT09PT09PT09PT09CgogICAgZGxnID0gVUk6Okh0bWxEaWFsb2cubmV3KHsKICAgICAgOmRpYWxvZ190aXRsZSA9PiAi2YXZg9iq2KjYqSDZhdmD2YjZhtin2KogTUhERVNJR04iLAogICAgICA6cHJlZmVyZW5jZXNfa2V5ID0+ICJtaGRlc2lnbl9saWJyYXJ5IiwKICAgICAgOnNjcm9sbGFibGUgPT4gdHJ1ZSwKICAgICAgOnJlc2l6YWJsZSA9PiB0cnVlLAogICAgICA6d2lkdGggPT4gODAwLAogICAgICA6aGVpZ2h0ID0+IDY1MAogICAgfSkKCiAgICBjYXRlZ29yaWVzID0gQ09NUE9ORU5UUy5tYXAgeyB8Y3wgY1s6Y2F0ZWdvcnldIH0udW5pcQoKICAgIGh0bWwgPSA8PC1IVE1MCiAgICA8aHRtbD48aGVhZD4KICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVRhamF3YWw6d2dodEA0MDA7NzAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgICAgPHN0eWxlPgogICAgICAgIGJvZHkge2ZvbnQtZmFtaWx5OidUYWphd2FsJyxzYW5zLXNlcmlmO21hcmdpbjowO2JhY2tncm91bmQ6I2Y5ZjlmOTtwYWRkaW5nOjAgMjBweCA0MHB4O2RpcmVjdGlvbjpydGw7fQogICAgICAgIGhlYWRlciB7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjIwcHggMDt9CiAgICAgICAgaGVhZGVyIGltZyB7aGVpZ2h0OjUwcHg7Ym9yZGVyLXJhZGl1czo1MCU7fQogICAgICAgIGhlYWRlciBoMiB7bWFyZ2luOjA7Zm9udC1zaXplOjI0cHg7Y29sb3I6IzJlN2QzMjt9CiAgICAgICAgLm1lbnUtdG9nZ2xlIHtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6MjhweDt1c2VyLXNlbGVjdDpub25lO30KICAgICAgICAuZmlsdGVyIHtkaXNwbGF5Om5vbmU7bWFyZ2luLWJvdHRvbToyMHB4O30KICAgICAgICAuZmlsdGVyIHNlbGVjdCB7Zm9udC1zaXplOjE2cHg7cGFkZGluZzo2cHggMTBweDtib3JkZXItcmFkaXVzOjZweDtib3JkZXI6MXB4IHNvbGlkICNjY2M7fQogICAgICAgIC5ncmlkIHtkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdChhdXRvLWZpbGwsbWlubWF4KDIwMHB4LDFmcikpO2dhcDoyMHB4O30KICAgICAgICAuY2FyZCB7YmFja2dyb3VuZDp3aGl0ZTtib3JkZXItcmFkaXVzOjEycHg7cGFkZGluZzoxMnB4O2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMDgpO3RleHQtYWxpZ246Y2VudGVyO3RyYW5zaXRpb246dHJhbnNmb3JtIDAuM3MgZWFzZSxib3gtc2hhZG93IDAuM3MgZWFzZTt9CiAgICAgICAgLmNhcmQ6aG92ZXIge3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01cHgpO2JveC1zaGFkb3c6MCA4cHggMjBweCByZ2JhKDAsMCwwLDAuMTIpO30KICAgICAgICBpbWcuY29tcG9uZW50LWltZyB7d2lkdGg6MTAwJTtoZWlnaHQ6MjAwcHg7b2JqZWN0LWZpdDpjb3Zlcjtib3JkZXItcmFkaXVzOjhweDt9CiAgICAgICAgaDQge21hcmdpbjoxMHB4IDAgNXB4O2ZvbnQtc2l6ZToxN3B4O2NvbG9yOiMzMzM7fQogICAgICAgIHAge2ZvbnQtc2l6ZToxM3B4O2NvbG9yOiM2NjY7bWFyZ2luOjA7fQogICAgICAgIGJ1dHRvbiB7bWFyZ2luLXRvcDoxMHB4O3BhZGRpbmc6NnB4IDE0cHg7YmFja2dyb3VuZDojNDNhMDQ3O2NvbG9yOndoaXRlO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NXB4O2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YmFja2dyb3VuZCAwLjNzO30KICAgICAgICBidXR0b246aG92ZXIge2JhY2tncm91bmQ6IzJlN2QzMjt9CiAgICAgICAgZm9vdGVyIHttYXJnaW4tdG9wOjQwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjEycHg7Y29sb3I6Izk5OTt9CiAgICAgIDwvc3R5bGU+CiAgICA8L2hlYWQ+CiAgICA8Ym9keSBvbmNvbnRleHRtZW51PSJyZXR1cm4gZmFsc2UiPgogICAgICA8aGVhZGVyPgogICAgICAgIDxpbWcgc3JjPSJodHRwczovL21haG1vdWRkZXNpZ24uY29tL1NLRVRDSFVQL2NvbXBvbmVudHMvbG9nby5qcGVnIiBhbHQ9IkxvZ28iIC8+CiAgICAgICAgPGgyPtmF2YPYqtio2Kkg2YXZg9mI2YbYp9iqIE1IREVTSUdOPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJtZW51LXRvZ2dsZSIgb25jbGljaz0idG9nZ2xlTWVudSgpIj7imLA8L2Rpdj4KICAgICAgPC9oZWFkZXI+CgogICAgICA8ZGl2IGNsYXNzPSJmaWx0ZXIiIGlkPSJmaWx0ZXItYm94Ij4KICAgICAgICA8bGFiZWw+CiAgICAgICAgICDwn5SNINiq2LXZgdmK2Kkg2K3Ys9ioOgogICAgICAgICAgPHNlbGVjdCBpZD0iY2F0ZWdvcnkiIG9uY2hhbmdlPSJmaWx0ZXJDb21wb25lbnRzKCkiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJhbGwiPtin2YTZg9mEPC9vcHRpb24+CiAgICAgICAgICAgICN7Y2F0ZWdvcmllcy5tYXAgeyB8Y2F0fCAiPG9wdGlvbiB2YWx1ZT0nI3tjYXR9Jz4je2NhdH08L29wdGlvbj4iIH0uam9pbn0KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgIDwvbGFiZWw+CiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBpZD0iY29tcG9uZW50cyIgY2xhc3M9ImdyaWQiPjwvZGl2PgoKICAgICAgPGZvb3Rlcj4KICAgICAgICDYqtmFINiq2LfZiNmK2LEg2KfZhNil2LbYp9mB2Kkg2KjZiNin2LPYt9ipIDxiPtmF2YfZhtiv2LMg2YXYsdmI2KfZhiDYudin2K/ZhDwvYj48YnI+CiAgICAgICAg2YTZhNiv2LnZhSDYp9mE2YHZhtmKOiA8Yj4wMTIwNDI3OTYwNjwvYj4KICAgICAgPC9mb290ZXI+CgogICAgICA8c2NyaXB0PgpmdW5jdGlvbiBsb2FkQ29tcG9uZW50KGNvbXApe3NrZXRjaHVwLmxvYWRDb21wb25lbnRCeURhdGEoSlNPTi5zdHJpbmdpZnkoY29tcCkpO30KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBlPT5lLnByZXZlbnREZWZhdWx0KCkpOwpjb25zdCBhbGxDb21wb25lbnRzPSN7Q09NUE9ORU5UUy50b19qc29ufTsKZnVuY3Rpb24gcmVuZGVyKGMpe2xldCBoPSIiO2MuZm9yRWFjaCh4PT57aCs9YDxkaXYgY2xhc3M9ImNhcmQiPjxpbWcgY2xhc3M9ImNvbXBvbmVudC1pbWciIHNyYz0iJHt4LmltYWdlfSIgLz48aDQ+JHt4Lm5hbWV9PC9oND48cD4ke3guZGVzY308L3A+PGJ1dHRvbiBvbmNsaWNrPSdsb2FkQ29tcG9uZW50KCR7SlNPTi5zdHJpbmdpZnkoeCl9KSc+2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YY8L2J1dHRvbj48L2Rpdj5gfSk7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvbXBvbmVudHMiKS5pbm5lckhUTUw9aDt9CmZ1bmN0aW9uIGZpbHRlckNvbXBvbmVudHMoKXtjb25zdCBjYXQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhdGVnb3J5IikudmFsdWU7aWYoY2F0PT09ImFsbCIpcmVuZGVyKGFsbENvbXBvbmVudHMpO2Vsc2UgcmVuZGVyKGFsbENvbXBvbmVudHMuZmlsdGVyKGM9PmMuY2F0ZWdvcnk9PT1jYXQpKTt9CmZ1bmN0aW9uIHRvZ2dsZU1lbnUoKXtjb25zdCBiPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmaWx0ZXItYm94Iik7Yi5zdHlsZS5kaXNwbGF5PShiLnN0eWxlLmRpc3BsYXk9PT0iYmxvY2siKT8ibm9uZSI6ImJsb2NrIjt9CndpbmRvdy5vbmxvYWQ9KCk9PmZpbHRlckNvbXBvbmVudHMoKTsKICAgICAgPC9zY3JpcHQ+CiAgICA8L2JvZHk+PC9odG1sPgogICAgSFRNTAoKICAgIGRsZy5zZXRfaHRtbChodG1sKQoKICAgIGRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJsb2FkQ29tcG9uZW50QnlEYXRhIikgZG8gfF8sIGNvbXBfanNvbnwKICAgICAgIyDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2KrZgdi52YrZhCDZhdix2Kkg2KPYrtix2Ykg2YLYqNmEINiq2K3ZhdmK2YQg2KPZiiDZhdmD2YjZhgogICAgICB1bmxlc3MgYWN0aXZhdGUodHJ1ZSkKICAgICAgICBuZXh0CiAgICAgIGVuZAogICAgICAKICAgICAgY29tcCA9IEpTT04ucGFyc2UoY29tcF9qc29uLCBzeW1ib2xpemVfbmFtZXM6IHRydWUpCiAgICAgIHVybCA9IFVSSS5wYXJzZShjb21wWzp1cmxdKQogICAgICBoYXNoX25hbWUgPSBEaWdlc3Q6OlNIQTI1Ni5oZXhkaWdlc3QodXJsLnRvX3MpWzAuLjE2XSArICIuc2twIgogICAgICBjYWNoZV9kaXIgPSBGaWxlLmpvaW4oRGlyLnRtcGRpciwgIm1oZGVzaWduX2NhY2hlXzEiKQogICAgICBGaWxlVXRpbHMubWtkaXJfcChjYWNoZV9kaXIpCiAgICAgIGxvY2FsX3BhdGggPSBGaWxlLmpvaW4oY2FjaGVfZGlyLCBoYXNoX25hbWUpCgogICAgICB1bmxlc3MgRmlsZS5leGlzdD8obG9jYWxfcGF0aCkKICAgICAgICBwcm9ncmVzcyA9IFVJOjpIdG1sRGlhbG9nLm5ldyh7CiAgICAgICAgICA6ZGlhbG9nX3RpdGxlID0+ICLYrNin2LHZiiDYqtit2YXZitmEINin2YTZhdmD2YjZhi4uLiIsCiAgICAgICAgICA6cHJlZmVyZW5jZXNfa2V5ID0+ICJtaGRlc2lnbl9wcm9ncmVzcyIsCiAgICAgICAgICA6c2Nyb2xsYWJsZSA9PiBmYWxzZSwKICAgICAgICAgIDpyZXNpemFibGUgPT4gZmFsc2UsCiAgICAgICAgICA6d2lkdGggPT4gMzAwLAogICAgICAgICAgOmhlaWdodCA9PiAxNTAKICAgICAgICB9KQoKICAgICAgICBwcm9ncmVzcy5zZXRfaHRtbCA8PC1IVE1MCiAgICAgICAgPGh0bWw+PGhlYWQ+CiAgICAgICAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICAgICAgICA8c3R5bGU+CiAgICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogJ1RhamF3YWwnLCBzYW5zLXNlcmlmOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMDsgcGFkZGluZzogMjBweDsgZGlyZWN0aW9uOiBydGw7IH0KICAgICAgICAgICAgaDMgeyBtYXJnaW46IDEwcHggMDsgfQogICAgICAgICAgICAjcHJvZ3Jlc3MtYmFyIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMjBweDsgYmFja2dyb3VuZDogI2RkZDsgYm9yZGVyLXJhZGl1czogMTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgICAgICAjcHJvZ3Jlc3MtZmlsbCB7IGhlaWdodDogMTAwJTsgd2lkdGg6IDAlOyBiYWNrZ3JvdW5kOiAjNGNhZjUwOyB0cmFuc2l0aW9uOiB3aWR0aCAwLjJzIGVhc2U7IH0KICAgICAgICAgICAgI3BlcmNlbnQgeyBtYXJnaW4tdG9wOiA4cHg7IGZvbnQtc2l6ZTogMTRweDsgfQogICAgICAgICAgPC9zdHlsZT4KICAgICAgICA8L2hlYWQ+PGJvZHk+CiAgICAgICAgICA8aDM+2KzYp9ix2Yog2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYuLi48L2gzPgogICAgICAgICAgPGRpdiBpZD0icHJvZ3Jlc3MtYmFyIj48ZGl2IGlkPSJwcm9ncmVzcy1maWxsIj48L2Rpdj48L2Rpdj4KICAgICAgICAgIDxkaXYgaWQ9InBlcmNlbnQiPjAlPC9kaXY+CiAgICAgICAgPC9ib2R5PjwvaHRtbD4KICAgICAgICBIVE1MCgogICAgICAgIHByb2dyZXNzLnNob3cKCiAgICAgICAgVUkuc3RhcnRfdGltZXIoMC4zLCBmYWxzZSkgZG8KICAgICAgICAgIGJlZ2luCiAgICAgICAgICAgIGNvbnRlbnRfbGVuZ3RoID0gbmlsCiAgICAgICAgICAgIHRlbXBmaWxlID0gVGVtcGZpbGUubmV3KCJtaGNvbXBvbmVudCIpCgogICAgICAgICAgICBVUkkub3Blbih1cmwsCiAgICAgICAgICAgICAgY29udGVudF9sZW5ndGhfcHJvYzogLT4obGVuKSB7IGNvbnRlbnRfbGVuZ3RoID0gbGVuIH0sCiAgICAgICAgICAgICAgcHJvZ3Jlc3NfcHJvYzogLT4oYnl0ZXMpIHsKICAgICAgICAgICAgICAgIHBlcmNlbnQgPSBjb250ZW50X2xlbmd0aCA/ICgoYnl0ZXMudG9fZiAvIGNvbnRlbnRfbGVuZ3RoKSAqIDEwMCkudG9faSA6IDAKICAgICAgICAgICAgICAgIHByb2dyZXNzLmV4ZWN1dGVfc2NyaXB0KCJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MtZmlsbCcpLnN0eWxlLndpZHRoID0gJyN7cGVyY2VudH0lJyIpCiAgICAgICAgICAgICAgICBwcm9ncmVzcy5leGVjdXRlX3NjcmlwdCgiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcmNlbnQnKS5pbm5lclRleHQgPSAnI3twZXJjZW50fSUnIikKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkgZG8gfHJlbW90ZV9maWxlfAogICAgICAgICAgICAgIElPLmNvcHlfc3RyZWFtKHJlbW90ZV9maWxlLCB0ZW1wZmlsZSkKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICB0ZW1wZmlsZS5jbG9zZQogICAgICAgICAgICBGaWxlVXRpbHMubXYodGVtcGZpbGUucGF0aCwgbG9jYWxfcGF0aCkKICAgICAgICAgICAgcHJvZ3Jlc3MuY2xvc2UgaWYgcHJvZ3Jlc3MudmlzaWJsZT8KCiAgICAgICAgICAgIGlmIEZpbGUuZXhpc3Q/KGxvY2FsX3BhdGgpICYmIEZpbGUuc2l6ZShsb2NhbF9wYXRoKSA+IDAKICAgICAgICAgICAgICBkZWZpbml0aW9uID0gU2tldGNodXAuYWN0aXZlX21vZGVsLmRlZmluaXRpb25zLmxvYWQobG9jYWxfcGF0aCwgYWxsb3dfbmV3ZXI6IHRydWUpCiAgICAgICAgICAgICAgaWYgZGVmaW5pdGlvbgogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwucGxhY2VfY29tcG9uZW50KGRlZmluaXRpb24pCiAgICAgICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYqtit2YXZitmEINin2YTZhdmD2YjZhiDYqNmG2KzYp9itIikgdW5sZXNzIGluc3RhbmNlCiAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pqg77iPINiq2LnYsNixINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGIikKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYqti52LDYsSDYqtit2YXZitmEINin2YTZhdmE2YEiKQogICAgICAgICAgICBlbmQKCiAgICAgICAgICByZXNjdWUgPT4gZQogICAgICAgICAgICB0ZW1wZmlsZS5jbG9zZSBpZiB0ZW1wZmlsZQogICAgICAgICAgICB0ZW1wZmlsZS51bmxpbmsgaWYgdGVtcGZpbGUKICAgICAgICAgICAgcHJvZ3Jlc3MuY2xvc2UgaWYgcHJvZ3Jlc3MudmlzaWJsZT8KICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINit2K/YqyDYrti32KMg2YHZiiDYqtit2YXZitmEINin2YTZhdmD2YjZhjogI3tlLm1lc3NhZ2V9IikKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbHNlCiAgICAgICAgYmVnaW4KICAgICAgICAgIGlmIEZpbGUuZXhpc3Q/KGxvY2FsX3BhdGgpICYmIEZpbGUuc2l6ZShsb2NhbF9wYXRoKSA+IDAKICAgICAgICAgICAgZGVmaW5pdGlvbiA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5kZWZpbml0aW9ucy5sb2FkKGxvY2FsX3BhdGgsIGFsbG93X25ld2VyOiB0cnVlKQogICAgICAgICAgICBpZiBkZWZpbml0aW9uCiAgICAgICAgICAgICAgaW5zdGFuY2UgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwucGxhY2VfY29tcG9uZW50KGRlZmluaXRpb24pCiAgICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYg2KjZhtis2KfYrSIpIHVubGVzcyBpbnN0YW5jZQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgVUkubWVzc2FnZWJveCgi4pqg77iPINiq2LnYsNixINiq2K3ZhdmK2YQg2KfZhNmF2YPZiNmGIikKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYp9mE2YXZhNmBINin2YTZhdit2YTZiiDYqtin2YTZgSIpCiAgICAgICAgICBlbmQKICAgICAgICByZXNjdWUgPT4gZQogICAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINit2K/YqyDYrti32KMg2YHZiiDYqtit2YXZitmEINin2YTZhdmD2YjZhjogI3tlLm1lc3NhZ2V9IikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKCiAgICBkbGcuYWRkX2FjdGlvbl9jYWxsYmFjaygiY2xlYXJDb21wb25lbnRDYWNoZSIpIGRvIHxffAogICAgICBiZWdpbgogICAgICAgIGNhY2hlX2RpciA9IEZpbGUuam9pbihEaXIudG1wZGlyLCAibWhkZXNpZ25fY2FjaGVfMSIpCiAgICAgICAgaWYgRmlsZS5kaXJlY3Rvcnk/KGNhY2hlX2RpcikKICAgICAgICAgIEZpbGVVdGlscy5ybV9yZihjYWNoZV9kaXIpCiAgICAgICAgZW5kCiAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2YXYs9itINiw2KfZg9ix2Kkg2KfZhNiq2K7YstmK2YYg2KfZhNmF2KTZgtiqIikKICAgICAgcmVzY3VlID0+IGUKICAgICAgICBVSS5tZXNzYWdlYm94KCLinYwg2K3Yr9irINiu2LfYoyDZgdmKINmF2LPYrSDYp9mE2LDYp9mD2LHYqTogI3tlLm1lc3NhZ2V9IikKICAgICAgZW5kCiAgICBlbmQKICAgIGRsZy5zaG93CiAgZW5kCgogIHVubGVzcyBmaWxlX2xvYWRlZD8oX19GSUxFX18pCiAgICBVSS5tZW51KCJQbHVnaW5zIikuYWRkX2l0ZW0oIiN7UExVR0lOX05BTUV9IC0g2YHYqtitINin2YTZhdmD2KrYqNipIikgeyBzaG93X2xpYnJhcnkgfQogICAgVUkubWVudSgiUGx1Z2lucyIpLmFkZF9pdGVtKCJNSERFU0lHTiAtINmF2LPYrSDYp9mE2LDYp9mD2LHYqSIpIGRvCiAgICAgIGNhY2hlX2RpciA9IEZpbGUuam9pbihEaXIudG1wZGlyLCAibWhkZXNpZ25fY2FjaGVfMSIpCiAgICAgIGlmIEZpbGUuZGlyZWN0b3J5PyhjYWNoZV9kaXIpCiAgICAgICAgRmlsZVV0aWxzLnJtX3JmKGNhY2hlX2RpcikKICAgICAgZW5kCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINmF2LPYrSDYsNin2YPYsdipINin2YTYqtiu2LLZitmGINin2YTZhdik2YLYqiIpCiAgICBlbmQKCiAgICB0b29sYmFyID0gVUk6OlRvb2xiYXIubmV3KFBMVUdJTl9OQU1FKQogICAgY21kID0gVUk6OkNvbW1hbmQubmV3KCLZhdmD2KrYqNipICN7UExVR0lOX05BTUV9IikgeyBzaG93X2xpYnJhcnkgfQoKICAgIGljb25fcGF0aCA9IEZpbGUuam9pbihQTFVHSU5fRElSLCAiaWNvbi5wbmciKSByZXNjdWUgbmlsCiAgICBpZiBGaWxlLmV4aXN0PyhpY29uX3BhdGgpCiAgICAgIGNtZC5zbWFsbF9pY29uID0gaWNvbl9wYXRoCiAgICAgIGNtZC5sYXJnZV9pY29uID0gaWNvbl9wYXRoCiAgICBlbmQKICAgIGNtZC50b29sdGlwID0gItmB2KrYrSDZhdmD2KrYqNipINmF2YPZiNmG2KfYqiBNSERFU0lHTiIKICAgIHRvb2xiYXIuYWRkX2l0ZW0oY21kKQoKICAgIGNtZF91bmlxdWUgPSBVSTo6Q29tbWFuZC5uZXcoItis2LnZhCDYp9mE2YXZg9mI2YbYp9iqINmB2LHZitiv2KkiKSB7CiAgICAgICMg2KfZhNiq2K3ZgtmCINmF2YYg2KfZhNiq2YHYudmK2YQg2KPZiNmE2KfZiwogICAgICB1bmxlc3MgYWN0aXZhdGUodHJ1ZSkKICAgICAgICBuZXh0CiAgICAgIGVuZAogICAgICAKICAgICAgbW9kdWxlIE1IREVTSUdOX1VOSVFVSUZZCiAgICAgICAgZGVmIHNlbGYubWFrZV9hbGxfY29tcG9uZW50c191bmlxdWUoZW50aXRpZXMpCiAgICAgICAgICBlbnRpdGllcy5ncmVwKFNrZXRjaHVwOjpDb21wb25lbnRJbnN0YW5jZSkuZWFjaCBkbyB8aW5zdGFuY2V8CiAgICAgICAgICAgIGluc3RhbmNlLm1ha2VfdW5pcXVlCiAgICAgICAgICAgIG1ha2VfYWxsX2NvbXBvbmVudHNfdW5pcXVlKGluc3RhbmNlLmRlZmluaXRpb24uZW50aXRpZXMpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBkZWYgc2VsZi5tYWtlX2RlZmluaXRpb25zX3VuaXF1ZQogICAgICAgICAgbW9kZWwgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwKICAgICAgICAgIG1vZGVsLmRlZmluaXRpb25zLmVhY2ggZG8gfGRlZmluaXRpb258CiAgICAgICAgICAgIG5leHQgaWYgZGVmaW5pdGlvbi5ncm91cD8gfHwgZGVmaW5pdGlvbi5pbWFnZT8KICAgICAgICAgICAgZGVmaW5pdGlvbi5pbnN0YW5jZXMuZWFjaCBkbyB8aW5zdGFuY2V8CiAgICAgICAgICAgICAgaW5zdGFuY2UubWFrZV91bmlxdWUKICAgICAgICAgICAgICBtYWtlX2FsbF9jb21wb25lbnRzX3VuaXF1ZShpbnN0YW5jZS5kZWZpbml0aW9uLmVudGl0aWVzKQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGRlZiBzZWxmLnJ1bl91bmlxdWlmeQogICAgICAgICAgbW9kZWwgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwKICAgICAgICAgIG1vZGVsLnN0YXJ0X29wZXJhdGlvbigi2KzYudmEINis2YXZiti5INin2YTZhdmD2YjZhtin2Kog2YHYsdmK2K/YqSIsIHRydWUpCiAgICAgICAgICBtYWtlX2FsbF9jb21wb25lbnRzX3VuaXF1ZShtb2RlbC5lbnRpdGllcykKICAgICAgICAgIG1ha2VfZGVmaW5pdGlvbnNfdW5pcXVlCiAgICAgICAgICBtb2RlbC5jb21taXRfb3BlcmF0aW9uCiAgICAgICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYrNi52YQg2KzZhdmK2Lkg2KfZhNmF2YPZiNmG2KfYqiDZgdix2YrYr9ipINio2YbYrNin2K0iKQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgTUhERVNJR05fVU5JUVVJRlkucnVuX3VuaXF1aWZ5CiAgICB9CiAgICB1bmlxdWVfaWNvbl9wYXRoID0gRmlsZS5qb2luKFBMVUdJTl9ESVIsICJ1bmlxdWVfaWNvbi5wbmciKSByZXNjdWUgbmlsCiAgICBpZiBGaWxlLmV4aXN0Pyh1bmlxdWVfaWNvbl9wYXRoKQogICAgICBjbWRfdW5pcXVlLnNtYWxsX2ljb24gPSB1bmlxdWVfaWNvbl9wYXRoCiAgICAgIGNtZF91bmlxdWUubGFyZ2VfaWNvbiA9IHVuaXF1ZV9pY29uX3BhdGgKICAgIGVuZAogICAgY21kX3VuaXF1ZS50b29sdGlwID0gItis2LnZhCDYrNmF2YrYuSDYp9mE2YXZg9mI2YbYp9iqINmB2Yog2KfZhNmG2YXZiNiw2Kwg2YHYsdmK2K/YqSIKICAgIHRvb2xiYXIuYWRkX2l0ZW0oY21kX3VuaXF1ZSkKCiAgICB0b29sYmFyLnJlc3RvcmUKICAgIGZpbGVfbG9hZGVkKF9fRklMRV9fKQogIGVuZAplbmQ="
}
