{
  "main_code": "cmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ3NlY3VyZXJhbmRvbScKcmVxdWlyZSAnb3Blbi11cmknCnJlcXVpcmUgJ3RtcGRpcicKcmVxdWlyZSAnYmFzZTY0JwpyZXF1aXJlICd0ZW1wZmlsZScKcmVxdWlyZSAnZGlnZXN0JwpyZXF1aXJlICdmaWxldXRpbHMnCgptb2R1bGUgTUhERVNJR04KICBQTFVHSU5fTkFNRSA9ICJNSERFU0lHTiIKICBQTFVHSU5fRElSID0gRmlsZS5kaXJuYW1lKF9fRklMRV9fKQogIAogICMgPT09PT09INix2KfYqNi3INin2YTYqtit2YLZgiDZhdmGINin2YTYudmF2YTYp9ihID09PT09PQogIFZBTElEQVRJT05fVVJMID0gImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9tYXJ3YW5hZGVsZWx0YWhhbi1zdWRvL0FQSTEyMy9tYWluL2VtYWlsLmpzb24iCgogICMgPT09PT09INmF2KzZhNivINin2YTZhdmD2YjZhtin2Kog2KfZhNi02K7YtdmK2KkgPT09PT09CiAgQ1VTVE9NX0NPTVBPTkVOVFNfRElSID0gRmlsZS5qb2luKFBMVUdJTl9ESVIsICJjdXN0b21fY29tcG9uZW50cyIpCiAgRmlsZVV0aWxzLm1rZGlyX3AoQ1VTVE9NX0NPTVBPTkVOVFNfRElSKSB1bmxlc3MgRmlsZS5kaXJlY3Rvcnk/KENVU1RPTV9DT01QT05FTlRTX0RJUikKCiAgIyA9PT09PT0g2K/Yp9mE2Kkg2YTZhNiq2K3ZgtmCINmF2YYg2KjZitin2YbYp9iqINin2YTYudmF2YrZhCA9PT09PT0KICBkZWYgc2VsZi52YWxpZGF0ZV91c2VyKGVtYWlsLCBwYXNzd29yZCkKICAgIGJlZ2luCiAgICAgICMg2KrYrdmF2YrZhCDYqNmK2KfZhtin2Kog2KfZhNi52YXZhNin2KEg2YXZhiBHaXRIdWIKICAgICAgdXJpID0gVVJJLnBhcnNlKFZBTElEQVRJT05fVVJMKQogICAgICByZXNwb25zZSA9IE5ldDo6SFRUUC5nZXRfcmVzcG9uc2UodXJpKQogICAgICAKICAgICAgaWYgcmVzcG9uc2UuY29kZSA9PSAnMjAwJwogICAgICAgIHVzZXJzX2RhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmJvZHkpCiAgICAgICAgCiAgICAgICAgIyDYp9mE2KjYrdirINi52YYg2KfZhNmF2LPYqtiu2K/ZhSDYp9mE2YXYt9in2KjZggogICAgICAgIHVzZXIgPSB1c2Vyc19kYXRhLmZpbmQgeyB8dXwgdVsiZW1haWwiXSA9PSBlbWFpbCAmJiB1WyJwYXNzd29yZCJdID09IHBhc3N3b3JkIH0KICAgICAgICAKICAgICAgICBpZiB1c2VyCiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAi4pyFINiq2YUg2KfZhNiq2K3ZgtmCINio2YbYrNin2K0hINmF2KjYsdmI2YMg2KfZhNil2LbYp9mB2Kkg2YUuINmF2LHZiNin2YYg2LnYp9iv2YQg2LTYutin2YTYqSIgfQogICAgICAgIGVsc2UKICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAi4p2MINio2YrYp9mG2KfYqiDYp9mE2K/YrtmI2YQg2LrZitixINi12K3Zitit2KkiIH0KICAgICAgICBlbmQKICAgICAgZWxzZQogICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAi4p2MINmB2LTZhCDZgdmKINin2YTYp9iq2LXYp9mEINio2K7Yp9iv2YUg2KfZhNiq2K3ZgtmCIiB9CiAgICAgIGVuZAogICAgcmVzY3VlID0+IGUKICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICLinYwg2K7Yt9ijINmB2Yog2KfZhNiq2K3ZgtmCOiAje2UubWVzc2FnZX0iIH0KICAgIGVuZAogIGVuZAoKICAjID09PT09PSDYr9in2YTYqSDZhNiq2K3ZhdmK2YQg2KfZhNio2YrYp9mG2KfYqiDZhdmGINin2YTYs9mK2LHZgdixINmF2LkgQmFzZTY0IGRlY29kaW5nID09PT09PQogIGRlZiBzZWxmLmxvYWRfY29tcG9uZW50c19kYXRhCiAgICBiZWdpbgogICAgICB1cmwgPSAiaHR0cHM6Ly9tYWhtb3VkZGVzaWduLmNvbS9TS0VUQ0hVUC9jb21wb25lbnRzLVY0Lmpzb24iCiAgICAgIGpzb25fcmF3ID0gVVJJLm9wZW4odXJsKS5yZWFkCiAgICAgIGpzb25fZGF0YSA9IEpTT04ucGFyc2UoanNvbl9yYXcpCiAgICAgIGRlY29kZWRfanNvbiA9IEJhc2U2NC5kZWNvZGU2NChqc29uX2RhdGFbImRhdGEiXSkKICAgICAgc2VydmVyX2NvbXBvbmVudHMgPSBKU09OLnBhcnNlKGRlY29kZWRfanNvbiwgc3ltYm9saXplX25hbWVzOiB0cnVlKQogICAgICAKICAgICAgIyDYqtit2YXZitmEINin2YTZhdmD2YjZhtin2Kog2KfZhNi02K7YtdmK2KkKICAgICAgY3VzdG9tX2NvbXBvbmVudHMgPSBsb2FkX2N1c3RvbV9jb21wb25lbnRzCiAgICAgIAogICAgICAjINiv2YXYrCDYp9mE2YXZg9mI2YbYp9iqINmF2YYg2KfZhNiz2YrYsdmB2LEg2YXYuSDYp9mE2YXZg9mI2YbYp9iqINin2YTYtNiu2LXZitipCiAgICAgIHNlcnZlcl9jb21wb25lbnRzICsgY3VzdG9tX2NvbXBvbmVudHMKICAgIHJlc2N1ZSA9PiBlCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDZgdi02YQg2YHZiiDYqtit2YXZitmEINin2YTYqNmK2KfZhtin2Kog2YXZhiDYp9mE2LPZitix2YHYsTogI3tlLm1lc3NhZ2V9IikKICAgICAgbG9hZF9jdXN0b21fY29tcG9uZW50cwogICAgZW5kCiAgZW5kCgogICMgPT09PT09INiv2KfZhNipINmE2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YbYp9iqINin2YTYtNiu2LXZitipID09PT09PQogIGRlZiBzZWxmLmxvYWRfY3VzdG9tX2NvbXBvbmVudHMKICAgIGN1c3RvbV9kYXRhX2ZpbGUgPSBGaWxlLmpvaW4oQ1VTVE9NX0NPTVBPTkVOVFNfRElSLCAiY3VzdG9tX2NvbXBvbmVudHMuanNvbiIpCiAgICAKICAgIGlmIEZpbGUuZXhpc3Q/KGN1c3RvbV9kYXRhX2ZpbGUpCiAgICAgIEpTT04ucGFyc2UoRmlsZS5yZWFkKGN1c3RvbV9kYXRhX2ZpbGUpLCBzeW1ib2xpemVfbmFtZXM6IHRydWUpCiAgICBlbHNlCiAgICAgIFtdCiAgICBlbmQKICByZXNjdWUgPT4gZQogICAgW10KICBlbmQKCiAgIyA9PT09PT0g2K/Yp9mE2Kkg2YTYrdmB2Lgg2KfZhNmF2YPZiNmG2KfYqiDYp9mE2LTYrti12YrYqSA9PT09PT0KICBkZWYgc2VsZi5zYXZlX2N1c3RvbV9jb21wb25lbnRzKGNvbXBvbmVudHMpCiAgICBjdXN0b21fZGF0YV9maWxlID0gRmlsZS5qb2luKENVU1RPTV9DT01QT05FTlRTX0RJUiwgImN1c3RvbV9jb21wb25lbnRzLmpzb24iKQogICAgRmlsZS53cml0ZShjdXN0b21fZGF0YV9maWxlLCBKU09OLnByZXR0eV9nZW5lcmF0ZShjb21wb25lbnRzKSkKICBlbmQKCiAgIyA9PT09PT0g2K/Yp9mE2Kkg2YTYpdi22KfZgdipINmF2YPZiNmGINi02K7YtdmKINis2K/ZitivID09PT09PQogIGRlZiBzZWxmLmFkZF9jdXN0b21fY29tcG9uZW50KGNvbXBvbmVudF9kYXRhKQogICAgYmVnaW4KICAgICAgIyDYpdmG2LTYp9ihINin2LPZhSDZgdix2YrYryDZhNmE2YXZhNmBCiAgICAgIGZpbGVuYW1lID0gRGlnZXN0OjpTSEEyNTYuaGV4ZGlnZXN0KGNvbXBvbmVudF9kYXRhWzpuYW1lXSArIFRpbWUubm93LnRvX2YudG9fcylbMC4uMTZdCiAgICAgIAogICAgICAjINmF2LnYp9mE2KzYqSDZhdmE2YEgU0tQCiAgICAgIHNrcF9maWxlbmFtZSA9IGZpbGVuYW1lICsgIi5za3AiCiAgICAgIHNrcF9wYXRoID0gRmlsZS5qb2luKENVU1RPTV9DT01QT05FTlRTX0RJUiwgc2twX2ZpbGVuYW1lKQogICAgICAKICAgICAgaWYgY29tcG9uZW50X2RhdGFbOnNrcF90eXBlXSA9PSAiZmlsZSIKICAgICAgICAjINmG2LPYriDYp9mE2YXZhNmBINin2YTZhdit2YTZigogICAgICAgIEZpbGVVdGlscy5jcChjb21wb25lbnRfZGF0YVs6c2twX3BhdGhdLCBza3BfcGF0aCkKICAgICAgZWxzZQogICAgICAgICMg2KrYrdmF2YrZhCDZhdmGINin2YTYsdin2KjYtwogICAgICAgIGRvd25sb2FkX2ZpbGUoY29tcG9uZW50X2RhdGFbOnNrcF91cmxdLCBza3BfcGF0aCkKICAgICAgZW5kCiAgICAgIAogICAgICAjINmF2LnYp9mE2KzYqSDYp9mE2LXZiNix2KkKICAgICAgaW1hZ2VfZmlsZW5hbWUgPSBmaWxlbmFtZSArICIucG5nIgogICAgICBpbWFnZV9wYXRoID0gRmlsZS5qb2luKENVU1RPTV9DT01QT05FTlRTX0RJUiwgaW1hZ2VfZmlsZW5hbWUpCiAgICAgIAogICAgICBpZiBjb21wb25lbnRfZGF0YVs6aW1hZ2VfdHlwZV0gPT0gImZpbGUiCiAgICAgICAgIyDZhtiz2K4g2KfZhNi12YjYsdipINin2YTZhdit2YTZitipCiAgICAgICAgRmlsZVV0aWxzLmNwKGNvbXBvbmVudF9kYXRhWzppbWFnZV9wYXRoXSwgaW1hZ2VfcGF0aCkKICAgICAgZWxzZQogICAgICAgICMg2KrYrdmF2YrZhCDZhdmGINin2YTYsdin2KjYtwogICAgICAgIGRvd25sb2FkX2ZpbGUoY29tcG9uZW50X2RhdGFbOmltYWdlX3VybF0sIGltYWdlX3BhdGgpCiAgICAgIGVuZAogICAgICAKICAgICAgIyDYpdi22KfZgdipINin2YTYqNmK2KfZhtin2Kog2YTZhNmF2YPZiNmGCiAgICAgIGN1c3RvbV9jb21wb25lbnQgPSB7CiAgICAgICAgbmFtZTogY29tcG9uZW50X2RhdGFbOm5hbWVdLAogICAgICAgIGNhdGVnb3J5OiBjb21wb25lbnRfZGF0YVs6Y2F0ZWdvcnldLAogICAgICAgIGRlc2M6IGNvbXBvbmVudF9kYXRhWzpkZXNjcmlwdGlvbl0sCiAgICAgICAgdXJsOiBza3BfcGF0aCwKICAgICAgICBpbWFnZTogaW1hZ2VfcGF0aCwKICAgICAgICBjdXN0b206IHRydWUKICAgICAgfQogICAgICAKICAgICAgIyDYrdmB2Lgg2YHZiiDYp9mE2YXZg9mI2YbYp9iqINin2YTYtNiu2LXZitipCiAgICAgIGN1cnJlbnRfY29tcG9uZW50cyA9IGxvYWRfY3VzdG9tX2NvbXBvbmVudHMKICAgICAgY3VycmVudF9jb21wb25lbnRzIDw8IGN1c3RvbV9jb21wb25lbnQKICAgICAgc2F2ZV9jdXN0b21fY29tcG9uZW50cyhjdXJyZW50X2NvbXBvbmVudHMpCiAgICAgIAogICAgICB0cnVlCiAgICByZXNjdWUgPT4gZQogICAgICBwdXRzICJFcnJvciBhZGRpbmcgY3VzdG9tIGNvbXBvbmVudDogI3tlLm1lc3NhZ2V9IgogICAgICBmYWxzZQogICAgZW5kCiAgZW5kCgogICMgPT09PT09INiv2KfZhNipINmE2KrYrdmF2YrZhCDYp9mE2YXZhNmBINmF2YYg2KfZhNix2KfYqNi3ID09PT09PQogIGRlZiBzZWxmLmRvd25sb2FkX2ZpbGUodXJsLCBkZXN0aW5hdGlvbikKICAgIHVyaSA9IFVSSS5wYXJzZSh1cmwpCiAgICByZXNwb25zZSA9IE5ldDo6SFRUUC5nZXRfcmVzcG9uc2UodXJpKQogICAgCiAgICBpZiByZXNwb25zZS5pc19hPyhOZXQ6OkhUVFBTdWNjZXNzKQogICAgICBGaWxlLmJpbndyaXRlKGRlc3RpbmF0aW9uLCByZXNwb25zZS5ib2R5KQogICAgZWxzZQogICAgICByYWlzZSAiRmFpbGVkIHRvIGRvd25sb2FkIGZpbGUgZnJvbSAje3VybH0iCiAgICBlbmQKICBlbmQKCiAgIyA9PT09PT0g2K/Yp9mE2Kkg2YTYrdiw2YEg2YXZg9mI2YYg2LTYrti12YogPT09PT09CiAgZGVmIHNlbGYuZGVsZXRlX2N1c3RvbV9jb21wb25lbnQoY29tcG9uZW50X25hbWUpCiAgICBiZWdpbgogICAgICBjdXJyZW50X2NvbXBvbmVudHMgPSBsb2FkX2N1c3RvbV9jb21wb25lbnRzCiAgICAgIGNvbXBvbmVudF90b19kZWxldGUgPSBjdXJyZW50X2NvbXBvbmVudHMuZmluZCB7IHxjfCBjWzpuYW1lXSA9PSBjb21wb25lbnRfbmFtZSAmJiBjWzpjdXN0b21dIH0KICAgICAgCiAgICAgIGlmIGNvbXBvbmVudF90b19kZWxldGUKICAgICAgICAjINit2LDZgSDZhdmE2YEgU0tQCiAgICAgICAgRmlsZS5kZWxldGUoY29tcG9uZW50X3RvX2RlbGV0ZVs6dXJsXSkgaWYgRmlsZS5leGlzdD8oY29tcG9uZW50X3RvX2RlbGV0ZVs6dXJsXSkKICAgICAgICAKICAgICAgICAjINit2LDZgSDYp9mE2LXZiNix2KkKICAgICAgICBpZiBjb21wb25lbnRfdG9fZGVsZXRlWzppbWFnZV0gJiYgRmlsZS5leGlzdD8oY29tcG9uZW50X3RvX2RlbGV0ZVs6aW1hZ2VdKQogICAgICAgICAgRmlsZS5kZWxldGUoY29tcG9uZW50X3RvX2RlbGV0ZVs6aW1hZ2VdKQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgICMg2K3YsNmBINmF2YYg2KfZhNmC2KfYptmF2KkKICAgICAgICBjdXJyZW50X2NvbXBvbmVudHMuZGVsZXRlKGNvbXBvbmVudF90b19kZWxldGUpCiAgICAgICAgc2F2ZV9jdXN0b21fY29tcG9uZW50cyhjdXJyZW50X2NvbXBvbmVudHMpCiAgICAgICAgdHJ1ZQogICAgICBlbHNlCiAgICAgICAgZmFsc2UKICAgICAgZW5kCiAgICByZXNjdWUgPT4gZQogICAgICBmYWxzZQogICAgZW5kCiAgZW5kCgogICMgPT09PT09PT09PSDYo9iv2KfYqSDYqtiq2KjYuSDYp9mE2YXYp9mI2LMg2LnZhtivINin2YTYpdiv2LHYp9isID09PT09PT09PT0KICBjbGFzcyBDb21wb25lbnRQbGFjZXIKICAgIGRlZiBpbml0aWFsaXplKGRlZmluaXRpb24sIG5hbWUpCiAgICAgIEBkZWZpbml0aW9uID0gZGVmaW5pdGlvbgogICAgICBAbmFtZSA9IG5hbWUKICAgICAgQGlwID0gU2tldGNodXA6OklucHV0UG9pbnQubmV3CiAgICBlbmQKCiAgICBkZWYgb25Nb3VzZU1vdmUoZmxhZ3MsIHgsIHksIHZpZXcpCiAgICAgIEBpcC5waWNrKHZpZXcsIHgsIHkpCiAgICAgIHZpZXcuaW52YWxpZGF0ZQogICAgZW5kCgogICAgZGVmIGRyYXcodmlldykKICAgICAgcmV0dXJuIHVubGVzcyBAaXAudmFsaWQ/CiAgICAgIHRyID0gR2VvbTo6VHJhbnNmb3JtYXRpb24ubmV3KEBpcC5wb3NpdGlvbikKICAgICAgdmlldy5kcmF3KEdMX0xJTkVfU1RSSVAsIFtAaXAucG9zaXRpb25dKQogICAgICBiZWdpbgogICAgICAgIHB0cyA9IEBkZWZpbml0aW9uLmJvdW5kcy5jb3JuZXIoMC4uNykubWFwIHsgfHB0fCBwdC50cmFuc2Zvcm0odHIpIH0KICAgICAgICB2aWV3LmRyYXcoR0xfUE9MWUdPTiwgcHRzKQogICAgICByZXNjdWUKICAgICAgZW5kCiAgICBlbmQKCiAgICBkZWYgb25MQnV0dG9uRG93bihmbGFncywgeCwgeSwgdmlldykKICAgICAgaWYgQGlwLnZhbGlkPwogICAgICAgIHRyID0gR2VvbTo6VHJhbnNmb3JtYXRpb24ubmV3KEBpcC5wb3NpdGlvbikKICAgICAgICBpbnN0YW5jZSA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5lbnRpdGllcy5hZGRfaW5zdGFuY2UoQGRlZmluaXRpb24sIHRyKQogICAgICAgIFNrZXRjaHVwLmFjdGl2ZV9tb2RlbC5zZWxlY3Rpb24uY2xlYXIKICAgICAgICBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuc2VsZWN0aW9uLmFkZChpbnN0YW5jZSkKICAgICAgICBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwudG9vbHMucG9wX3Rvb2wKICAgICAgICBTa2V0Y2h1cC5zZW5kX2FjdGlvbigic2VsZWN0TW92ZVRvb2w6IikKICAgICAgZW5kCiAgICBlbmQKICBlbmQKCiAgIyA9PT09PT0g2YbYuNin2YUg2KfZhNiq2K3ZgtmCINmI2KfZhNiq2LPYrNmK2YQgPT09PT09CiAgZGVmIHNlbGYuc2hvd19sb2dpbl9kaWFsb2cKICAgIGRsZyA9IFVJOjpIdG1sRGlhbG9nLm5ldyh7CiAgICAgIDpkaWFsb2dfdGl0bGUgPT4gItiq2LPYrNmK2YQg2KfZhNiv2K7ZiNmEIC0g2YXZg9iq2KjYqSBNSERFU0lHTiIsCiAgICAgIDpwcmVmZXJlbmNlc19rZXkgPT4gIm1oZGVzaWduX2xvZ2luIiwKICAgICAgOnNjcm9sbGFibGUgPT4gZmFsc2UsCiAgICAgIDpyZXNpemFibGUgPT4gZmFsc2UsCiAgICAgIDp3aWR0aCA9PiA0MDAsCiAgICAgIDpoZWlnaHQgPT4gMzUwCiAgICB9KQoKICAgIGh0bWwgPSA8PC1IVE1MCiAgICA8aHRtbD48aGVhZD4KICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVRhamF3YWw6d2dodEA0MDA7NzAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgICAgPHN0eWxlPgogICAgICAgIGJvZHkge2ZvbnQtZmFtaWx5OidUYWphd2FsJyxzYW5zLXNlcmlmO21hcmdpbjowO3BhZGRpbmc6MDtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxMzVkZWcsIzY2N2VlYSwjNzY0YmEyKTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7bWluLWhlaWdodDoxMDB2aDtkaXJlY3Rpb246cnRsO30KICAgICAgICAubG9naW4tY29udGFpbmVyIHtiYWNrZ3JvdW5kOndoaXRlO3BhZGRpbmc6NDBweDtib3JkZXItcmFkaXVzOjE1cHg7Ym94LXNoYWRvdzowIDE1cHggMzVweCByZ2JhKDAsMCwwLDAuMSk7d2lkdGg6MzIwcHg7dGV4dC1hbGlnbjpjZW50ZXI7fQogICAgICAgIC5sb2dvIHt3aWR0aDo4MHB4O2hlaWdodDo4MHB4O2JvcmRlci1yYWRpdXM6NTAlO21hcmdpbi1ib3R0b206MjBweDt9CiAgICAgICAgaDIge2NvbG9yOiMzMzM7bWFyZ2luLWJvdHRvbToxMHB4O30KICAgICAgICAuc3VidGl0bGUge2NvbG9yOiM2NjY7bWFyZ2luLWJvdHRvbTozMHB4O2ZvbnQtc2l6ZToxNHB4O30KICAgICAgICAuZm9ybS1ncm91cCB7bWFyZ2luLWJvdHRvbToyMHB4O3RleHQtYWxpZ246cmlnaHQ7fQogICAgICAgIGxhYmVsIHtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206OHB4O2NvbG9yOiMzMzM7Zm9udC13ZWlnaHQ6Ym9sZDt9CiAgICAgICAgaW5wdXQge3dpZHRoOjEwMCU7cGFkZGluZzoxMnB4O2JvcmRlcjoycHggc29saWQgI2UxZTFlMTtib3JkZXItcmFkaXVzOjhweDtmb250LXNpemU6MTRweDtib3gtc2l6aW5nOmJvcmRlci1ib3g7dHJhbnNpdGlvbjpib3JkZXItY29sb3IgMC4zczt9CiAgICAgICAgaW5wdXQ6Zm9jdXMge2JvcmRlci1jb2xvcjojNjY3ZWVhO291dGxpbmU6bm9uZTt9CiAgICAgICAgLmxvZ2luLWJ0biB7d2lkdGg6MTAwJTtwYWRkaW5nOjEycHg7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCM0Q0FGNTAsIzQ1YTA0OSk7Y29sb3I6d2hpdGU7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo4cHg7Zm9udC1zaXplOjE2cHg7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjphbGwgMC4zczttYXJnaW4tdG9wOjEwcHg7fQogICAgICAgIC5sb2dpbi1idG46aG92ZXIge3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0ycHgpO2JveC1zaGFkb3c6MCA1cHggMTVweCByZ2JhKDc2LDE3NSw4MCwwLjMpO30KICAgICAgICAubG9naW4tYnRuOmRpc2FibGVkIHtiYWNrZ3JvdW5kOiNjY2M7Y3Vyc29yOm5vdC1hbGxvd2VkO3RyYW5zZm9ybTpub25lO2JveC1zaGFkb3c6bm9uZTt9CiAgICAgICAgLm1lc3NhZ2Uge21hcmdpbi10b3A6MTVweDtwYWRkaW5nOjEwcHg7Ym9yZGVyLXJhZGl1czo1cHg7ZGlzcGxheTpub25lO30KICAgICAgICAuc3VjY2VzcyB7YmFja2dyb3VuZDojZDRlZGRhO2NvbG9yOiMxNTU3MjQ7Ym9yZGVyOjFweCBzb2xpZCAjYzNlNmNiO30KICAgICAgICAuZXJyb3Ige2JhY2tncm91bmQ6I2Y4ZDdkYTtjb2xvcjojNzIxYzI0O2JvcmRlcjoxcHggc29saWQgI2Y1YzZjYjt9CiAgICAgICAgLmZvb3RlciB7bWFyZ2luLXRvcDoyMHB4O2NvbG9yOiM2NjY7Zm9udC1zaXplOjEycHg7fQogICAgICA8L3N0eWxlPgogICAgPC9oZWFkPgogICAgPGJvZHk+CiAgICAgIDxkaXYgY2xhc3M9ImxvZ2luLWNvbnRhaW5lciI+CiAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vaS5pYmIuY28vVzR5N2NERlgvY3JvcHBlZC1jaXJjbGUtaW1hZ2UucG5nIiBhbHQ9IkxvZ28iIGNsYXNzPSJsb2dvIj4KICAgICAgICA8aDI+2KrYs9is2YrZhCDYp9mE2K/YrtmI2YQ8L2gyPgogICAgICAgIDxkaXYgY2xhc3M9InN1YnRpdGxlIj7Yo9iv2K7ZhCDYqNmK2KfZhtin2KrZgyDZhNmE2YjYtdmI2YQg2KXZhNmJINmF2YPYqtio2KkgTUhERVNJR048L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgIDxsYWJlbD7wn5OnINin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZijwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0iZW1haWwiIGlkPSJlbWFpbCIgcGxhY2Vob2xkZXI9InBvbGVzMTEyMkBnbWFpbC5jb20iPgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgPGxhYmVsPvCflJEg2YPZhNmF2Kkg2KfZhNmF2LHZiNixPC9sYWJlbD4KICAgICAgICAgIDxpbnB1dCB0eXBlPSJwYXNzd29yZCIgaWQ9InBhc3N3b3JkIiBwbGFjZWhvbGRlcj0i2KPYr9iu2YQg2YPZhNmF2Kkg2KfZhNmF2LHZiNixIj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8YnV0dG9uIGNsYXNzPSJsb2dpbi1idG4iIG9uY2xpY2s9ImxvZ2luKCkiPvCfmoAg2KrYs9is2YrZhCDYp9mE2K/YrtmI2YQ8L2J1dHRvbj4KICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJtZXNzYWdlIiBjbGFzcz0ibWVzc2FnZSI+PC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0iZm9vdGVyIj4KICAgICAgICAgINiq2YUg2KfZhNiq2LfZiNmK2LEg2KjZiNin2LPYt9ipINmFLiDZhdix2YjYp9mGINi52KfYr9mEPGJyPgogICAgICAgICAg2YTZhNiq2YjYp9i12YQ6IDAxMjA0Mjc5NjA2CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPHNjcmlwdD4KICAgICAgICBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgICAgIGNvbnN0IGVtYWlsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJykudmFsdWU7CiAgICAgICAgICBjb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLnZhbHVlOwogICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXNzYWdlJyk7CiAgICAgICAgICAKICAgICAgICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkKSB7CiAgICAgICAgICAgIHNob3dNZXNzYWdlKCfimqDvuI8g2YrYsdis2Ykg2YXZhNihINis2YXZiti5INin2YTYrdmC2YjZhCcsICdlcnJvcicpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAKICAgICAgICAgIC8vINiq2LnYt9mK2YQg2KfZhNiy2LEg2KPYq9mG2KfYoSDYp9mE2KrYrdmC2YIKICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbi1idG4nKTsKICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICBidG4uaW5uZXJIVE1MID0gJ+KPsyDYrNin2LHZiiDYp9mE2KrYrdmC2YIuLi4nOwogICAgICAgICAgCiAgICAgICAgICBza2V0Y2h1cC52YWxpZGF0ZUxvZ2luKGVtYWlsLCBwYXNzd29yZCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHNob3dNZXNzYWdlKHRleHQsIHR5cGUpIHsKICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZScpOwogICAgICAgICAgbWVzc2FnZS5pbm5lckhUTUwgPSB0ZXh0OwogICAgICAgICAgbWVzc2FnZS5jbGFzc05hbWUgPSAnbWVzc2FnZSAnICsgdHlwZTsKICAgICAgICAgIG1lc3NhZ2Uuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vINin2YTYs9mF2KfYrSDYqNin2YTYtti62Lcg2LnZhNmJIEVudGVyCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHsKICAgICAgICAgICAgbG9naW4oKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgPC9zY3JpcHQ+CiAgICA8L2JvZHk+PC9odG1sPgogICAgSFRNTAoKICAgIGRsZy5zZXRfaHRtbChodG1sKQoKICAgIGRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJ2YWxpZGF0ZUxvZ2luIikgZG8gfF8sIGVtYWlsLCBwYXNzd29yZHwKICAgICAgdmFsaWRhdGlvbl9yZXN1bHQgPSB2YWxpZGF0ZV91c2VyKGVtYWlsLCBwYXNzd29yZCkKICAgICAgCiAgICAgIGlmIHZhbGlkYXRpb25fcmVzdWx0WzpzdWNjZXNzXQogICAgICAgICMg2K3Zgdi4INio2YrYp9mG2KfYqiDYp9mE2YXYs9iq2K7Yr9mFCiAgICAgICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImVtYWlsIiwgZW1haWwpCiAgICAgICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgInBhc3N3b3JkIiwgcGFzc3dvcmQpCiAgICAgICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImFjdGl2YXRlZCIsIHRydWUpCiAgICAgICAgCiAgICAgICAgZGxnLmNsb3NlCiAgICAgICAgVUkubWVzc2FnZWJveCgi8J+OiSAiICsgdmFsaWRhdGlvbl9yZXN1bHRbOm1lc3NhZ2VdICsgIlxuXG7YqtmC2K/YsSDYqti02KrYutmEINmK2Kcg2YfZhtiv2LPYqSEg8J+agCIpCiAgICAgICAgc2hvd19saWJyYXJ5CiAgICAgIGVsc2UKICAgICAgICBkbGcuZXhlY3V0ZV9zY3JpcHQoInNob3dNZXNzYWdlKCcje3ZhbGlkYXRpb25fcmVzdWx0WzptZXNzYWdlXX0nLCAnZXJyb3InKSIpCiAgICAgICAgZGxnLmV4ZWN1dGVfc2NyaXB0KCJkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW4tYnRuJykuZGlzYWJsZWQgPSBmYWxzZSIpCiAgICAgICAgZGxnLmV4ZWN1dGVfc2NyaXB0KCJkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW4tYnRuJykuaW5uZXJIVE1MID0gJ/CfmoAg2KrYs9is2YrZhCDYp9mE2K/YrtmI2YQnIikKICAgICAgZW5kCiAgICBlbmQKCiAgICBkbGcuc2hvdwogIGVuZAoKICAjID09PT09PSDYp9mE2KrYrdmC2YIg2KXYsNinINmD2KfZhiDYp9mE2YXYs9iq2K7Yr9mFINmF2YHYudmEID09PT09PQogIGRlZiBzZWxmLmFjdGl2YXRlZD8KICAgIFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImFjdGl2YXRlZCIsIGZhbHNlKQogIGVuZAoKICAjID09PT09PSDYr9in2YTYqSDZhNi52LHYtiDZiNin2KzZh9ipINix2YHYuSDYp9mE2YXZg9mI2YYgPT09PT09CiAgZGVmIHNlbGYuc2hvd191cGxvYWRfZGlhbG9nCiAgICAjINin2YTYqtit2YLZgiDZhdmGINin2YTYqtiz2KzZitmEINij2YjZhNin2YsKICAgIHVubGVzcyBhY3RpdmF0ZWQ/CiAgICAgIHNob3dfbG9naW5fZGlhbG9nCiAgICAgIHJldHVybgogICAgZW5kCgogICAgZGxnID0gVUk6Okh0bWxEaWFsb2cubmV3KHsKICAgICAgOmRpYWxvZ190aXRsZSA9PiAi8J+TpCDYsdmB2Lkg2YXZg9mI2YYg2KzYr9mK2K8gLSDZhdmD2KrYqNipIE1IREVTSUdOIiwKICAgICAgOnByZWZlcmVuY2VzX2tleSA9PiAibWhkZXNpZ25fdXBsb2FkIiwKICAgICAgOnNjcm9sbGFibGUgPT4gdHJ1ZSwKICAgICAgOnJlc2l6YWJsZSA9PiB0cnVlLAogICAgICA6d2lkdGggPT4gODAwLAogICAgICA6aGVpZ2h0ID0+IDcwMAogICAgfSkKCiAgICAjINin2YTYrdi12YjZhCDYudmE2Ykg2KfZhNiq2LXZhtmK2YHYp9iqINin2YTYrdin2YTZitipCiAgICBhbGxfY29tcG9uZW50cyA9IGxvYWRfY29tcG9uZW50c19kYXRhCiAgICBjYXRlZ29yaWVzID0gYWxsX2NvbXBvbmVudHMubWFwIHsgfGN8IGNbOmNhdGVnb3J5XSB9LnVuaXEKCiAgICBodG1sID0gPDwtSFRNTAogICAgPGh0bWw+PGhlYWQ+CiAgICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1UYWphd2FsOndnaHRANDAwOzcwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CiAgICAgIDxzdHlsZT4KICAgICAgICBib2R5IHtmb250LWZhbWlseTonVGFqYXdhbCcsc2Fucy1zZXJpZjttYXJnaW46MDtwYWRkaW5nOjMwcHg7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCM2NjdlZWEsIzc2NGJhMik7ZGlyZWN0aW9uOnJ0bDt9CiAgICAgICAgLmNvbnRhaW5lciB7bWF4LXdpZHRoOjcwMHB4O21hcmdpbjowIGF1dG87YmFja2dyb3VuZDp3aGl0ZTtib3JkZXItcmFkaXVzOjIwcHg7cGFkZGluZzozMHB4O2JveC1zaGFkb3c6MCAyMHB4IDQwcHggcmdiYSgwLDAsMCwwLjEpO30KICAgICAgICAuaGVhZGVyIHt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tYm90dG9tOjMwcHg7fQogICAgICAgIC5oZWFkZXIgaDEge2NvbG9yOiMzMzM7bWFyZ2luLWJvdHRvbToxMHB4O2ZvbnQtc2l6ZToyOHB4O30KICAgICAgICAuaGVhZGVyIHAge2NvbG9yOiM2NjY7Zm9udC1zaXplOjE2cHg7fQogICAgICAgIC5mb3JtLWdyb3VwIHttYXJnaW4tYm90dG9tOjI1cHg7fQogICAgICAgIC5mb3JtLWdyb3VwIGxhYmVsIHtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206OHB4O2ZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6IzMzMztmb250LXNpemU6MTZweDt9CiAgICAgICAgLmZvcm0tZ3JvdXAgaW5wdXQsIC5mb3JtLWdyb3VwIHNlbGVjdCwgLmZvcm0tZ3JvdXAgdGV4dGFyZWEge3dpZHRoOjEwMCU7cGFkZGluZzoxMnB4IDE1cHg7Ym9yZGVyOjJweCBzb2xpZCAjZTFlMWUxO2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6MTVweDt0cmFuc2l0aW9uOmFsbCAwLjNzO2JveC1zaXppbmc6Ym9yZGVyLWJveDt9CiAgICAgICAgLmZvcm0tZ3JvdXAgaW5wdXQ6Zm9jdXMsIC5mb3JtLWdyb3VwIHNlbGVjdDpmb2N1cywgLmZvcm0tZ3JvdXAgdGV4dGFyZWE6Zm9jdXMge2JvcmRlci1jb2xvcjojNjY3ZWVhO291dGxpbmU6bm9uZTtib3gtc2hhZG93OjAgMCAwIDNweCByZ2JhKDEwMiwxMjYsMjM0LDAuMSk7fQogICAgICAgIC5mb3JtLWdyb3VwIHRleHRhcmVhIHtoZWlnaHQ6ODBweDtyZXNpemU6dmVydGljYWw7fQogICAgICAgIC51cGxvYWQtc2VjdGlvbiB7Ym9yZGVyOjJweCBkYXNoZWQgI2RkZDtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoyNXB4O3RleHQtYWxpZ246Y2VudGVyO21hcmdpbjoyMHB4IDA7dHJhbnNpdGlvbjphbGwgMC4zczt9CiAgICAgICAgLnVwbG9hZC1zZWN0aW9uOmhvdmVyIHtib3JkZXItY29sb3I6IzY2N2VlYTtiYWNrZ3JvdW5kOiNmOGY5ZmY7fQogICAgICAgIC51cGxvYWQtc2VjdGlvbi5kcmFnb3ZlciB7Ym9yZGVyLWNvbG9yOiM2NjdlZWE7YmFja2dyb3VuZDojZWVmMmZmO30KICAgICAgICAudXBsb2FkLWljb24ge2ZvbnQtc2l6ZTo0OHB4O2NvbG9yOiM2NjdlZWE7bWFyZ2luLWJvdHRvbToxNXB4O30KICAgICAgICAudXBsb2FkLWJ0biB7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzoxMnB4IDI1cHg7YmFja2dyb3VuZDojNjY3ZWVhO2NvbG9yOndoaXRlO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6OHB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxNnB4O3RyYW5zaXRpb246YWxsIDAuM3M7bWFyZ2luOjVweDt9CiAgICAgICAgLnVwbG9hZC1idG46aG92ZXIge2JhY2tncm91bmQ6IzVhNmZkODt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMnB4KTt9CiAgICAgICAgLmZpbGUtaW5mbyB7bWFyZ2luLXRvcDoxNXB4O3BhZGRpbmc6MTBweDtiYWNrZ3JvdW5kOiNmOGY5ZmE7Ym9yZGVyLXJhZGl1czo1cHg7ZGlzcGxheTpub25lO30KICAgICAgICAucHJldmlldyB7bWF4LXdpZHRoOjIwMHB4O21heC1oZWlnaHQ6MTUwcHg7Ym9yZGVyLXJhZGl1czo4cHg7bWFyZ2luLXRvcDoxMHB4O2Rpc3BsYXk6bm9uZTt9CiAgICAgICAgLnRhYnMge2Rpc3BsYXk6ZmxleDttYXJnaW4tYm90dG9tOjIwcHg7Ym9yZGVyLWJvdHRvbToycHggc29saWQgI2UxZTFlMTt9CiAgICAgICAgLnRhYiB7cGFkZGluZzoxMnB4IDIwcHg7Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyLWJvdHRvbTozcHggc29saWQgdHJhbnNwYXJlbnQ7dHJhbnNpdGlvbjphbGwgMC4zczt9CiAgICAgICAgLnRhYi5hY3RpdmUge2JvcmRlci1ib3R0b20tY29sb3I6IzY2N2VlYTtjb2xvcjojNjY3ZWVhO2ZvbnQtd2VpZ2h0OmJvbGQ7fQogICAgICAgIC50YWItY29udGVudCB7ZGlzcGxheTpub25lO30KICAgICAgICAudGFiLWNvbnRlbnQuYWN0aXZlIHtkaXNwbGF5OmJsb2NrO30KICAgICAgICAuc3VibWl0LWJ0biB7d2lkdGg6MTAwJTtwYWRkaW5nOjE1cHg7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCM2NjdlZWEsIzc2NGJhMik7Y29sb3I6d2hpdGU7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtc2l6ZToxOHB4O2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIDAuM3M7bWFyZ2luLXRvcDoyMHB4O30KICAgICAgICAuc3VibWl0LWJ0bjpob3ZlciB7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTJweCk7Ym94LXNoYWRvdzowIDEwcHggMjBweCByZ2JhKDEwMiwxMjYsMjM0LDAuMyk7fQogICAgICAgIC51cmwtaW5wdXQge2Rpc3BsYXk6ZmxleDtnYXA6MTBweDt9CiAgICAgICAgLnVybC1pbnB1dCBpbnB1dCB7ZmxleDoxO30KICAgICAgICAuY2F0ZWdvcnktc2VsZWN0IHtkaXNwbGF5OmZsZXg7Z2FwOjEwcHg7YWxpZ24taXRlbXM6Y2VudGVyO30KICAgICAgICAuY2F0ZWdvcnktc2VsZWN0IHNlbGVjdCB7ZmxleDoxO30KICAgICAgICAubmV3LWNhdGVnb3J5IHtkaXNwbGF5Om5vbmU7bWFyZ2luLXRvcDoxMHB4O30KICAgICAgPC9zdHlsZT4KICAgIDwvaGVhZD4KICAgIDxib2R5PgogICAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlciI+CiAgICAgICAgICA8aDE+8J+TpCDYsdmB2Lkg2YXZg9mI2YYg2KzYr9mK2K88L2gxPgogICAgICAgICAgPHA+2KPYttmBINmF2YPZiNmG2KfYqtmDINin2YTYrtin2LXYqSDYpdmE2Ykg2YXZg9iq2KjYqSBNSERFU0lHTjwvcD4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICA8bGFiZWw+8J+UpCDYp9iz2YUg2KfZhNmF2YPZiNmGPC9sYWJlbD4KICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY29tcG9uZW50TmFtZSIgcGxhY2Vob2xkZXI9Itij2K/YrtmEINin2LPZhSDZiNin2LbYrSDZhNmE2YXZg9mI2YYuLi4iPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgIDxsYWJlbD7wn5OBINin2YTYqti12YbZitmBPC9sYWJlbD4KICAgICAgICAgIDxkaXYgY2xhc3M9ImNhdGVnb3J5LXNlbGVjdCI+CiAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImNvbXBvbmVudENhdGVnb3J5IiBvbmNoYW5nZT0idG9nZ2xlTmV3Q2F0ZWdvcnkoKSI+CiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj7Yp9iu2KrYsSDYqti12YbZitmBLi4uPC9vcHRpb24+CiAgICAgICAgICAgICAgI3tjYXRlZ29yaWVzLm1hcCB7IHxjYXR8ICI8b3B0aW9uIHZhbHVlPScje2NhdH0nPiN7Y2F0fTwvb3B0aW9uPiIgfS5qb2lufQogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im5ldyI+4p6VINiq2LXZhtmK2YEg2KzYr9mK2K88L29wdGlvbj4KICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgaWQ9Im5ld0NhdGVnb3J5IiBjbGFzcz0ibmV3LWNhdGVnb3J5Ij4KICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJuZXdDYXRlZ29yeU5hbWUiIHBsYWNlaG9sZGVyPSLYo9iv2K7ZhCDYp9iz2YUg2KfZhNiq2LXZhtmK2YEg2KfZhNis2K/ZitivLi4uIj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgIDxsYWJlbD7wn5OdINin2YTZiNi12YE8L2xhYmVsPgogICAgICAgICAgPHRleHRhcmVhIGlkPSJjb21wb25lbnREZXNjcmlwdGlvbiIgcGxhY2Vob2xkZXI9ItmI2LXZgSDZhdiu2KrYtdixINmE2YTZhdmD2YjZhi4uLiI+PC90ZXh0YXJlYT4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBjbGFzcz0idGFicyI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJ0YWIgYWN0aXZlIiBvbmNsaWNrPSJzaG93VGFiKCdza3BUYWInKSI+8J+TgSDZhdmE2YEgU0tQPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJ0YWIiIG9uY2xpY2s9InNob3dUYWIoJ2ltYWdlVGFiJykiPvCflrzvuI8g2KfZhNi12YjYsdipPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgaWQ9InNrcFRhYiIgY2xhc3M9InRhYi1jb250ZW50IGFjdGl2ZSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJ1cGxvYWQtc2VjdGlvbiIgaWQ9InNrcFVwbG9hZFNlY3Rpb24iPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ1cGxvYWQtaWNvbiI+8J+TgTwvZGl2PgogICAgICAgICAgICA8aDM+2LHZgdi5INmF2YTZgSBTS1A8L2gzPgogICAgICAgICAgICA8cD7Yp9iz2K3YqCDZiNij2YHZhNiqINmF2YTZgSBTS1Ag2YfZhtinINij2Ygg2KfZhtmC2LEg2YTZhNin2K7YqtmK2KfYsTwvcD4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0idXBsb2FkLWJ0biIgb25jbGljaz0ic2VsZWN0U2twRmlsZSgpIj7Yp9iu2KrYsSDZhdmE2YEgU0tQPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InVwbG9hZC1idG4iIG9uY2xpY2s9InNob3dVcmxJbnB1dCgnc2twJykiPtij2Ygg2KPYr9iu2YQg2LHYp9io2Lc8L2J1dHRvbj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmlsZS1pbmZvIiBpZD0ic2twRmlsZUluZm8iPjwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICAKICAgICAgICAgIDxkaXYgaWQ9InNrcFVybElucHV0IiBjbGFzcz0idXJsLWlucHV0IiBzdHlsZT0iZGlzcGxheTpub25lOyBtYXJnaW4tdG9wOjE1cHg7Ij4KICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJza3BVcmwiIHBsYWNlaG9sZGVyPSJodHRwczovL2V4YW1wbGUuY29tL2NvbXBvbmVudC5za3AiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ1cGxvYWQtYnRuIiBvbmNsaWNrPSJoaWRlVXJsSW5wdXQoJ3NrcCcpIj7YpdmE2LrYp9ihPC9idXR0b24+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBpZD0iaW1hZ2VUYWIiIGNsYXNzPSJ0YWItY29udGVudCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJ1cGxvYWQtc2VjdGlvbiIgaWQ9ImltYWdlVXBsb2FkU2VjdGlvbiI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InVwbG9hZC1pY29uIj7wn5a877iPPC9kaXY+CiAgICAgICAgICAgIDxoMz7YsdmB2Lkg2LXZiNix2Kkg2KfZhNmF2LnYp9mK2YbYqTwvaDM+CiAgICAgICAgICAgIDxwPtin2LPYrdioINmI2KPZgdmE2Kog2KfZhNi12YjYsdipINmH2YbYpyDYo9mIINin2YbZgtixINmE2YTYp9iu2KrZitin2LE8L3A+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InVwbG9hZC1idG4iIG9uY2xpY2s9InNlbGVjdEltYWdlRmlsZSgpIj7Yp9iu2KrYsSDYtdmI2LHYqTwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ1cGxvYWQtYnRuIiBvbmNsaWNrPSJzaG93VXJsSW5wdXQoJ2ltYWdlJykiPtij2Ygg2KPYr9iu2YQg2LHYp9io2Lc8L2J1dHRvbj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmlsZS1pbmZvIiBpZD0iaW1hZ2VGaWxlSW5mbyI+PC9kaXY+CiAgICAgICAgICAgIDxpbWcgaWQ9ImltYWdlUHJldmlldyIgY2xhc3M9InByZXZpZXciPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICAKICAgICAgICAgIDxkaXYgaWQ9ImltYWdlVXJsSW5wdXQiIGNsYXNzPSJ1cmwtaW5wdXQiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IG1hcmdpbi10b3A6MTVweDsiPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImltYWdlVXJsIiBwbGFjZWhvbGRlcj0iaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5wbmciPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ1cGxvYWQtYnRuIiBvbmNsaWNrPSJoaWRlVXJsSW5wdXQoJ2ltYWdlJykiPtil2YTYutin2KE8L2J1dHRvbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8YnV0dG9uIGNsYXNzPSJzdWJtaXQtYnRuIiBvbmNsaWNrPSJzdWJtaXRGb3JtKCkiPvCfmoAg2LHZgdi5INin2YTZhdmD2YjZhjwvYnV0dG9uPgogICAgICA8L2Rpdj4KCiAgICAgIDxzY3JpcHQ+CiAgICAgICAgbGV0IHNrcEZpbGUgPSBudWxsOwogICAgICAgIGxldCBpbWFnZUZpbGUgPSBudWxsOwogICAgICAgIGxldCBza3BVcmwgPSAnJzsKICAgICAgICBsZXQgaW1hZ2VVcmwgPSAnJzsKCiAgICAgICAgZnVuY3Rpb24gc2hvd1RhYih0YWJOYW1lKSB7CiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiLWNvbnRlbnQnKS5mb3JFYWNoKHRhYiA9PiB0YWIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYicpLmZvckVhY2godGFiID0+IHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWJOYW1lKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHRvZ2dsZU5ld0NhdGVnb3J5KCkgewogICAgICAgICAgY29uc3QgY2F0ZWdvcnlTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tcG9uZW50Q2F0ZWdvcnknKTsKICAgICAgICAgIGNvbnN0IG5ld0NhdGVnb3J5RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ld0NhdGVnb3J5Jyk7CiAgICAgICAgICBuZXdDYXRlZ29yeURpdi5zdHlsZS5kaXNwbGF5ID0gY2F0ZWdvcnlTZWxlY3QudmFsdWUgPT09ICduZXcnID8gJ2Jsb2NrJyA6ICdub25lJzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNlbGVjdFNrcEZpbGUoKSB7CiAgICAgICAgICBza2V0Y2h1cC5zZWxlY3RTa3BGaWxlKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzZWxlY3RJbWFnZUZpbGUoKSB7CiAgICAgICAgICBza2V0Y2h1cC5zZWxlY3RJbWFnZUZpbGUoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNob3dVcmxJbnB1dCh0eXBlKSB7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0eXBlICsgJ1VybElucHV0Jykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHR5cGUgKyAnVXBsb2FkU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBoaWRlVXJsSW5wdXQodHlwZSkgewogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodHlwZSArICdVcmxJbnB1dCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0eXBlICsgJ1VwbG9hZFNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVNrcEZpbGVJbmZvKG5hbWUsIHBhdGgpIHsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdza3BGaWxlSW5mbycpLmlubmVySFRNTCA9IGDinIUgPHN0cm9uZz4ke25hbWV9PC9zdHJvbmc+PGJyPjxzbWFsbD4ke3BhdGh9PC9zbWFsbD5gOwogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NrcEZpbGVJbmZvJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVJbWFnZUZpbGVJbmZvKG5hbWUsIHBhdGgsIGRhdGFVcmwpIHsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZUZpbGVJbmZvJykuaW5uZXJIVE1MID0gYOKchSA8c3Ryb25nPiR7bmFtZX08L3N0cm9uZz48YnI+PHNtYWxsPiR7cGF0aH08L3NtYWxsPmA7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VGaWxlSW5mbycpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgaWYgKGRhdGFVcmwpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlUHJldmlldycpLnNyYyA9IGRhdGFVcmw7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZVByZXZpZXcnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVNrcFVybCgpIHsKICAgICAgICAgIHNrcFVybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdza3BVcmwnKS52YWx1ZTsKICAgICAgICAgIGlmIChza3BVcmwpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NrcEZpbGVJbmZvJykuaW5uZXJIVE1MID0gYOKchSA8c3Ryb25nPtix2KfYqNi3IFNLUDwvc3Ryb25nPjxicj48c21hbGw+JHtza3BVcmx9PC9zbWFsbD5gOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2twRmlsZUluZm8nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUltYWdlVXJsKCkgewogICAgICAgICAgaW1hZ2VVcmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VVcmwnKS52YWx1ZTsKICAgICAgICAgIGlmIChpbWFnZVVybCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VGaWxlSW5mbycpLmlubmVySFRNTCA9IGDinIUgPHN0cm9uZz7Ysdin2KjYtyDYp9mE2LXZiNix2Kk8L3N0cm9uZz48YnI+PHNtYWxsPiR7aW1hZ2VVcmx9PC9zbWFsbD5gOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VGaWxlSW5mbycpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VQcmV2aWV3Jykuc3JjID0gaW1hZ2VVcmw7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZVByZXZpZXcnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXBvbmVudE5hbWUnKS52YWx1ZTsKICAgICAgICAgIGxldCBjYXRlZ29yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wb25lbnRDYXRlZ29yeScpLnZhbHVlOwogICAgICAgICAgY29uc3QgbmV3Q2F0ZWdvcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3Q2F0ZWdvcnlOYW1lJykudmFsdWU7CiAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wb25lbnREZXNjcmlwdGlvbicpLnZhbHVlOwoKICAgICAgICAgIGlmIChjYXRlZ29yeSA9PT0gJ25ldycpIHsKICAgICAgICAgICAgY2F0ZWdvcnkgPSBuZXdDYXRlZ29yeTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIW5hbWUgfHwgIWNhdGVnb3J5KSB7CiAgICAgICAgICAgIGFsZXJ0KCfimqDvuI8g2YrYsdis2Ykg2YXZhNihINis2YXZiti5INin2YTYrdmC2YjZhCDYp9mE2YXYt9mE2YjYqNipJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIXNrcEZpbGUgJiYgIXNrcFVybCkgewogICAgICAgICAgICBhbGVydCgn4pqg77iPINmK2LHYrNmJINil2LbYp9mB2Kkg2YXZhNmBIFNLUCDYo9mIINix2KfYqNi3Jyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWltYWdlRmlsZSAmJiAhaW1hZ2VVcmwpIHsKICAgICAgICAgICAgYWxlcnQoJ+KaoO+4jyDZitix2KzZiSDYpdi22KfZgdipINi12YjYsdipINij2Ygg2LHYp9io2Lcg2LXZiNix2KknKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IGNvbXBvbmVudERhdGEgPSB7CiAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSwKICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLAogICAgICAgICAgICBza3BfdHlwZTogc2twRmlsZSA/ICdmaWxlJyA6ICd1cmwnLAogICAgICAgICAgICBpbWFnZV90eXBlOiBpbWFnZUZpbGUgPyAnZmlsZScgOiAndXJsJwogICAgICAgICAgfTsKCiAgICAgICAgICBpZiAoc2twRmlsZSkgewogICAgICAgICAgICBjb21wb25lbnREYXRhLnNrcF9wYXRoID0gc2twRmlsZS5wYXRoOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29tcG9uZW50RGF0YS5za3BfdXJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NrcFVybCcpLnZhbHVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChpbWFnZUZpbGUpIHsKICAgICAgICAgICAgY29tcG9uZW50RGF0YS5pbWFnZV9wYXRoID0gaW1hZ2VGaWxlLnBhdGg7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb21wb25lbnREYXRhLmltYWdlX3VybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZVVybCcpLnZhbHVlOwogICAgICAgICAgfQoKICAgICAgICAgIHNrZXRjaHVwLnN1Ym1pdENvbXBvbmVudChKU09OLnN0cmluZ2lmeShjb21wb25lbnREYXRhKSk7CiAgICAgICAgfQoKICAgICAgICAvLyDYqtit2K/ZitirINin2YTYrdmC2YjZhCDYudmG2K8g2KfZhNmD2KrYp9io2KkKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2twVXJsJykuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGVTa3BVcmwpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZVVybCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlSW1hZ2VVcmwpOwoKICAgICAgICAvLyDYpdi52K/Yp9ivINiz2K3YqCDZiNil2YHZhNin2Kog2KfZhNmF2YTZgdin2KoKICAgICAgICBbJ3NrcFVwbG9hZFNlY3Rpb24nLCAnaW1hZ2VVcGxvYWRTZWN0aW9uJ10uZm9yRWFjaChzZWN0aW9uSWQgPT4gewogICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlY3Rpb25JZCk7CiAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBzZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2RyYWdvdmVyJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIAogICAgICAgICAgc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCAoKSA9PiB7CiAgICAgICAgICAgIHNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ292ZXInKTsKICAgICAgICAgIH0pOwogICAgICAgICAgCiAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCAoZSkgPT4gewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ292ZXInKTsKICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlczsKICAgICAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBpZiAoc2VjdGlvbklkID09PSAnc2twVXBsb2FkU2VjdGlvbicgJiYgZmlsZXNbMF0ubmFtZS50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcuc2twJykpIHsKICAgICAgICAgICAgICAgIHNrZXRjaHVwLmhhbmRsZURyb3BwZWRTa3BGaWxlKGZpbGVzWzBdLnBhdGgpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VjdGlvbklkID09PSAnaW1hZ2VVcGxvYWRTZWN0aW9uJyAmJiAvXC4oanBnfGpwZWd8cG5nfGdpZikkL2kudGVzdChmaWxlc1swXS5uYW1lKSkgewogICAgICAgICAgICAgICAgc2tldGNodXAuaGFuZGxlRHJvcHBlZEltYWdlRmlsZShmaWxlc1swXS5wYXRoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICA8L3NjcmlwdD4KICAgIDwvYm9keT48L2h0bWw+CiAgICBIVE1MCgogICAgZGxnLnNldF9odG1sKGh0bWwpCgogICAgIyDYpdi22KfZgdipIGNhbGxiYWNrcyDZhNmE2KrZgdin2LnZhCDZhdi5IFNrZXRjaFVwCiAgICBkbGcuYWRkX2FjdGlvbl9jYWxsYmFjaygic2VsZWN0U2twRmlsZSIpIGRvIHxffAogICAgICBza3BfcGF0aCA9IFVJLm9wZW5wYW5lbCgi2KfYrtiq2LEg2YXZhNmBIFNLUCIsICIiLCAiKi5za3AiKQogICAgICBpZiBza3BfcGF0aAogICAgICAgIGRsZy5leGVjdXRlX3NjcmlwdCgidXBkYXRlU2twRmlsZUluZm8oJyN7RmlsZS5iYXNlbmFtZShza3BfcGF0aCl9JywgJyN7c2twX3BhdGh9JykiKQogICAgICAgIGRsZy5leGVjdXRlX3NjcmlwdCgic2twRmlsZSA9IHtuYW1lOiAnI3tGaWxlLmJhc2VuYW1lKHNrcF9wYXRoKX0nLCBwYXRoOiAnI3tza3BfcGF0aH0nfSIpCiAgICAgIGVuZAogICAgZW5kCgogICAgZGxnLmFkZF9hY3Rpb25fY2FsbGJhY2soInNlbGVjdEltYWdlRmlsZSIpIGRvIHxffAogICAgICBpbWFnZV9wYXRoID0gVUkub3BlbnBhbmVsKCLYp9iu2KrYsSDYtdmI2LHYqSIsICIiLCAiKi5qcGc7Ki5qcGVnOyoucG5nOyouZ2lmIikKICAgICAgaWYgaW1hZ2VfcGF0aAogICAgICAgICMg2KrYrdmI2YrZhCDYp9mE2LXZiNix2Kkg2KXZhNmJIGJhc2U2NCDZhNmE2YXYudin2YrZhtipCiAgICAgICAgaW1hZ2VfZGF0YSA9IEJhc2U2NC5zdHJpY3RfZW5jb2RlNjQoRmlsZS5iaW5yZWFkKGltYWdlX3BhdGgpKQogICAgICAgIGRhdGFfdXJsID0gImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwje2ltYWdlX2RhdGF9IgogICAgICAgIGRsZy5leGVjdXRlX3NjcmlwdCgidXBkYXRlSW1hZ2VGaWxlSW5mbygnI3tGaWxlLmJhc2VuYW1lKGltYWdlX3BhdGgpfScsICcje2ltYWdlX3BhdGh9JywgJyN7ZGF0YV91cmx9JykiKQogICAgICAgIGRsZy5leGVjdXRlX3NjcmlwdCgiaW1hZ2VGaWxlID0ge25hbWU6ICcje0ZpbGUuYmFzZW5hbWUoaW1hZ2VfcGF0aCl9JywgcGF0aDogJyN7aW1hZ2VfcGF0aH0nfSIpCiAgICAgIGVuZAogICAgZW5kCgogICAgZGxnLmFkZF9hY3Rpb25fY2FsbGJhY2soImhhbmRsZURyb3BwZWRTa3BGaWxlIikgZG8gfF8sIGZpbGVfcGF0aHwKICAgICAgaWYgRmlsZS5leGlzdD8oZmlsZV9wYXRoKSAmJiBmaWxlX3BhdGguZG93bmNhc2UuZW5kX3dpdGg/KCcuc2twJykKICAgICAgICBkbGcuZXhlY3V0ZV9zY3JpcHQoInVwZGF0ZVNrcEZpbGVJbmZvKCcje0ZpbGUuYmFzZW5hbWUoZmlsZV9wYXRoKX0nLCAnI3tmaWxlX3BhdGh9JykiKQogICAgICAgIGRsZy5leGVjdXRlX3NjcmlwdCgic2twRmlsZSA9IHtuYW1lOiAnI3tGaWxlLmJhc2VuYW1lKGZpbGVfcGF0aCl9JywgcGF0aDogJyN7ZmlsZV9wYXRofSd9IikKICAgICAgZW5kCiAgICBlbmQKCiAgICBkbGcuYWRkX2FjdGlvbl9jYWxsYmFjaygiaGFuZGxlRHJvcHBlZEltYWdlRmlsZSIpIGRvIHxfLCBmaWxlX3BhdGh8CiAgICAgIGlmIEZpbGUuZXhpc3Q/KGZpbGVfcGF0aCkgJiYgZmlsZV9wYXRoLmRvd25jYXNlLmVuZF93aXRoPygnLmpwZycsICcuanBlZycsICcucG5nJywgJy5naWYnKQogICAgICAgIGltYWdlX2RhdGEgPSBCYXNlNjQuc3RyaWN0X2VuY29kZTY0KEZpbGUuYmlucmVhZChmaWxlX3BhdGgpKQogICAgICAgIGRhdGFfdXJsID0gImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwje2ltYWdlX2RhdGF9IgogICAgICAgIGRsZy5leGVjdXRlX3NjcmlwdCgidXBkYXRlSW1hZ2VGaWxlSW5mbygnI3tGaWxlLmJhc2VuYW1lKGZpbGVfcGF0aCl9JywgJyN7ZmlsZV9wYXRofScsICcje2RhdGFfdXJsfScpIikKICAgICAgICBkbGcuZXhlY3V0ZV9zY3JpcHQoImltYWdlRmlsZSA9IHtuYW1lOiAnI3tGaWxlLmJhc2VuYW1lKGZpbGVfcGF0aCl9JywgcGF0aDogJyN7ZmlsZV9wYXRofSd9IikKICAgICAgZW5kCiAgICBlbmQKCiAgICBkbGcuYWRkX2FjdGlvbl9jYWxsYmFjaygic3VibWl0Q29tcG9uZW50IikgZG8gfF8sIGNvbXBvbmVudF9qc29ufAogICAgICBjb21wb25lbnRfZGF0YSA9IEpTT04ucGFyc2UoY29tcG9uZW50X2pzb24sIHN5bWJvbGl6ZV9uYW1lczogdHJ1ZSkKICAgICAgCiAgICAgIGlmIGFkZF9jdXN0b21fY29tcG9uZW50KGNvbXBvbmVudF9kYXRhKQogICAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINix2YHYuSDYp9mE2YXZg9mI2YYgJyN7Y29tcG9uZW50X2RhdGFbOm5hbWVdfScg2KjZhtis2KfYrSEiKQogICAgICAgIGRsZy5jbG9zZQogICAgICAgIHNob3dfbGlicmFyeSh0cnVlKQogICAgICBlbHNlCiAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINmB2LTZhCDZgdmKINix2YHYuSDYp9mE2YXZg9mI2YYuINmK2LHYrNmJINin2YTZhdit2KfZiNmE2Kkg2YXYsdipINij2K7YsdmJLiIpCiAgICAgIGVuZAogICAgZW5kCgogICAgZGxnLnNob3cKICBlbmQKCiAgIyA9PT09PT0g2K/Yp9mE2Kkg2YTYpdiv2KfYsdipINin2YTZhdmD2YjZhtin2Kog2KfZhNi02K7YtdmK2KkgPT09PT09CiAgZGVmIHNlbGYubWFuYWdlX2N1c3RvbV9jb21wb25lbnRzCiAgICAjINin2YTYqtit2YLZgiDZhdmGINin2YTYqtiz2KzZitmEINij2YjZhNin2YsKICAgIHVubGVzcyBhY3RpdmF0ZWQ/CiAgICAgIHNob3dfbG9naW5fZGlhbG9nCiAgICAgIHJldHVybgogICAgZW5kCgogICAgY3VzdG9tX2NvbXBvbmVudHMgPSBsb2FkX2N1c3RvbV9jb21wb25lbnRzCiAgICAKICAgIGlmIGN1c3RvbV9jb21wb25lbnRzLmVtcHR5PwogICAgICBVSS5tZXNzYWdlYm94KCLihLnvuI8g2YTYpyDYqtmI2KzYryDZhdmD2YjZhtin2Kog2YXYrti12LXYqSIpCiAgICAgIHJldHVybgogICAgZW5kCiAgICAKICAgIGRsZyA9IFVJOjpIdG1sRGlhbG9nLm5ldyh7CiAgICAgIDpkaWFsb2dfdGl0bGUgPT4gIvCfm6DvuI8g2KXYr9in2LHYqSDYp9mE2YXZg9mI2YbYp9iqINin2YTZhdiu2LXYtdipIiwKICAgICAgOnByZWZlcmVuY2VzX2tleSA9PiAibWhkZXNpZ25fbWFuYWdlIiwKICAgICAgOnNjcm9sbGFibGUgPT4gdHJ1ZSwKICAgICAgOnJlc2l6YWJsZSA9PiB0cnVlLAogICAgICA6d2lkdGggPT4gNzAwLAogICAgICA6aGVpZ2h0ID0+IDUwMAogICAgfSkKICAgIAogICAgaHRtbCA9IDw8LUhUTUwKICAgIDxodG1sPjxoZWFkPgogICAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9VGFqYXdhbDp3Z2h0QDQwMDs3MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgogICAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7Zm9udC1mYW1pbHk6J1RhamF3YWwnLHNhbnMtc2VyaWY7bWFyZ2luOjA7cGFkZGluZzoyNXB4O2JhY2tncm91bmQ6I2Y4ZjlmYTtkaXJlY3Rpb246cnRsO30KICAgICAgICAuaGVhZGVyIHt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tYm90dG9tOjI1cHg7Y29sb3I6IzJlN2QzMjt9CiAgICAgICAgLmNvbXBvbmVudC1pdGVtIHtiYWNrZ3JvdW5kOndoaXRlO21hcmdpbjoxNXB4IDA7cGFkZGluZzoyMHB4O2JvcmRlci1yYWRpdXM6MTJweDtib3gtc2hhZG93OjAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjA4KTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoyMHB4O30KICAgICAgICAuY29tcG9uZW50LWltYWdlIHt3aWR0aDo4MHB4O2hlaWdodDo4MHB4O29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo4cHg7fQogICAgICAgIC5jb21wb25lbnQtaW5mbyB7ZmxleDoxO30KICAgICAgICAuY29tcG9uZW50LW5hbWUge2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjE4cHg7bWFyZ2luLWJvdHRvbTo1cHg7Y29sb3I6IzMzMzt9CiAgICAgICAgLmNvbXBvbmVudC1kZXRhaWxzIHtjb2xvcjojNjY2O2ZvbnQtc2l6ZToxNHB4O21hcmdpbi1ib3R0b206OHB4O30KICAgICAgICAuY29tcG9uZW50LWNhdGVnb3J5IHtkaXNwbGF5OmlubGluZS1ibG9jaztiYWNrZ3JvdW5kOiNlM2YyZmQ7Y29sb3I6IzE5NzZkMjtwYWRkaW5nOjRweCA4cHg7Ym9yZGVyLXJhZGl1czo0cHg7Zm9udC1zaXplOjEycHg7fQogICAgICAgIC5kZWxldGUtYnRuIHtiYWNrZ3JvdW5kOiNmNDQzMzY7Y29sb3I6d2hpdGU7Ym9yZGVyOm5vbmU7cGFkZGluZzo4cHggMTZweDtib3JkZXItcmFkaXVzOjZweDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjNzO30KICAgICAgICAuZGVsZXRlLWJ0bjpob3ZlciB7YmFja2dyb3VuZDojZDMyZjJmO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xcHgpO30KICAgICAgICAuZW1wdHktbXNnIHt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojOTk5O3BhZGRpbmc6NjBweDtmb250LXNpemU6MTZweDt9CiAgICAgICAgLnN0YXRzIHtiYWNrZ3JvdW5kOndoaXRlO3BhZGRpbmc6MTVweDtib3JkZXItcmFkaXVzOjhweDttYXJnaW4tYm90dG9tOjIwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ym94LXNoYWRvdzowIDJweCA4cHggcmdiYSgwLDAsMCwwLjEpO30KICAgICAgPC9zdHlsZT4KICAgIDwvaGVhZD4KICAgIDxib2R5PgogICAgICA8ZGl2IGNsYXNzPSJoZWFkZXIiPgogICAgICAgIDxoMj7wn5ug77iPINil2K/Yp9ix2Kkg2KfZhNmF2YPZiNmG2KfYqiDYp9mE2YXYrti12LXYqTwvaDI+CiAgICAgIDwvZGl2PgogICAgICAKICAgICAgPGRpdiBjbGFzcz0ic3RhdHMiPgogICAgICAgIDxoMz7wn5OKINil2K3Ytdin2KbZitin2Kog2KfZhNmF2YPZiNmG2KfYqiDYp9mE2YXYrti12LXYqTwvaDM+CiAgICAgICAgPHA+2LnYr9ivINin2YTZhdmD2YjZhtin2Ko6IDxzdHJvbmc+I3tjdXN0b21fY29tcG9uZW50cy5sZW5ndGh9PC9zdHJvbmc+PC9wPgogICAgICA8L2Rpdj4KICAgICAgCiAgICAgIDxkaXYgaWQ9ImNvbXBvbmVudHMtbGlzdCI+CiAgICBIVE1MCiAgICAKICAgIGN1c3RvbV9jb21wb25lbnRzLmVhY2ggZG8gfGNvbXB8CiAgICAgIGh0bWwgKz0gPDwtSFRNTAogICAgICAgIDxkaXYgY2xhc3M9ImNvbXBvbmVudC1pdGVtIj4KICAgICAgICAgIDxpbWcgY2xhc3M9ImNvbXBvbmVudC1pbWFnZSIgc3JjPSIje2NvbXBbOmltYWdlXX0iIG9uZXJyb3I9InRoaXMuc3JjPSdodHRwczovL21haG1vdWRkZXNpZ24uY29tL1NLRVRDSFVQL2NvbXBvbmVudHMvZGVmYXVsdF90aHVtYi5wbmcnIj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbXBvbmVudC1pbmZvIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tcG9uZW50LW5hbWUiPiN7Y29tcFs6bmFtZV19PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbXBvbmVudC1kZXRhaWxzIj4je2NvbXBbOmRlc2NdfTwvZGl2PgogICAgICAgICAgICA8c3BhbiBjbGFzcz0iY29tcG9uZW50LWNhdGVnb3J5Ij4je2NvbXBbOmNhdGVnb3J5XX08L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxidXR0b24gY2xhc3M9ImRlbGV0ZS1idG4iIG9uY2xpY2s9ImRlbGV0ZUNvbXBvbmVudCgnI3tjb21wWzpuYW1lXX0nKSI+8J+Xke+4jyDYrdiw2YE8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgSFRNTAogICAgZW5kCiAgICAKICAgIGh0bWwgKz0gPDwtSFRNTAogICAgICA8L2Rpdj4KICAgICAgPHNjcmlwdD4KICAgICAgICBmdW5jdGlvbiBkZWxldGVDb21wb25lbnQobmFtZSkgewogICAgICAgICAgaWYgKGNvbmZpcm0oJ9mH2YQg2KPZhtiqINmF2KrYo9mD2K8g2YXZhiDYrdiw2YEg2KfZhNmF2YPZiNmGOiAnICsgbmFtZSArICfYnycpKSB7CiAgICAgICAgICAgIHNrZXRjaHVwLmRlbGV0ZUN1c3RvbUNvbXBvbmVudChuYW1lKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIDwvc2NyaXB0PgogICAgPC9ib2R5PjwvaHRtbD4KICAgIEhUTUwKICAgIAogICAgZGxnLnNldF9odG1sKGh0bWwpCiAgICAKICAgIGRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJkZWxldGVDdXN0b21Db21wb25lbnQiKSBkbyB8XywgY29tcF9uYW1lfAogICAgICBpZiBkZWxldGVfY3VzdG9tX2NvbXBvbmVudChjb21wX25hbWUpCiAgICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2K3YsNmBINin2YTZhdmD2YjZhiAnI3tjb21wX25hbWV9JyDYqNmG2Kw="  // كود روبي مشفر بـ base64
}
