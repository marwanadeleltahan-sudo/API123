{
  "main_code": "IyBlbmNvZGluZzogVVRGLTgKcmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ29wZW4tdXJpJwpyZXF1aXJlICd0bXBkaXInCnJlcXVpcmUgJ2Jhc2U2NCcKcmVxdWlyZSAndGVtcGZpbGUnCnJlcXVpcmUgJ2RpZ2VzdCcKcmVxdWlyZSAnZmlsZXV0aWxzJwoKbW9kdWxlIE1IREVTSUdOCiAgUExVR0lOX05BTUUgPSAiTUhERVNJR04iCiAgCiAgIyDYsdmI2KfYqNi3INin2YTYqtit2YLZgiDYp9mE2KzYr9mK2K/YqQogIEFDQ09VTlRTX1VSTCA9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbWFyd2FuYWRlbGVsdGFoYW4tc3Vkby9BUEkxMjMvcmVmcy9oZWFkcy9tYWluL2VtYWlsLmpzb24iCiAgVkFMSURBVElPTl9VUkwgPSAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL21hcndhbmFkZWxlbHRhaGFuLXN1ZG8vQVBJMTIzL3JlZnMvaGVhZHMvbWFpbi92YWxpZGF0aW9uLmpzb24iCiAgCiAgT1BFTl9USU1FT1VUID0gOAogIFJFQURfVElNRU9VVCA9IDEyCgogIFBMVUdJTl9ESVIgPQogICAgYmVnaW4KICAgICAgaWYgT2JqZWN0LmNvbnN0X2RlZmluZWQ/KDpQTFVHSU5fRElSKSAmJiA6OlBMVUdJTl9ESVIgJiYgITo6UExVR0lOX0RJUi50b19zLnN0cmlwLmVtcHR5PwogICAgICAgIDo6UExVR0lOX0RJUgogICAgICBlbHNlCiAgICAgICAgRmlsZS5leHBhbmRfcGF0aChGaWxlLmRpcm5hbWUoX19GSUxFX18pKQogICAgICBlbmQKICAgIHJlc2N1ZQogICAgICBuaWwKICAgIGVuZAoKICBDT01QT05FTlRTID0gYmVnaW4KICAgIHVybCA9ICJodHRwczovL21haG1vdWRkZXNpZ24uY29tL1NLRVRDSFVQL2NvbXBvbmVudHMtVjQuanNvbiIKICAgIGpzb25fcmF3ID0gVVJJLm9wZW4odXJsKS5yZWFkCiAgICBqc29uX2RhdGEgPSBKU09OLnBhcnNlKGpzb25fcmF3KQogICAgZGVjb2RlZF9qc29uID0gQmFzZTY0LmRlY29kZTY0KGpzb25fZGF0YVsiZGF0YSJdKQogICAgSlNPTi5wYXJzZShkZWNvZGVkX2pzb24sIHN5bWJvbGl6ZV9uYW1lczogdHJ1ZSkKICByZXNjdWUgPT4gZQogICAgVUkubWVzc2FnZWJveCgi4pqgINiu2LfYoyDZgdmKINiq2K3ZhdmK2YQg2KfZhNmF2YPYqtio2Kk6ICN7ZS5tZXNzYWdlfSIpCiAgICBbXQogIGVuZAoKICAjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g2KfZhNiq2K3ZgtmCINmF2YYg2KfZhNit2LPYp9io2KfYqiDYudio2LEgR2l0SHViID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICBkZWYgc2VsZi5mZXRjaF9hY2NvdW50c19mcm9tX2dpdGh1YgogICAgYmVnaW4KICAgICAgdXJpID0gVVJJLnBhcnNlKEFDQ09VTlRTX1VSTCkKICAgICAgcmVzcG9uc2UgPSBOZXQ6OkhUVFAuZ2V0X3Jlc3BvbnNlKHVyaSkKICAgICAgCiAgICAgIGlmIHJlc3BvbnNlLmNvZGUudG9faSA9PSAyMDAKICAgICAgICBhY2NvdW50cyA9IEpTT04ucGFyc2UocmVzcG9uc2UuYm9keSkKICAgICAgICByZXR1cm4gYWNjb3VudHMgaWYgYWNjb3VudHMuaXNfYT8oQXJyYXkpCiAgICAgIGVuZAogICAgcmVzY3VlID0+IGUKICAgICAgcHV0cyAiRXJyb3IgZmV0Y2hpbmcgYWNjb3VudHM6ICN7ZS5tZXNzYWdlfSIKICAgIGVuZAogICAgW10KICBlbmQKCiAgZGVmIHNlbGYuZmV0Y2hfdmFsaWRhdGlvbl9mcm9tX2dpdGh1YgogICAgYmVnaW4KICAgICAgdXJpID0gVVJJLnBhcnNlKFZBTElEQVRJT05fVVJMKQogICAgICByZXNwb25zZSA9IE5ldDo6SFRUUC5nZXRfcmVzcG9uc2UodXJpKQogICAgICAKICAgICAgaWYgcmVzcG9uc2UuY29kZS50b19pID09IDIwMAogICAgICAgIHZhbGlkYXRpb24gPSBKU09OLnBhcnNlKHJlc3BvbnNlLmJvZHkpCiAgICAgICAgcmV0dXJuIHZhbGlkYXRpb24gaWYgdmFsaWRhdGlvbi5pc19hPyhIYXNoKQogICAgICBlbmQKICAgIHJlc2N1ZSA9PiBlCiAgICAgIHB1dHMgIkVycm9yIGZldGNoaW5nIHZhbGlkYXRpb246ICN7ZS5tZXNzYWdlfSIKICAgIGVuZAogICAge30KICBlbmQKCiAgZGVmIHNlbGYudmFsaWRhdGVfYWNjb3VudChlbWFpbCwgcGFzc3dvcmQpCiAgICAjINin2YTYqtit2YLZgiDZhdmGINin2YTYrdiz2KfYqNin2Kog2KfZhNmF2K3ZhNmK2Kkg2KfZhNmF2K7YstmG2KkKICAgIHN0b3JlZF9lbWFpbCA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImVtYWlsIikgfHwgIiIKICAgIHN0b3JlZF9wYXNzd29yZCA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgInBhc3N3b3JkIikgfHwgIiIKICAgIAogICAgaWYgIWVtYWlsLmVtcHR5PyAmJiAhcGFzc3dvcmQuZW1wdHk/ICYmIAogICAgICAgZW1haWwgPT0gc3RvcmVkX2VtYWlsICYmIHBhc3N3b3JkID09IHN0b3JlZF9wYXNzd29yZAogICAgICByZXR1cm4geyAndmFsaWQnID0+IHRydWUsICdzdGF0dXMnID0+ICdhY3RpdmUnIH0KICAgIGVuZAogICAgCiAgICAjINis2YTYqCDYp9mE2K3Ys9in2KjYp9iqINmF2YYgR2l0SHViCiAgICBhY2NvdW50cyA9IGZldGNoX2FjY291bnRzX2Zyb21fZ2l0aHViCiAgICAKICAgICMg2KfZhNio2K3YqyDYudmGINin2YTYqNix2YrYryDZiNmD2YTZhdipINin2YTZhdix2YjYsQogICAgYWNjb3VudCA9IGFjY291bnRzLmZpbmQgZG8gfGFjY3wKICAgICAgYWNjWydlbWFpbCddLnRvX3MuZG93bmNhc2UgPT0gZW1haWwudG9fcy5kb3duY2FzZSAmJiAKICAgICAgYWNjWydwYXNzd29yZCddID09IHBhc3N3b3JkCiAgICBlbmQKICAgIAogICAgaWYgYWNjb3VudAogICAgICAjINis2YTYqCDYpdi52K/Yp9iv2KfYqiDYp9mE2KrYrdmC2YIKICAgICAgdmFsaWRhdGlvbiA9IGZldGNoX3ZhbGlkYXRpb25fZnJvbV9naXRodWIKICAgICAgCiAgICAgICMg2KfZhNiq2K3ZgtmCINmF2YYg2KfZhNit2KfZhNipCiAgICAgIHN0YXR1cyA9IHZhbGlkYXRpb25bJ3N0YXR1cyddIHx8ICdhY3RpdmUnCiAgICAgIGV4cGlyZXNfYXQgPSB2YWxpZGF0aW9uWydleHBpcmVzX2F0J10gfHwgbmlsCiAgICAgIAogICAgICByZXR1cm4gewogICAgICAgICd2YWxpZCcgPT4gdHJ1ZSwKICAgICAgICAnc3RhdHVzJyA9PiBzdGF0dXMsCiAgICAgICAgJ2V4cGlyZXNfYXQnID0+IGV4cGlyZXNfYXQKICAgICAgfQogICAgZW5kCiAgICAKICAgIHJldHVybiB7ICd2YWxpZCcgPT4gZmFsc2UsICdyZWFzb24nID0+ICdpbnZhbGlkX2NyZWRlbnRpYWxzJyB9CiAgZW5kCgogIGRlZiBzZWxmLmh1bWFuaXplX3NlY29uZHModG90YWwpCiAgICB0b3RhbCA9IHRvdGFsLnRvX2kKICAgIG0sIHMgPSB0b3RhbC5kaXZtb2QoNjApCiAgICBoLCBtID0gbS5kaXZtb2QoNjApCiAgICBwYXJ0cyA9IFtdCiAgICBwYXJ0cyA8PCAiI3tofSDYs9in2LnYqSIgICBpZiBoID4gMAogICAgcGFydHMgPDwgIiN7bX0g2K/ZgtmK2YLYqSIgIGlmIG0gPiAwCiAgICBwYXJ0cyA8PCAiI3tzfSDYq9in2YbZitipIiAgaWYgcyA+IDAgfHwgcGFydHMuZW1wdHk/CiAgICBwYXJ0cy5qb2luKCcg2YggJykKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09INiq2YHYudmK2YQg2KfZhNil2LbYp9mB2KkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICBkZWYgc2VsZi5hY3RpdmF0ZShmb3JjZV9wcm9tcHQgPSB0cnVlKQogICAgZW1haWwgPSBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIpIHx8ICIiCiAgICBwYXNzd29yZCA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgInBhc3N3b3JkIikgfHwgIiIKICAgIGxpY2Vuc2UgPSBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJsaWNlbnNlIikgfHwgIiIKCiAgICBpZiBmb3JjZV9wcm9tcHQgfHwgZW1haWwuZW1wdHk/IHx8IHBhc3N3b3JkLmVtcHR5PwogICAgICBpbnB1dCA9IFVJLmlucHV0Ym94KAogICAgICAgIFsi2KPYr9iu2YQg2KfZhNio2LHZitivINin2YTYpdmE2YPYqtix2YjZhtmKIiwgItij2K/YrtmEINmD2YTZhdipINin2YTZhdix2YjYsSJdLCAKICAgICAgICBbZW1haWwsIHBhc3N3b3JkXSwgCiAgICAgICAgItiq2YHYudmK2YQgTUhERVNJR04iCiAgICAgICkKICAgICAgcmV0dXJuIGZhbHNlIHVubGVzcyBpbnB1dAogICAgICBlbWFpbCwgcGFzc3dvcmQgPSBpbnB1dAogICAgZW5kCgogICAgYmVnaW4KICAgICAgIyDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2K3Ys9in2KgKICAgICAgcmVzdWx0ID0gdmFsaWRhdGVfYWNjb3VudChlbWFpbCwgcGFzc3dvcmQpCiAgICAgIAogICAgICBpZiByZXN1bHRbJ3ZhbGlkJ10KICAgICAgICAjINit2YHYuCDYqNmK2KfZhtin2Kog2KfZhNmF2LPYqtiu2K/ZhQogICAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIsIGVtYWlsKQogICAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJwYXNzd29yZCIsIHBhc3N3b3JkKQogICAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJsaWNlbnNlIiwgImdpdGh1Yl92YWxpZGF0ZWQiKQogICAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJhY3RpdmF0ZWRfb25jZSIsIHRydWUpCiAgICAgICAgCiAgICAgICAgIyDYrdmB2Lgg2KrYp9ix2YrYriDYp9mE2KfZhtiq2YfYp9ihINil2LDYpyDZiNis2K8KICAgICAgICBpZiByZXN1bHRbJ2V4cGlyZXNfYXQnXQogICAgICAgICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImVuZHNfYXQiLCByZXN1bHRbJ2V4cGlyZXNfYXQnXS50b19zKQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgICMg2LnYsdi2INix2LPYp9mE2Kkg2KfZhNmG2KzYp9itCiAgICAgICAgc3RhdHVzX21zZyA9IGNhc2UgcmVzdWx0WydzdGF0dXMnXQogICAgICAgICAgICAgICAgICAgIHdoZW4gJ2FjdGl2ZScgdGhlbiAi2YbYtNi3IgogICAgICAgICAgICAgICAgICAgIHdoZW4gJ3RyaWFsJyB0aGVuICLZhtiz2K7YqSDYqtis2LHZitio2YrYqSIKICAgICAgICAgICAgICAgICAgICBlbHNlIHJlc3VsdFsnc3RhdHVzJ10KICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBtc2cgPSAi4pyFINiq2YUg2KfZhNiq2YHYudmK2YQg2KjZhtis2KfYrVxuXG4iCiAgICAgICAgbXNnICs9ICLYp9mE2KjYsdmK2K86ICN7ZW1haWx9XG4iCiAgICAgICAgbXNnICs9ICLYp9mE2K3Yp9mE2Kk6ICN7c3RhdHVzX21zZ31cbiIKICAgICAgICAKICAgICAgICBpZiByZXN1bHRbJ2V4cGlyZXNfYXQnXQogICAgICAgICAgbXNnICs9ICLZitmG2KrZh9mKINmB2Yo6ICN7cmVzdWx0WydleHBpcmVzX2F0J119XG4iCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgVUkubWVzc2FnZWJveChtc2cpIGlmIGZvcmNlX3Byb21wdAogICAgICAgIHJldHVybiB0cnVlCiAgICAgIGVsc2UKICAgICAgICByZWFzb24gPSByZXN1bHRbJ3JlYXNvbiddIHx8ICdpbnZhbGlkX2NyZWRlbnRpYWxzJwogICAgICAgIG1zZyA9IGNhc2UgcmVhc29uCiAgICAgICAgICAgICAgd2hlbiAnaW52YWxpZF9jcmVkZW50aWFscycgdGhlbiAi2KjZitin2YbYp9iqINin2YTYr9iu2YjZhCDYutmK2LEg2LXYrdmK2K3YqSIKICAgICAgICAgICAgICB3aGVuICdleHBpcmVkJyB0aGVuICLYp9mG2KrZh9iqINi12YTYp9it2YrYqSDYp9mE2K3Ys9in2KgiCiAgICAgICAgICAgICAgd2hlbiAnc3VzcGVuZGVkJyB0aGVuICLYp9mE2K3Ys9in2Kgg2YXZiNmC2YjZgSIKICAgICAgICAgICAgICBlbHNlICLZgdi02YQg2YHZiiDYp9mE2KrYrdmC2YIiCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MICN7bXNnfSIpIGlmIGZvcmNlX3Byb21wdAogICAgICAgIHJldHVybiBmYWxzZQogICAgICBlbmQKCiAgICByZXNjdWUgPT4gZQogICAgICBpZiBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJhY3RpdmF0ZWRfb25jZSIpCiAgICAgICAgIyDYpdiw2Kcg2YPYp9mGINmF2YHYudmE2KfZiyDZhdmGINmC2KjZhNiMINmG2LPZhditINio2KfZhNin2LPYqtiu2K/Yp9mFCiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgZWxzZQogICAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDYrdiv2Ksg2K7Yt9ijINij2KvZhtin2KEg2KfZhNiq2YHYudmK2YQ6ICN7ZS5tZXNzYWdlfSIpIGlmIGZvcmNlX3Byb21wdAogICAgICAgIHJldHVybiBmYWxzZQogICAgICBlbmQKICAgIGVuZAogIGVuZAoKICAjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g2YXYudmE2YjZhdin2Kog2KfZhNmF2LPYqtiu2K/ZhSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgZGVmIHNlbGYuc2hvd191c2VyX2luZm8KICAgIGVtYWlsID0gU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZW1haWwiKS50b19zCiAgICBwYXNzd29yZCA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgInBhc3N3b3JkIikudG9fcwogICAgZW5kc19hdCA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImVuZHNfYXQiKS50b19zCgogICAgaWYgZW1haWwuZW1wdHk/IHx8IHBhc3N3b3JkLmVtcHR5PwogICAgICBVSS5tZXNzYWdlYm94KCLinYwg2YTZhSDZitiq2YUg2KrZgdi52YrZhCDYp9mE2YXZg9iq2KjYqSDYqNi52K8uXG7Yp9mG2KrZgtmEINil2YTZiTogUGx1Z2lucyA+IE1IREVTSUdOIC0g2KrZgdi52YrZhCIpCiAgICAgIHJldHVybgogICAgZW5kCgogICAgZW5kc190eHQgPSBlbmRzX2F0LnN0cmlwLmVtcHR5PyA/ICLYr9in2KbZhSIgOiBlbmRzX2F0CgogICAgVUkubWVzc2FnZWJveCgKICAgICAgIvCfkaQg2YXYudmE2YjZhdin2Kog2KfZhNmF2LTYqtix2YMgKE1IREVTSUdOKVxuXG4iIFwKICAgICAgIvCfk6cg2KfZhNio2LHZitivINin2YTYpdmE2YPYqtix2YjZhtmKOlxuI3tlbWFpbH1cblxuIiBcCiAgICAgICLwn5ed77iPINmD2YTZhdipINin2YTZhdix2YjYsTpcbiN7JyonICogcGFzc3dvcmQubGVuZ3RofVxuXG4iIFwKICAgICAgIuKPsyDZitmG2KrZh9mKINin2YTYqtmB2LnZitmEOlxuI3tlbmRzX3R4dH1cblxuIiBcCiAgICAgICLwn4yQINmF2LXYr9ixINin2YTYqtmB2LnZitmEOiBHaXRIdWIgQVBJIgogICAgKQogIGVuZAoKICAjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g2YXYs9itINin2YTYqtiu2LLZitmGINin2YTZhdik2YLYqiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgZGVmIHNlbGYuY2xlYXJfY2FjaGUKICAgIGNhY2hlX2RpciA9IEZpbGUuam9pbihEaXIudG1wZGlyLCAibWhkZXNpZ25fY2FjaGVfMSIpCiAgICBGaWxlVXRpbHMucm1fcmYoY2FjaGVfZGlyKSBpZiBGaWxlLmRpcmVjdG9yeT8oY2FjaGVfZGlyKQogICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2YXYs9itINiw2KfZg9ix2Kkg2KfZhNiq2K7YstmK2YYg2KfZhNmF2KTZgtiqLiIpCiAgcmVzY3VlID0+IGUKICAgIFVJLm1lc3NhZ2Vib3goIuKaoCDYrdiv2Ksg2K7Yt9ijINij2KvZhtin2KEg2YXYs9itINin2YTYqtiu2LLZitmGINin2YTZhdik2YLYqjogI3tlLm1lc3NhZ2V9IikKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09INiv2YrZhtin2YXZitmDINmD2YjZhdio2YjZhtmG2KogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogIGRlZiBzZWxmLmR5bmFtaWM/KGluc3RhbmNlKQogICAgcmV0dXJuIGZhbHNlIHVubGVzcyBpbnN0YW5jZS5pc19hPyhTa2V0Y2h1cDo6Q29tcG9uZW50SW5zdGFuY2UpCiAgICAhIWluc3RhbmNlLmF0dHJpYnV0ZV9kaWN0aW9uYXJ5KCJkeW5hbWljX2F0dHJpYnV0ZXMiLCBmYWxzZSkKICByZXNjdWUKICAgIGZhbHNlCiAgZW5kCgogIGRlZiBzZWxmLnVud3JhcF90b19keW5hbWljIShpbnN0YW5jZSkKICAgIHJldHVybiBpbnN0YW5jZSBpZiBkeW5hbWljPyhpbnN0YW5jZSkKCiAgICBlbnRzID0gaW5zdGFuY2UuZGVmaW5pdGlvbi5lbnRpdGllcy50b19hCiAgICBjaGlsZHJlbiA9IGVudHMuZ3JlcChTa2V0Y2h1cDo6Q29tcG9uZW50SW5zdGFuY2UpCiAgICBkeW5fY2hpbGRyZW4gPSBjaGlsZHJlbi5zZWxlY3Qge3xjfCBkeW5hbWljPyhjKSB9CiAgICByZXR1cm4gaW5zdGFuY2UgaWYgZHluX2NoaWxkcmVuLmVtcHR5PwoKICAgIG1vZGVsID0gU2tldGNodXAuYWN0aXZlX21vZGVsCiAgICBtb2RlbC5zdGFydF9vcGVyYXRpb24oIlVud3JhcCBEeW5hbWljIENvbXBvbmVudCIsIHRydWUpCiAgICBiZWdpbgogICAgICBwYXJlbnRfZW50cyA9IGluc3RhbmNlLnBhcmVudC5lbnRpdGllcwogICAgICBiZWZvcmVfaWRzID0gcGFyZW50X2VudHMudG9fYS5tYXAoJjplbnRpdHlJRCkKCiAgICAgIGluc3RhbmNlLmV4cGxvZGUKCiAgICAgIGFmdGVyID0gcGFyZW50X2VudHMudG9fYS5yZWplY3QgeyB8ZXwgYmVmb3JlX2lkcy5pbmNsdWRlPyhlLmVudGl0eUlEKSB9CiAgICAgIGFmdGVyX2luc3RzID0gYWZ0ZXIuZ3JlcChTa2V0Y2h1cDo6Q29tcG9uZW50SW5zdGFuY2UpCgogICAgICBkeW4gPSBhZnRlcl9pbnN0cy5maW5kIHsgfHh8IGR5bmFtaWM/KHgpIH0gfHwgYWZ0ZXJfaW5zdHMuZmlyc3QKICAgICAgbW9kZWwuc2VsZWN0aW9uLmNsZWFyCiAgICAgIG1vZGVsLnNlbGVjdGlvbi5hZGQoZHluKSBpZiBkeW4KICAgICAgbW9kZWwuY29tbWl0X29wZXJhdGlvbgogICAgICBkeW4gfHwgaW5zdGFuY2UKICAgIHJlc2N1ZQogICAgICBtb2RlbC5hYm9ydF9vcGVyYXRpb24gcmVzY3VlIG5pbAogICAgICBpbnN0YW5jZQogICAgZW5kCiAgZW5kCgogIGNsYXNzIFBsYWNlQW5kVW53cmFwT2JzZXJ2ZXIgPCBTa2V0Y2h1cDo6RW50aXRpZXNPYnNlcnZlcgogICAgZGVmIGluaXRpYWxpemUodGFyZ2V0X2RlZikKICAgICAgQHRhcmdldF9kZWYgPSB0YXJnZXRfZGVmCiAgICAgIEBkb25lID0gZmFsc2UKICAgIGVuZAoKICAgIGRlZiBvbkVsZW1lbnRBZGRlZChlbnRpdGllcywgZW50aXR5KQogICAgICByZXR1cm4gaWYgQGRvbmUKICAgICAgcmV0dXJuIHVubGVzcyBlbnRpdHkuaXNfYT8oU2tldGNodXA6OkNvbXBvbmVudEluc3RhbmNlKQogICAgICByZXR1cm4gdW5sZXNzIGVudGl0eS5kZWZpbml0aW9uID09IEB0YXJnZXRfZGVmCgogICAgICBAZG9uZSA9IHRydWUKICAgICAgbW9kZWwgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwKCiAgICAgIFVJLnN0YXJ0X3RpbWVyKDAuMCwgZmFsc2UpIGRvCiAgICAgICAgYmVnaW4KICAgICAgICAgIGluc3QyID0gTUhERVNJR04udW53cmFwX3RvX2R5bmFtaWMhKGVudGl0eSkKICAgICAgICAgIG1vZGVsLnNlbGVjdGlvbi5jbGVhcgogICAgICAgICAgbW9kZWwuc2VsZWN0aW9uLmFkZChpbnN0MikgaWYgaW5zdDIKICAgICAgICByZXNjdWUKICAgICAgICBlbnN1cmUKICAgICAgICAgIGJlZ2luCiAgICAgICAgICAgIGVudGl0aWVzLnJlbW92ZV9vYnNlcnZlcihzZWxmKQogICAgICAgICAgcmVzY3VlCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQKCiAgZGVmIHNlbGYuaW5zdGFsbF9wbGFjZV9vYnNlcnZlcl9mb3IoZGVmaW5pdGlvbikKICAgIGVudHMgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuZW50aXRpZXMKICAgIG9icyA9IFBsYWNlQW5kVW53cmFwT2JzZXJ2ZXIubmV3KGRlZmluaXRpb24pCiAgICBlbnRzLmFkZF9vYnNlcnZlcihvYnMpCgogICAgVUkuc3RhcnRfdGltZXIoMjAuMCwgZmFsc2UpIGRvCiAgICAgIGJlZ2luCiAgICAgICAgZW50cy5yZW1vdmVfb2JzZXJ2ZXIob2JzKQogICAgICByZXNjdWUKICAgICAgZW5kCiAgICBlbmQKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09INiq2K3ZhdmK2YQg2KfZhNmD2YjZhdio2YjZhtmG2Kog2YXYuSDYp9mE2KrZgtiv2YUgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogIGRlZiBzZWxmLmZldGNoX2RlZmluaXRpb25fYXN5bmMoY29tcCwgJmJsb2NrKQogICAgYmVnaW4KICAgICAgdXJsID0gVVJJLnBhcnNlKGNvbXBbOnVybF0udG9fcykKICAgICAgY2FjaGVfZGlyID0gRmlsZS5qb2luKERpci50bXBkaXIsICJtaGRlc2lnbl9jYWNoZV8xIikKICAgICAgRmlsZVV0aWxzLm1rZGlyX3AoY2FjaGVfZGlyKQoKICAgICAgaGFzaF9uYW1lICA9IERpZ2VzdDo6U0hBMjU2LmhleGRpZ2VzdCh1cmwudG9fcylbMC4uMTZdICsgIi5za3AiCiAgICAgIGxvY2FsX3BhdGggPSBGaWxlLmpvaW4oY2FjaGVfZGlyLCBoYXNoX25hbWUpCiAgICAgIG1vZGVsICAgICAgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwKCiAgICAgIGlmIEZpbGUuZXhpc3Q/KGxvY2FsX3BhdGgpICYmIEZpbGUuc2l6ZShsb2NhbF9wYXRoKSA+IDAKICAgICAgICBkZWZpbml0aW9uID0gbW9kZWwuZGVmaW5pdGlvbnMubG9hZChsb2NhbF9wYXRoLCBhbGxvd19uZXdlcjogdHJ1ZSkKICAgICAgICBibG9jay5jYWxsKGRlZmluaXRpb24pIGlmIGJsb2NrCiAgICAgICAgcmV0dXJuCiAgICAgIGVuZAoKICAgICAgcHJvZ3Jlc3MgPSBVSTo6SHRtbERpYWxvZy5uZXcoewogICAgICAgIDpkaWFsb2dfdGl0bGUgPT4gItis2KfYsSDYp9mE2KrYrdmF2YrZhC4uLiIsCiAgICAgICAgOnByZWZlcmVuY2VzX2tleSA9PiAibWhkZXNpZ25fcHJvZ3Jlc3MiLAogICAgICAgIDpzY3JvbGxhYmxlID0+IGZhbHNlLAogICAgICAgIDpyZXNpemFibGUgPT4gZmFsc2UsCiAgICAgICAgOndpZHRoID0+IDMwMCwKICAgICAgICA6aGVpZ2h0ID0+IDE1MAogICAgICB9KQoKICAgICAgcHJvZ3Jlc3Muc2V0X2h0bWwgPDwtSFRNTAogICAgICAgIDxodG1sPjxoZWFkPgogICAgICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICAgICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1UYWphd2FsOndnaHRANDAwOzcwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CiAgICAgICAgICA8c3R5bGU+CiAgICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTonVGFqYXdhbCcsc2Fucy1zZXJpZjsgdGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbjowOyBwYWRkaW5nOjIwcHg7IGRpcmVjdGlvbjpydGw7IH0KICAgICAgICAgICAgaDMgeyBtYXJnaW46IDEwcHggMDsgfQogICAgICAgICAgICAjcHJvZ3Jlc3MtYmFyIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMjBweDsgYmFja2dyb3VuZDogI2RkZDsgYm9yZGVyLXJhZGl1czogMTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgICAgICAjcHJvZ3Jlc3MtZmlsbCB7IGhlaWdodDogMTAwJTsgd2lkdGg6IDAlOyBiYWNrZ3JvdW5kOiAjNGNhZjUwOyB0cmFuc2l0aW9uOiB3aWR0aCAwLjJzIGVhc2U7IH0KICAgICAgICAgICAgI3BlcmNlbnQgeyBtYXJnaW4tdG9wOiA4cHg7IGZvbnQtc2l6ZTogMTRweDsgfQogICAgICAgICAgPC9zdHlsZT4KICAgICAgICA8L2hlYWQ+PGJvZHk+CiAgICAgICAgICA8aDM+2KzYp9ixINiq2K3ZhdmK2YQg2KfZhNi52YbYtdixLi4uPC9oMz4KICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzLWJhciI+PGRpdiBpZD0icHJvZ3Jlc3MtZmlsbCI+PC9kaXY+PC9kaXY+CiAgICAgICAgICA8ZGl2IGlkPSJwZXJjZW50Ij4wJTwvZGl2PgogICAgICAgIDwvYm9keT48L2h0bWw+CiAgICAgIEhUTUwKCiAgICAgIHByb2dyZXNzLnNob3cKCiAgICAgIFVJLnN0YXJ0X3RpbWVyKDAuMSwgZmFsc2UpIGRvCiAgICAgICAgdGVtcGZpbGUgPSBuaWwKICAgICAgICBiZWdpbgogICAgICAgICAgY29udGVudF9sZW5ndGggPSBuaWwKICAgICAgICAgIHRlbXBmaWxlID0gVGVtcGZpbGUubmV3KCJtaGNvbXBvbmVudCIpCgogICAgICAgICAgVVJJLm9wZW4odXJsLAogICAgICAgICAgICBjb250ZW50X2xlbmd0aF9wcm9jOiAtPihsZW4pIHsgY29udGVudF9sZW5ndGggPSBsZW4gfSwKICAgICAgICAgICAgcHJvZ3Jlc3NfcHJvYzogLT4oYnl0ZXMpIHsKICAgICAgICAgICAgICBwZXJjZW50ID0gY29udGVudF9sZW5ndGggPyAoKGJ5dGVzLnRvX2YgLyBjb250ZW50X2xlbmd0aCkgKiAxMDApLnRvX2kgOiAwCiAgICAgICAgICAgICAgcHJvZ3Jlc3MuZXhlY3V0ZV9zY3JpcHQoImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy1maWxsJykuc3R5bGUud2lkdGggPSAnI3twZXJjZW50fSUnIikKICAgICAgICAgICAgICBwcm9ncmVzcy5leGVjdXRlX3NjcmlwdCgiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcmNlbnQnKS5pbm5lclRleHQgPSAnI3twZXJjZW50fSUnIikKICAgICAgICAgICAgfQogICAgICAgICAgKSBkbyB8cmVtb3RlX2ZpbGV8CiAgICAgICAgICAgIElPLmNvcHlfc3RyZWFtKHJlbW90ZV9maWxlLCB0ZW1wZmlsZSkKICAgICAgICAgIGVuZAoKICAgICAgICAgIHRlbXBmaWxlLmNsb3NlCiAgICAgICAgICBGaWxlVXRpbHMubXYodGVtcGZpbGUucGF0aCwgbG9jYWxfcGF0aCkKICAgICAgICAgIHByb2dyZXNzLmNsb3NlIGlmIHByb2dyZXNzLnZpc2libGU/CgogICAgICAgICAgaWYgRmlsZS5leGlzdD8obG9jYWxfcGF0aCkgJiYgRmlsZS5zaXplKGxvY2FsX3BhdGgpID4gMAogICAgICAgICAgICBkZWZpbml0aW9uID0gbW9kZWwuZGVmaW5pdGlvbnMubG9hZChsb2NhbF9wYXRoLCBhbGxvd19uZXdlcjogdHJ1ZSkKICAgICAgICAgICAgYmxvY2suY2FsbChkZWZpbml0aW9uKSBpZiBibG9jawogICAgICAgICAgZWxzZQogICAgICAgICAgICBVSS5tZXNzYWdlYm94KCLinYwg2YHYtNmEINiq2K3ZhdmK2YQg2KfZhNmF2YTZgSDZhdmGINin2YTYs9mK2LHZgdixLiIpCiAgICAgICAgICAgIGJsb2NrLmNhbGwobmlsKSBpZiBibG9jawogICAgICAgICAgZW5kCgogICAgICAgIHJlc2N1ZSA9PiBlCiAgICAgICAgICBiZWdpbgogICAgICAgICAgICB0ZW1wZmlsZS5jbG9zZSBpZiB0ZW1wZmlsZQogICAgICAgICAgICB0ZW1wZmlsZS51bmxpbmsgaWYgdGVtcGZpbGUKICAgICAgICAgIHJlc2N1ZQogICAgICAgICAgZW5kCiAgICAgICAgICBwcm9ncmVzcy5jbG9zZSBpZiBwcm9ncmVzcy52aXNpYmxlPwogICAgICAgICAgVUkubWVzc2FnZWJveCgi4pqgINit2K/YqyDYrti32KMg2KPYq9mG2KfYoSDYqtit2YXZitmEINin2YTYudmG2LXYsTogI3tlLm1lc3NhZ2V9IikKICAgICAgICAgIGJsb2NrLmNhbGwobmlsKSBpZiBibG9jawogICAgICAgIGVuZAogICAgICBlbmQKCiAgICByZXNjdWUgPT4gZQogICAgICBVSS5tZXNzYWdlYm94KCLimqAg2K3Yr9irINiu2LfYozogI3tlLm1lc3NhZ2V9IikKICAgICAgYmxvY2suY2FsbChuaWwpIGlmIGJsb2NrCiAgICBlbmQKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09INiq2K3ZhdmK2YQg2KfZhNil2LbYp9mB2KfYqiDYp9mE2YHYsdi52YrYqSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgZGVmIHNlbGYuc2FmZV9sb2FkX2xvY2FsKGZpbGVfbmFtZSkKICAgIHJldHVybiBmYWxzZSB1bmxlc3MgUExVR0lOX0RJUiAmJiBGaWxlLmRpcmVjdG9yeT8oUExVR0lOX0RJUikKICAgIHBhdGggPSBGaWxlLmpvaW4oUExVR0lOX0RJUiwgZmlsZV9uYW1lKQogICAgcmV0dXJuIGZhbHNlIHVubGVzcyBGaWxlLmV4aXN0PyhwYXRoKQogICAgYmVnaW4KICAgICAgbG9hZCBwYXRoCiAgICAgIHRydWUKICAgIHJlc2N1ZSA9PiBlCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoCDYrti32KMg2YHZiiDYqtit2YXZitmEICN7ZmlsZV9uYW1lfTpcbiN7ZS5tZXNzYWdlfSIpCiAgICAgIGZhbHNlCiAgICBlbmQKICBlbmQKCiAgZGVmIHNlbGYuY2FsbF9pbnZvaWNlX3BsdWdpbgogICAgdW5sZXNzIHNhZmVfbG9hZF9sb2NhbCgiaW52b2ljZS5yYiIpCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDZhdmE2YEgaW52b2ljZS5yYiDYutmK2LEg2YXZiNis2YjYryDYo9mIINio2Ycg2K7Yt9ijLiIpCiAgICAgIHJldHVybgogICAgZW5kCiAgICBpZiBkZWZpbmVkPyhNSERlc2lnbikgJiYgTUhEZXNpZ24uY29uc3RfZGVmaW5lZD8oOk1ISW52b2ljZSkKICAgICAgbW9kID0gTUhEZXNpZ24uY29uc3RfZ2V0KDpNSEludm9pY2UpCiAgICAgIGlmIG1vZC5yZXNwb25kX3RvPyg6b3Blbl9pbnZvaWNlX2RpYWxvZykKICAgICAgICBtb2Qub3Blbl9pbnZvaWNlX2RpYWxvZwogICAgICBlbHNlCiAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MIGludm9pY2UucmIg2YTYpyDZitit2KrZiNmKINi52YTZiSBvcGVuX2ludm9pY2VfZGlhbG9nINmB2YogTUhEZXNpZ246Ok1ISW52b2ljZS4iKQogICAgICBlbmQKICAgIGVsc2UKICAgICAgVUkubWVzc2FnZWJveCgi4p2MIGludm9pY2UucmIg2YTYpyDZitit2KrZiNmKINi52YTZiSBNSERlc2lnbjo6TUhJbnZvaWNlLiIpCiAgICBlbmQKICBlbmQKCiAgZGVmIHNlbGYuY2FsbF9yZXBvcnRzX3BsdWdpbgogICAgdW5sZXNzIHNhZmVfbG9hZF9sb2NhbCgicmVwb3J0X3VuaXRzLnJiIikKICAgICAgVUkubWVzc2FnZWJveCgi4p2MINmF2YTZgSByZXBvcnRfdW5pdHMucmIg2LrZitixINmF2YjYrNmI2K8g2KPZiCDYqNmHINiu2LfYoy4iKQogICAgICByZXR1cm4KICAgIGVuZAogICAgaWYgZGVmaW5lZD8oTUhERVNJR04pICYmIE1IREVTSUdOLmNvbnN0X2RlZmluZWQ/KDpSZXBvcnRVbml0cykKICAgICAgbW9kID0gTUhERVNJR04uY29uc3RfZ2V0KDpSZXBvcnRVbml0cykKICAgICAgWzpydW4sIDpzdGFydCwgOm9wZW5fZGlhbG9nLCA6c2hvd19kaWFsb2csIDpvcGVuLCA6c2hvdywgOm1haW4sIDpnZW5lcmF0ZV0uZWFjaCBkbyB8bXwKICAgICAgICBiZWdpbgogICAgICAgICAgaWYgbW9kLnJlc3BvbmRfdG8/KG0pCiAgICAgICAgICAgIG1vZC5zZW5kKG0pCiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgZW5kCiAgICAgICAgcmVzY3VlCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBsaXN0ID0gKG1vZC5tZXRob2RzKGZhbHNlKS5tYXAoJjp0b19zKS5zb3J0IHJlc2N1ZSBbXSkKICAgICAgVUkubWVzc2FnZWJveCgi4p2MIHJlcG9ydF91bml0cy5yYiDZhNinINmK2K3YqtmI2Yog2LnZhNmJINin2YTZiNi42KfYptmBINin2YTZhdiq2YjZgti52KkuXG7Yp9mE2YjYuNin2KbZgSDYp9mE2YXZiNis2YjYr9ipINmB2YogTUhERVNJR046OlJlcG9ydFVuaXRzOlxuLSAiICsgbGlzdC5maXJzdCg0MCkuam9pbigiXG4tICIpKQogICAgZWxzZQogICAgICBVSS5tZXNzYWdlYm94KCLinYwgcmVwb3J0X3VuaXRzLnJiINmE2Kcg2YrYrdiq2YjZiiDYudmE2YkgTUhERVNJR046OlJlcG9ydFVuaXRzLiIpCiAgICBlbmQKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09INis2LnZhCDYp9mE2LnZhtin2LXYsSDZgdix2YrYr9ipID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICBtb2R1bGUgTUhERVNJR05fVU5JUVVJRlkKICAgIGRlZiBzZWxmLm1ha2VfYWxsX2NvbXBvbmVudHNfdW5pcXVlKGVudGl0aWVzKQogICAgICBlbnRpdGllcy5ncmVwKFNrZXRjaHVwOjpDb21wb25lbnRJbnN0YW5jZSkuZWFjaCBkbyB8aW5zdGFuY2V8CiAgICAgICAgaW5zdGFuY2UubWFrZV91bmlxdWUKICAgICAgICBtYWtlX2FsbF9jb21wb25lbnRzX3VuaXF1ZShpbnN0YW5jZS5kZWZpbml0aW9uLmVudGl0aWVzKQogICAgICBlbmQKICAgIGVuZAogICAgZGVmIHNlbGYubWFrZV9kZWZpbml0aW9uc191bmlxdWUKICAgICAgbW9kZWwgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwKICAgICAgbW9kZWwuZGVmaW5pdGlvbnMuZWFjaCBkbyB8ZGVmaW5pdGlvbnwKICAgICAgICBuZXh0IGlmIGRlZmluaXRpb24uZ3JvdXA/IHx8IGRlZmluaXRpb24uaW1hZ2U/CiAgICAgICAgZGVmaW5pdGlvbi5pbnN0YW5jZXMuZWFjaCBkbyB8aW5zdGFuY2V8CiAgICAgICAgICBpbnN0YW5jZS5tYWtlX3VuaXF1ZQogICAgICAgICAgbWFrZV9hbGxfY29tcG9uZW50c191bmlxdWUoaW5zdGFuY2UuZGVmaW5pdGlvbi5lbnRpdGllcykKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICAgIGRlZiBzZWxmLnJ1bl91bmlxdWlmeQogICAgICBtb2RlbCA9IFNrZXRjaHVwLmFjdGl2ZV9tb2RlbAogICAgICBtb2RlbC5zdGFydF9vcGVyYXRpb24oItis2LnZhCDYrNmF2YrYuSDYp9mE2LnZhtin2LXYsSDZgdix2YrYr9ipIiwgdHJ1ZSkKICAgICAgbWFrZV9hbGxfY29tcG9uZW50c191bmlxdWUobW9kZWwuZW50aXRpZXMpCiAgICAgIG1ha2VfZGVmaW5pdGlvbnNfdW5pcXVlCiAgICAgIG1vZGVsLmNvbW1pdF9vcGVyYXRpb24KICAgICAgVUkubWVzc2FnZWJveCgi4pyFINiq2YUg2KzYudmEINis2YXZiti5INin2YTYudmG2KfYtdixINmB2LHZitiv2KkuIikKICAgIGVuZAogIGVuZAoKICAjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g2YjYp9is2YfYqSDYp9mE2YXYs9iq2K7Yr9mFINin2YTYsdim2YrYs9mK2KkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogIGRlZiBzZWxmLmNyZWF0ZV9tYWluX3Rvb2xiYXIKICAgIHRvb2xiYXIgPSBVSTo6VG9vbGJhci5uZXcoIk1IREVTSUdOIikKICAgIAogICAgIyDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2KrZgdi52YrZhCDYo9mI2YTYp9mLCiAgICB1bmxlc3MgU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiYWN0aXZhdGVkX29uY2UiKQogICAgICBVSS5tZXNzYWdlYm94KCLinZcg2YrYsdis2Ykg2KrZgdi52YrZhCDYp9mE2KXYttin2YHYqSDYo9mI2YTYp9mLINmF2YYg2K7ZhNin2YQ6XG5QbHVnaW5zID4gTUhERVNJR04gLSDYqtmB2LnZitmEIikKICAgICAgcmV0dXJuCiAgICBlbmQKCiAgICAjINiy2LEg2KfZhNmF2YPYqtio2Kkg2KfZhNix2KbZitiz2YrYqQogICAgY21kID0gVUk6OkNvbW1hbmQubmV3KCLZhdmD2KrYqNipIE1IREVTSUdOIikgZG8KICAgICAgTUhERVNJR04uc2hvd19jb21wb25lbnRzX2RpYWxvZwogICAgZW5kCiAgICBjbWQuc21hbGxfaWNvbiA9IEZpbGUuam9pbihQTFVHSU5fRElSLCAiaWNvbnMvbGlicmFyeV9pY29uLnBuZyIpIHJlc2N1ZSBuaWwKICAgIGNtZC5sYXJnZV9pY29uID0gRmlsZS5qb2luKFBMVUdJTl9ESVIsICJpY29ucy9saWJyYXJ5X2ljb24ucG5nIikgcmVzY3VlIG5pbAogICAgY21kLnRvb2x0aXAgPSAi2YHYqtitINmF2YPYqtio2Kkg2KfZhNi52YbYp9i12LEiCiAgICB0b29sYmFyLmFkZF9pdGVtKGNtZCkKCiAgICAjINiy2LEg2KfZhNmB2YjYp9iq2YrYsQogICAgY21kID0gVUk6OkNvbW1hbmQubmV3KCLYpdmG2LTYp9ihINmB2KfYqtmI2LHYqSIpIGRvCiAgICAgIE1IREVTSUdOLmNhbGxfaW52b2ljZV9wbHVnaW4KICAgIGVuZAogICAgY21kLnNtYWxsX2ljb24gPSBGaWxlLmpvaW4oUExVR0lOX0RJUiwgImljb25zL2ludm9pY2VfaWNvbi5wbmciKSByZXNjdWUgbmlsCiAgICBjbWQubGFyZ2VfaWNvbiA9IEZpbGUuam9pbihQTFVHSU5fRElSLCAiaWNvbnMvaW52b2ljZV9pY29uLnBuZyIpIHJlc2N1ZSBuaWwKICAgIGNtZC50b29sdGlwID0gItil2YbYtNin2KEg2YHYp9iq2YjYsdipIgogICAgdG9vbGJhci5hZGRfaXRlbShjbWQpCgogICAgIyDYstixINin2YTYqtmC2KfYsdmK2LEKICAgIGNtZCA9IFVJOjpDb21tYW5kLm5ldygi2KrZgtix2YrYsSDYp9mE2YjYrdiv2KfYqiIpIGRvCiAgICAgIE1IREVTSUdOLmNhbGxfcmVwb3J0c19wbHVnaW4KICAgIGVuZAogICAgY21kLnNtYWxsX2ljb24gPSBGaWxlLmpvaW4oUExVR0lOX0RJUiwgImljb25zL3JlcG9ydF9pY29uLnBuZyIpIHJlc2N1ZSBuaWwKICAgIGNtZC5sYXJnZV9pY29uID0gRmlsZS5qb2luKFBMVUdJTl9ESVIsICJpY29ucy9yZXBvcnRfaWNvbi5wbmciKSByZXNjdWUgbmlsCiAgICBjbWQudG9vbHRpcCA9ICLYqtmC2LHZitixINin2YTZiNit2K/Yp9iqIgogICAgdG9vbGJhci5hZGRfaXRlbShjbWQpCgogICAgIyDYstixINis2LnZhCDYp9mE2LnZhtin2LXYsSDZgdix2YrYr9ipCiAgICBjbWQgPSBVSTo6Q29tbWFuZC5uZXcoItis2LnZhCDYp9mE2LnZhtin2LXYsSDZgdix2YrYr9ipIikgZG8KICAgICAgTUhERVNJR046Ok1IREVTSUdOX1VOSVFVSUZZLnJ1bl91bmlxdWlmeQogICAgZW5kCiAgICBjbWQuc21hbGxfaWNvbiA9IEZpbGUuam9pbihQTFVHSU5fRElSLCAiaWNvbnMvdW5pcXVlX2ljb24ucG5nIikgcmVzY3VlIG5pbAogICAgY21kLmxhcmdlX2ljb24gPSBGaWxlLmpvaW4oUExVR0lOX0RJUiwgImljb25zL3VuaXF1ZV9pY29uLnBuZyIpIHJlc2N1ZSBuaWwKICAgIGNtZC50b29sdGlwID0gItis2LnZhCDYrNmF2YrYuSDYp9mE2LnZhtin2LXYsSDZgdix2YrYr9ipIgogICAgdG9vbGJhci5hZGRfaXRlbShjbWQpCgogICAgIyDYstixINmF2LnZhNmI2YXYp9iqINin2YTZhdiz2KrYrtiv2YUKICAgIGNtZCA9IFVJOjpDb21tYW5kLm5ldygi2YXYudmE2YjZhdin2Kog2KfZhNmF2LPYqtiu2K/ZhSIpIGRvCiAgICAgIE1IREVTSUdOLnNob3dfdXNlcl9pbmZvCiAgICBlbmQKICAgIGNtZC5zbWFsbF9pY29uID0gRmlsZS5qb2luKFBMVUdJTl9ESVIsICJpY29ucy91c2VyX2ljb24ucG5nIikgcmVzY3VlIG5pbAogICAgY21kLmxhcmdlX2ljb24gPSBGaWxlLmpvaW4oUExVR0lOX0RJUiwgImljb25zL3VzZXJfaWNvbi5wbmciKSByZXNjdWUgbmlsCiAgICBjbWQudG9vbHRpcCA9ICLZhdi52YTZiNmF2KfYqiDYp9mE2YXYs9iq2K7Yr9mFIgogICAgdG9vbGJhci5hZGRfaXRlbShjbWQpCgogICAgIyDYstixINmF2LPYrSDYp9mE2KrYrtiy2YrZhiDYp9mE2YXYpNmC2KoKICAgIGNtZCA9IFVJOjpDb21tYW5kLm5ldygi2YXYs9itINin2YTYqtiu2LLZitmGINin2YTZhdik2YLYqiIpIGRvCiAgICAgIE1IREVTSUdOLmNsZWFyX2NhY2hlCiAgICBlbmQKICAgIGNtZC5zbWFsbF9pY29uID0gRmlsZS5qb2luKFBMVUdJTl9ESVIsICJpY29ucy9jYWNoZV9pY29uLnBuZyIpIHJlc2N1ZSBuaWwKICAgIGNtZC5sYXJnZV9pY29uID0gRmlsZS5qb2luKFBMVUdJTl9ESVIsICJpY29ucy9jYWNoZV9pY29uLnBuZyIpIHJlc2N1ZSBuaWwKICAgIGNtZC50b29sdGlwID0gItmF2LPYrSDYp9mE2KrYrtiy2YrZhiDYp9mE2YXYpNmC2KoiCiAgICB0b29sYmFyLmFkZF9pdGVtKGNtZCkKCiAgICB0b29sYmFyLnNob3cKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09INmG2KfZgdiw2Kkg2KfZhNmF2YPYqtio2KkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogIGRlZiBzZWxmLnNob3dfY29tcG9uZW50c19kaWFsb2cKICAgIHVubGVzcyBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJhY3RpdmF0ZWRfb25jZSIpCiAgICAgIGFjdGl2YXRlKGZhbHNlKQogICAgICByZXR1cm4gdW5sZXNzIFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImFjdGl2YXRlZF9vbmNlIikKICAgIGVuZAoKICAgIEBjb21wb25lbnRzX2RpYWxvZyA9IFVJOjpIdG1sRGlhbG9nLm5ldyh7CiAgICAgIDpkaWFsb2dfdGl0bGUgPT4gItmF2YPYqtio2KkgTUhERVNJR04gLSDYudmG2KfYtdixINin2YTYqti12YXZitmFIiwKICAgICAgOnByZWZlcmVuY2VzX2tleSA9PiAibWhkZXNpZ25fY29tcG9uZW50cyIsCiAgICAgIDpzY3JvbGxhYmxlID0+IHRydWUsCiAgICAgIDpyZXNpemFibGUgPT4gdHJ1ZSwKICAgICAgOndpZHRoID0+IDkwMCwKICAgICAgOmhlaWdodCA9PiA3MDAsCiAgICAgIDptaW5fd2lkdGggPT4gODAwLAogICAgICA6bWluX2hlaWdodCA9PiA2MDAsCiAgICAgIDpzdHlsZSA9PiBVSTo6SHRtbERpYWxvZzo6U1RZTEVfRElBTE9HCiAgICB9KQoKICAgIGh0bWxfY29udGVudCA9IDw8LUhUTUwKPCFET0NUWVBFIGh0bWw+CjxodG1sIGRpcj0icnRsIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+2YXZg9iq2KjYqSBNSERFU0lHTjwvdGl0bGU+CiAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVRhamF3YWw6d2dodEAzMDA7NDAwOzUwMDs3MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgogICAgPHN0eWxlPgogICAgICAgICogewogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGJvZHkgewogICAgICAgICAgICBmb250LWZhbWlseTogJ1RhamF3YWwnLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOwogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjsKICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jb250YWluZXIgewogICAgICAgICAgICBtYXgtd2lkdGg6IDE0MDBweDsKICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDIwcHggNjBweCByZ2JhKDAsMCwwLDAuMyk7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5oZWFkZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIHBhZGRpbmc6IDMwcHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogNXB4IHNvbGlkICM0YTU1Njg7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5oZWFkZXIgaDEgewogICAgICAgICAgICBmb250LXNpemU6IDIuOHJlbTsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDJweCAycHggNHB4IHJnYmEoMCwwLDAsMC4zKTsKICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDFweDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmhlYWRlciBwIHsKICAgICAgICAgICAgZm9udC1zaXplOiAxLjJyZW07CiAgICAgICAgICAgIG9wYWNpdHk6IDAuOTsKICAgICAgICAgICAgbWF4LXdpZHRoOiA4MDBweDsKICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5zZWFyY2gtY29udGFpbmVyIHsKICAgICAgICAgICAgcGFkZGluZzogMjVweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y3ZmFmYzsKICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlMmU4ZjA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgICNzZWFyY2hJbnB1dCB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBwYWRkaW5nOiAxOHB4IDI1cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4xcmVtOwogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjY2JkNWUwOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdUYWphd2FsJywgc2Fucy1zZXJpZjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgI3NlYXJjaElucHV0OmZvY3VzIHsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjNjY3ZWVhOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMCAzcHggcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjEpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAjc2VhcmNoSW5wdXQ6OnBsYWNlaG9sZGVyIHsKICAgICAgICAgICAgY29sb3I6ICNhMGFlYzA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jb21wb25lbnRzLWdyaWQgewogICAgICAgICAgICBkaXNwbGF5OiBncmlkOwogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgyODBweCwgMWZyKSk7CiAgICAgICAgICAgIGdhcDogMjVweDsKICAgICAgICAgICAgcGFkZGluZzogMzBweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2Y1ZjdmYSAwJSwgI2MzY2ZlMiAxMDAlKTsKICAgICAgICAgICAgbWluLWhlaWdodDogNTAwcHg7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jb21wb25lbnQtY2FyZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNXB4OwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC40cyBjdWJpYy1iZXppZXIoMC4xNzUsIDAuODg1LCAwLjMyLCAxLjI3NSk7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMTBweCAzMHB4IHJnYmEoMCwwLDAsMC4wOCk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlMmU4ZjA7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY29tcG9uZW50LWNhcmQ6aG92ZXIgewogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpIHNjYWxlKDEuMDMpOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDI1cHggNTBweCByZ2JhKDAsMCwwLDAuMTUpOwogICAgICAgICAgICBib3JkZXItY29sb3I6ICM2NjdlZWE7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jb21wb25lbnQtaW1hZ2UgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxODBweDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jb21wb25lbnQtaW1hZ2UgaW1nIHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7CiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjVzIGVhc2U7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jb21wb25lbnQtY2FyZDpob3ZlciAuY29tcG9uZW50LWltYWdlIGltZyB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNvbXBvbmVudC1pbmZvIHsKICAgICAgICAgICAgcGFkZGluZzogMjJweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jb21wb25lbnQtbmFtZSB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS40cmVtOwogICAgICAgICAgICBmb250LXdlaWdodDogNzAwOwogICAgICAgICAgICBjb2xvcjogIzJkMzc0ODsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMzsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNvbXBvbmVudC1kZXNjcmlwdGlvbiB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTsKICAgICAgICAgICAgY29sb3I6ICM3MTgwOTY7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jb21wb25lbnQtdGFncyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsKICAgICAgICAgICAgZ2FwOiA4cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC50YWcgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIHBhZGRpbmc6IDZweCAxNHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4OwogICAgICAgICAgICBmb250LXNpemU6IDAuODVyZW07CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5pbnNlcnQtYnV0dG9uIHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIHBhZGRpbmc6IDE0cHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgICAgICAgICBmb250LXNpemU6IDEuMXJlbTsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwogICAgICAgICAgICBmb250LWZhbWlseTogJ1RhamF3YWwnLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC41cHg7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5pbnNlcnQtYnV0dG9uOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzVhNjdkOCAwJSwgIzZiNDZjMSAxMDAlKTsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDIwcHggcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjQpOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5pbnNlcnQtYnV0dG9uOmFjdGl2ZSB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmxvYWRpbmcgewogICAgICAgICAgICBncmlkLWNvbHVtbjogMSAvIC0xOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIHBhZGRpbmc6IDYwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4zcmVtOwogICAgICAgICAgICBjb2xvcjogIzY2N2VlYTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLm5vLXJlc3VsdHMgewogICAgICAgICAgICBncmlkLWNvbHVtbjogMSAvIC0xOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIHBhZGRpbmc6IDYwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4zcmVtOwogICAgICAgICAgICBjb2xvcjogIzcxODA5NjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmZvb3RlciB7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgcGFkZGluZzogMjVweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzJkMzc0ODsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBmb250LXNpemU6IDFyZW07CiAgICAgICAgICAgIGJvcmRlci10b3A6IDVweCBzb2xpZCAjNGE1NTY4OwogICAgICAgIH0KICAgICAgICAKICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsKICAgICAgICAgICAgLmNvbXBvbmVudHMtZ3JpZCB7CiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgyNTBweCwgMWZyKSk7CiAgICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAuaGVhZGVyIGgxIHsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMi4ycmVtOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+CiAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyIj4KICAgICAgICAgICAgPGgxPvCfk5og2YXZg9iq2KjYqSBNSERFU0lHTjwvaDE+CiAgICAgICAgICAgIDxwPtmF2KzZhdmI2LnYqSDZhdiq2YPYp9mF2YTYqSDZhdmGINi52YbYp9i12LEg2KfZhNiq2LXZhdmK2YUg2KfZhNis2KfZh9iy2Kkg2YTZhNin2LPYqtiu2K/Yp9mFINmB2Yog2YXYtNin2LHZiti52YM8L3A+CiAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0ic2VhcmNoLWNvbnRhaW5lciI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VhcmNoSW5wdXQiIHBsYWNlaG9sZGVyPSLwn5SNINin2KjYrdirINi52YYg2LnZhti12LEg2YXYudmK2YYuLi4iIGF1dG9jb21wbGV0ZT0ib2ZmIj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJjb21wb25lbnRzLWdyaWQiIGlkPSJjb21wb25lbnRzR3JpZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxvYWRpbmciPuKPsyDYrNin2LHZiiDYqtit2YXZitmEINin2YTYudmG2KfYtdixLi4uPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0iZm9vdGVyIj4KICAgICAgICAgICAgPHA+wqkgMjAyNCBNSERFU0lHTiBMaWJyYXJ5IHwg2KzZhdmK2Lkg2KfZhNit2YLZiNmCINmF2K3ZgdmI2LjYqTwvcD4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxzY3JpcHQ+CiAgICAgICAgbGV0IGFsbENvbXBvbmVudHMgPSBbXTsKICAgICAgICAKICAgICAgICAvLyDYrNmE2Kgg2KfZhNio2YrYp9mG2KfYqiDZhdmGINin2YTYs9mD2LHZitio2KoKICAgICAgICBmdW5jdGlvbiBsb2FkQ29tcG9uZW50cygpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSAje0NPTVBPTkVOVFMudG9fanNvbn07CiAgICAgICAgICAgICAgICBhbGxDb21wb25lbnRzID0gY29tcG9uZW50czsKICAgICAgICAgICAgICAgIGRpc3BsYXlDb21wb25lbnRzKGFsbENvbXBvbmVudHMpOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXBvbmVudHNHcmlkJykuaW5uZXJIVE1MID0gCiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9Im5vLXJlc3VsdHMiPuKaoCDYrdiv2Ksg2K7Yt9ijINmB2Yog2KrYrdmF2YrZhCDYp9mE2YXZg9iq2KjYqTwvZGl2Pic7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGNvbXBvbmVudHM6JywgZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vINi52LHYtiDYp9mE2LnZhtin2LXYsQogICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlDb21wb25lbnRzKGNvbXBvbmVudHMpIHsKICAgICAgICAgICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wb25lbnRzR3JpZCcpOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKCFjb21wb25lbnRzIHx8IGNvbXBvbmVudHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBncmlkLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJuby1yZXN1bHRzIj7imqAg2YTYpyDYqtmI2KzYryDYudmG2KfYtdixINmF2KrYp9it2Kkg2K3Yp9mE2YrZi9inPC9kaXY+JzsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgZ3JpZC5pbm5lckhUTUwgPSBjb21wb25lbnRzLm1hcChjb21wID0+IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbXBvbmVudC1jYXJkIiBkYXRhLW5hbWU9IiR7Y29tcC5uYW1lIHx8ICcnfSIgZGF0YS1kZXNjPSIke2NvbXAuZGVzY3JpcHRpb24gfHwgJyd9Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21wb25lbnQtaW1hZ2UiPgogICAgICAgICAgICAgICAgICAgICAgICAke2NvbXAuaW1hZ2UgPyBgPGltZyBzcmM9IiR7Y29tcC5pbWFnZX0iIGFsdD0iJHtjb21wLm5hbWUgfHwgJyd9IiBvbmVycm9yPSJ0aGlzLnN0eWxlLmRpc3BsYXk9J25vbmUnIj5gIDogCiAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9ImNvbG9yOndoaXRlO2ZvbnQtc2l6ZTo0OHB4OyI+8J+TkDwvZGl2Pid9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tcG9uZW50LWluZm8iPgogICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9ImNvbXBvbmVudC1uYW1lIj4ke2NvbXAubmFtZSB8fCAn2LnZhti12LEg2KjYr9mI2YYg2KfYs9mFJ308L2gzPgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0iY29tcG9uZW50LWRlc2NyaXB0aW9uIj4ke2NvbXAuZGVzY3JpcHRpb24gfHwgJ9mE2Kcg2YrZiNis2K8g2YjYtdmBJ308L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAke2NvbXAudGFncyAmJiBjb21wLnRhZ3MubGVuZ3RoID4gMCA/IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbXBvbmVudC10YWdzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2NvbXAudGFncy5tYXAodGFnID0+IGA8c3BhbiBjbGFzcz0idGFnIj4ke3RhZ308L3NwYW4+YCkuam9pbignJyl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgYCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaW5zZXJ0LWJ1dHRvbiIgb25jbGljaz0iaW5zZXJ0Q29tcG9uZW50KCcke2NvbXAudXJsIHx8ICcnfScsICcke2NvbXAubmFtZSB8fCAnJ30nKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn4+X77iPINil2K/Ysdin2Kwg2YHZiiDYp9mE2KrYtdmF2YrZhQogICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgKS5qb2luKCcnKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8g2KjYrdirINin2YTYudmG2KfYtdixCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaElucHV0JykuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBlLnRhcmdldC52YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICghc2VhcmNoVGVybSkgewogICAgICAgICAgICAgICAgZGlzcGxheUNvbXBvbmVudHMoYWxsQ29tcG9uZW50cyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gYWxsQ29tcG9uZW50cy5maWx0ZXIoY29tcCA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gKGNvbXAubmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIGNvbnN0IGRlc2MgPSAoY29tcC5kZXNjcmlwdGlvbiB8fCAnJykudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSAoY29tcC50YWdzIHx8IFtdKS5tYXAodCA9PiB0LnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZS5pbmNsdWRlcyhzZWFyY2hUZXJtKSB8fCAKICAgICAgICAgICAgICAgICAgICAgICBkZXNjLmluY2x1ZGVzKHNlYXJjaFRlcm0pIHx8IAogICAgICAgICAgICAgICAgICAgICAgIHRhZ3Muc29tZSh0YWcgPT4gdGFnLmluY2x1ZGVzKHNlYXJjaFRlcm0pKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBkaXNwbGF5Q29tcG9uZW50cyhmaWx0ZXJlZCk7CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgLy8g2KXYr9ix2KfYrCDYp9mE2LnZhti12LEKICAgICAgICBmdW5jdGlvbiBpbnNlcnRDb21wb25lbnQodXJsLCBuYW1lKSB7CiAgICAgICAgICAgIGlmICghdXJsKSB7CiAgICAgICAgICAgICAgICBhbGVydCgn4p2MINix2KfYqNi3INin2YTYudmG2LXYsSDYutmK2LEg2YXYqtmI2YHYsScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBkYXRhID0gewogICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyDYpdix2LPYp9mEINin2YTYqNmK2KfZhtin2Kog2YTYs9mD2LHZitio2Kog2LHZiNio2YoKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnc2twOmluc2VydF9jb21wb25lbnRAJyArIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vINiq2K3ZhdmK2YQg2KfZhNi52YbYp9i12LEg2LnZhtivINmB2KrYrSDYp9mE2LXZgdit2KkKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGxvYWRDb21wb25lbnRzKTsKICAgICAgICAKICAgICAgICAvLyDYqti12YHZitipINiz2LHZiti52Kkg2LnZhtivINin2YTYtti62Lcg2LnZhNmJIEN0cmwrRgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmIChlLmN0cmxLZXkgJiYgZS5rZXkgPT09ICdmJykgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaElucHV0JykuZm9jdXMoKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgogICAgSFRNTAoKICAgIEBjb21wb25lbnRzX2RpYWxvZy5zZXRfaHRtbChodG1sX2NvbnRlbnQpCiAgICAKICAgICMg2YXYudin2YTYrCDYpdiv2LHYp9isINin2YTYudmG2LXYsQogICAgQGNvbXBvbmVudHNfZGlhbG9nLmFkZF9hY3Rpb25fY2FsbGJhY2soImluc2VydF9jb21wb25lbnQiKSBkbyB8YWN0aW9uLCBkYXRhX3N0cnwKICAgICAgYmVnaW4KICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhX3N0cikKICAgICAgICBjb21wID0geyB1cmw6IGRhdGFbJ3VybCddLCBuYW1lOiBkYXRhWyduYW1lJ10gfQogICAgICAgIAogICAgICAgICMg2KfZhNio2K3YqyDYudmGINin2YTYudmG2LXYsSDZgdmKINin2YTZhdi12YHZiNmB2Kkg2KfZhNij2LXZhNmK2KkKICAgICAgICBvcmlnaW5hbF9jb21wID0gQ09NUE9ORU5UUy5maW5kIHsgfGN8IGNbOnVybF0gPT0gZGF0YVsndXJsJ10gfQogICAgICAgIGNvbXBfZGF0YSA9IG9yaWdpbmFsX2NvbXAgfHwgeyB1cmw6IGRhdGFbJ3VybCddLCBuYW1lOiBkYXRhWyduYW1lJ10gfQogICAgICAgIAogICAgICAgIE1IREVTSUdOLmZldGNoX2RlZmluaXRpb25fYXN5bmMoY29tcF9kYXRhKSBkbyB8ZGVmaW5pdGlvbnwKICAgICAgICAgIGlmIGRlZmluaXRpb24KICAgICAgICAgICAgbW9kZWwgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwKICAgICAgICAgICAgbW9kZWwucGxhY2VfY29tcG9uZW50KGRlZmluaXRpb24pCiAgICAgICAgICAgIAogICAgICAgICAgICAjINiq2KvYqNmK2Kog2KfZhNmF2LHYp9mC2Kgg2YTZgdmDINin2YTYr9mK2YbYp9mF2YrZgyDYpdiw2Kcg2YTYstmFINin2YTYo9mF2LEKICAgICAgICAgICAgTUhERVNJR04uaW5zdGFsbF9wbGFjZV9vYnNlcnZlcl9mb3IoZGVmaW5pdGlvbikKICAgICAgICAgICAgCiAgICAgICAgICAgICMg2KXYutmE2KfZgiDYp9mE2YbYp9mB2LDYqSDYqNi52K8g2KfZhNil2K/Ysdin2KwKICAgICAgICAgICAgQGNvbXBvbmVudHNfZGlhbG9nLmNsb3NlIGlmIEBjb21wb25lbnRzX2RpYWxvZy52aXNpYmxlPwogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIHJlc2N1ZSA9PiBlCiAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINit2K/YqyDYrti32KMg2KPYq9mG2KfYoSDYpdiv2LHYp9isINin2YTYudmG2LXYsTogI3tlLm1lc3NhZ2V9IikKICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgQGNvbXBvbmVudHNfZGlhbG9nLnNob3cKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09INiq2YfZitim2Kkg2KfZhNmC2KfYptmF2KkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogIHVubGVzcyBmaWxlX2xvYWRlZD8oX19GSUxFX18pCiAgICBtZW51ID0gVUkubWVudSgiUGx1Z2lucyIpLmFkZF9zdWJtZW51KCJNSERFU0lHTiIpCiAgICAKICAgIG1lbnUuYWRkX2l0ZW0oItiq2YHYudmK2YQiKSBkbwogICAgICBNSERFU0lHTi5hY3RpdmF0ZSh0cnVlKQogICAgZW5kCiAgICAKICAgIG1lbnUuYWRkX2l0ZW0oItmF2LnZhNmI2YXYp9iqINin2YTZhdiz2KrYrtiv2YUiKSBkbwogICAgICBNSERFU0lHTi5zaG93X3VzZXJfaW5mbwogICAgZW5kCiAgICAKICAgIG1lbnUuYWRkX3NlcGFyYXRvcgogICAgCiAgICBtZW51LmFkZF9pdGVtKCLZhdmD2KrYqNipINin2YTYudmG2KfYtdixIikgZG8KICAgICAgTUhERVNJR04uc2hvd19jb21wb25lbnRzX2RpYWxvZwogICAgZW5kCiAgICAKICAgIG1lbnUuYWRkX2l0ZW0oItil2YbYtNin2KEg2YHYp9iq2YjYsdipIikgZG8KICAgICAgTUhERVNJR04uY2FsbF9pbnZvaWNlX3BsdWdpbgogICAgZW5kCiAgICAKICAgIG1lbnUuYWRkX2l0ZW0oItiq2YLYsdmK2LEg2KfZhNmI2K3Yr9in2KoiKSBkbwogICAgICBNSERFU0lHTi5jYWxsX3JlcG9ydHNfcGx1Z2luCiAgICBlbmQKICAgIAogICAgbWVudS5hZGRfaXRlbSgi2KzYudmEINin2YTYudmG2KfYtdixINmB2LHZitiv2KkiKSBkbwogICAgICBNSERFU0lHTjo6TUhERVNJR05fVU5JUVVJRlkucnVuX3VuaXF1aWZ5CiAgICBlbmQKICAgIAogICAgbWVudS5hZGRfc2VwYXJhdG9yCiAgICAKICAgIG1lbnUuYWRkX2l0ZW0oItmF2LPYrSDYp9mE2KrYrtiy2YrZhiDYp9mE2YXYpNmC2KoiKSBkbwogICAgICBNSERFU0lHTi5jbGVhcl9jYWNoZQogICAgZW5kCiAgICAKICAgIG1lbnUuYWRkX3NlcGFyYXRvcgogICAgCiAgICBtZW51LmFkZF9pdGVtKCLYpdmG2LTYp9ihIFRvb2xiYXIiKSBkbwogICAgICBNSERFU0lHTi5jcmVhdGVfbWFpbl90b29sYmFyCiAgICBlbmQKICAgIAogICAgZmlsZV9sb2FkZWQoX19GSUxFX18pCiAgZW5kCmVuZA=="  // كود روبي مشفر بـ base64
}
