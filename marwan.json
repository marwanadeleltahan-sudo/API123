{
  "main_code": "IyBlbmNvZGluZzogVVRGLTgKcmVxdWlyZSAnc2tldGNodXAucmInCnJlcXVpcmUgJ25ldC9odHRwJwpyZXF1aXJlICd1cmknCnJlcXVpcmUgJ2pzb24nCnJlcXVpcmUgJ3NlY3VyZXJhbmRvbScKcmVxdWlyZSAnb3Blbi11cmknCnJlcXVpcmUgJ3RtcGRpcicKcmVxdWlyZSAnYmFzZTY0JwpyZXF1aXJlICd0ZW1wZmlsZScKcmVxdWlyZSAnZGlnZXN0JwpyZXF1aXJlICdmaWxldXRpbHMnCnJlcXVpcmUgJ3psaWInICMgCgptb2R1bGUgTUhERVNJR04KICBQTFVHSU5fTkFNRSA9ICJNSERFU0lHTiIKICBBUElfVVJMID0gImh0dHBzOi8vbWFobW91ZGRlc2lnbi5jb20vd3AtanNvbi9taGRlc2lnbi9WNC92YWxpZGF0ZSIKCiAgT1BFTl9USU1FT1VUID0gOAogIFJFQURfVElNRU9VVCA9IDEyCgogICMg4pyFIEZJWCAxOiBldmFsINmK2KzYudmEIF9fRklMRV9fID0gKGV2YWwpID0+IEZpbGUuZGlybmFtZShfX0ZJTEVfXykg2LrZhNi3CiAgIyDZhtin2K7YsCBQTFVHSU5fRElSINin2YTYrdmC2YrZgtmKINmF2YYgbWFpbi5yYiDZhNmIINmF2YjYrNmI2K8KICBQTFVHSU5fRElSID0KICAgIGJlZ2luCiAgICAgIGlmIE9iamVjdC5jb25zdF9kZWZpbmVkPyg6UExVR0lOX0RJUikgJiYgOjpQTFVHSU5fRElSICYmICE6OlBMVUdJTl9ESVIudG9fcy5zdHJpcC5lbXB0eT8KICAgICAgICA6OlBMVUdJTl9ESVIKICAgICAgZWxzZQogICAgICAgIEZpbGUuZXhwYW5kX3BhdGgoRmlsZS5kaXJuYW1lKF9fRklMRV9fKSkKICAgICAgZW5kCiAgICByZXNjdWUKICAgICAgbmlsCiAgICBlbmQKCiAgQ09NUE9ORU5UUyA9IGJlZ2luCiAgICB1cmwgPSAiaHR0cHM6Ly9tYWhtb3VkZGVzaWduLmNvbS9TS0VUQ0hVUC9jb21wb25lbnRzLVY0Lmpzb24iCiAgICBqc29uX3JhdyA9IFVSSS5vcGVuKHVybCkucmVhZAogICAganNvbl9kYXRhID0gSlNPTi5wYXJzZShqc29uX3JhdykKICAgIGRlY29kZWRfanNvbiA9IEJhc2U2NC5kZWNvZGU2NChqc29uX2RhdGFbImRhdGEiXSkKICAgIEpTT04ucGFyc2UoZGVjb2RlZF9qc29uLCBzeW1ib2xpemVfbmFtZXM6IHRydWUpCiAgcmVzY3VlID0+IGUKICAgIFVJLm1lc3NhZ2Vib3goIuKdjCDZgdi02YQg2KrYrdmF2YrZhCDYqNmK2KfZhtin2Kog2KfZhNmF2YPYqtio2Kk6ICN7ZS5tZXNzYWdlfSIpCiAgICBbXQogIGVuZAoKICAjID09PT09PT09PT09PT09PT09PT09INio2YrYp9mG2KfYqiDYp9mE2KrZgdi52YrZhCDYp9mE2KvYp9io2KrYqSA9PT09PT09PT09PT09PT09PT09PQogIEZJWEVEX0VNQUlMID0gIm1AbS5jb20iCiAgRklYRURfTElDRU5TRSA9ICIxMjM0NTYiCgogIGRlZiBzZWxmLmh1bWFuaXplX3NlY29uZHModG90YWwpCiAgICB0b3RhbCA9IHRvdGFsLnRvX2kKICAgIG0sIHMgPSB0b3RhbC5kaXZtb2QoNjApCiAgICBoLCBtID0gbS5kaXZtb2QoNjApCiAgICBwYXJ0cyA9IFtdCiAgICBwYXJ0cyA8PCAiI3tofSDYs9in2LnYqSIgICBpZiBoID4gMAogICAgcGFydHMgPDwgIiN7bX0g2K/ZgtmK2YLYqSIgIGlmIG0gPiAwCiAgICBwYXJ0cyA8PCAiI3tzfSDYq9in2YbZitipIiAgaWYgcyA+IDAgfHwgcGFydHMuZW1wdHk/CiAgICBwYXJ0cy5qb2luKCcg2YggJykKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PSBBUEkgQWN0aXZhdGUgPT09PT09PT09PT09PT09PT09PT0KICBkZWYgc2VsZi5hY3RpdmF0ZShmb3JjZV9wcm9tcHQgPSB0cnVlKQogICAgIyDYpdiw2Kcg2YPYp9mGINmF2YHYudmEINmF2LPYqNmC2KfZi9iMINmG2LHYrNi5IHRydWUg2YXYqNin2LTYsdipCiAgICBpZiBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJhY3RpdmF0ZWRfb25jZSIpCiAgICAgIHJldHVybiB0cnVlCiAgICBlbmQKCiAgICAjINmF2K3Yp9mI2YTYqSDYp9mE2KrZgdi52YrZhCDYp9mE2KrZhNmC2KfYptmKINio2KfZhNio2YrYp9mG2KfYqiDYp9mE2KvYp9io2KrYqQogICAgZW1haWwgPSBGSVhFRF9FTUFJTAogICAgbGljZW5zZSA9IEZJWEVEX0xJQ0VOU0UKCiAgICBiZWdpbgogICAgICAjINmG2K3Yp9mI2YQg2KfZhNin2KrYtdin2YQg2KjYp9mE2LPZitix2YHYsSDZhNmE2KrYrdmC2YIgKNin2K7YqtmK2KfYsdmKKQogICAgICB1cmkgPSBVUkkoQVBJX1VSTCkKCiAgICAgIGh0dHAgPSBOZXQ6OkhUVFAubmV3KHVyaS5ob3N0LCB1cmkucG9ydCkKICAgICAgaHR0cC51c2Vfc3NsICAgICAgPSAodXJpLnNjaGVtZSA9PSAnaHR0cHMnKQogICAgICBodHRwLm9wZW5fdGltZW91dCA9IE9QRU5fVElNRU9VVAogICAgICBodHRwLnJlYWRfdGltZW91dCA9IFJFQURfVElNRU9VVAoKICAgICAgcmVxID0gTmV0OjpIVFRQOjpQb3N0Lm5ldyh1cmkucmVxdWVzdF91cmkpCiAgICAgIHJlcVsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbicKICAgICAgcmVxWydVc2VyLUFnZW50J10gICA9ICJTa2V0Y2hVcC8je1NrZXRjaHVwLnZlcnNpb259IFJ1YnkvI3tSVUJZX1ZFUlNJT059ICN7UExVR0lOX05BTUV9IgogICAgICByZXEuYm9keSA9IHsgZW1haWw6IGVtYWlsLCBsaWNlbnNlOiBsaWNlbnNlIH0udG9fanNvbiAjINit2LDZgSBkZXZpY2VfaWQKCiAgICAgIHJlcyAgPSBodHRwLnJlcXVlc3QocmVxKQogICAgICBjb2RlID0gcmVzLmNvZGUudG9faQogICAgICBkYXRhID0gSlNPTi5wYXJzZShyZXMuYm9keSkgcmVzY3VlIHt9CgogICAgICBpZiBjb2RlID09IDIwMCAmJiBkYXRhWyd2YWxpZCddCiAgICAgICAgIyDYrdmB2Lgg2KfZhNio2YrYp9mG2KfYqgogICAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIsIGVtYWlsKQogICAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJsaWNlbnNlIiwgbGljZW5zZSkKICAgICAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiYWN0aXZhdGVkX29uY2UiLCB0cnVlKQoKICAgICAgICBpZiBkYXRhLmtleT8oJ2VuZHNfYXQnKSAmJiAhZGF0YVsnZW5kc19hdCddLnRvX3Muc3RyaXAuZW1wdHk/CiAgICAgICAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZW5kc19hdCIsIGRhdGFbJ2VuZHNfYXQnXS50b19zKQogICAgICAgIGVuZAoKICAgICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYp9mE2KrZgdi52YrZhCDYqNmG2KzYp9itINio2KfYs9iq2K7Yr9in2YUg2KfZhNio2YrYp9mG2KfYqiDYp9mE2KvYp9io2KrYqSIpIGlmIGZvcmNlX3Byb21wdAogICAgICAgIHJldHVybiB0cnVlCiAgICAgIGVuZAoKICAgICAgIyDYpdiw2Kcg2YHYtNmEINin2YTYp9iq2LXYp9mEINio2KfZhNiz2YrYsdmB2LHYjCDZhtmB2LnZkdmEINmF2K3ZhNmK2KfZiwogICAgICBVSS5tZXNzYWdlYm94KCLimqDvuI8g2YHYtNmEINin2YTYp9iq2LXYp9mEINio2KfZhNiz2YrYsdmB2LHYjCDYrNin2LHZiiDYp9mE2KrZgdi52YrZhCDYp9mE2YXYrdmE2YouLi4iKSBpZiBmb3JjZV9wcm9tcHQKICAgICAgCiAgICAgICMg2KfZhNiq2YHYudmK2YQg2KfZhNmF2K3ZhNmKCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIsIGVtYWlsKQogICAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAibGljZW5zZSIsIGxpY2Vuc2UpCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJhY3RpdmF0ZWRfb25jZSIsIHRydWUpCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJsb2NhbF9hY3RpdmF0aW9uIiwgdHJ1ZSkKICAgICAgCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINin2YTYqtmB2LnZitmEINin2YTZhdit2YTZiiDYqNmG2KzYp9itIikgaWYgZm9yY2VfcHJvbXB0CiAgICAgIHJldHVybiB0cnVlCgogICAgcmVzY3VlID0+IGUKICAgICAgIyDYpdiw2Kcg2K3Yr9irINiu2LfYoyDZgdmKINin2YTYp9iq2LXYp9mE2Iwg2YbZgdi52ZHZhCDZhdit2YTZitin2YsKICAgICAgVUkubWVzc2FnZWJveCgi4pqg77iPINmB2LTZhCDYp9mE2KfYqti12KfZhDogI3tlLm1lc3NhZ2V9XG7YrNin2LHZiiDYp9mE2KrZgdi52YrZhCDYp9mE2YXYrdmE2YouLi4iKSBpZiBmb3JjZV9wcm9tcHQKICAgICAgCiAgICAgICMg2KfZhNiq2YHYudmK2YQg2KfZhNmF2K3ZhNmKCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIsIGVtYWlsKQogICAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAibGljZW5zZSIsIGxpY2Vuc2UpCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJhY3RpdmF0ZWRfb25jZSIsIHRydWUpCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJsb2NhbF9hY3RpdmF0aW9uIiwgdHJ1ZSkKICAgICAgCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINin2YTYqtmB2LnZitmEINin2YTZhdit2YTZiiDYqNmG2KzYp9itIikgaWYgZm9yY2VfcHJvbXB0CiAgICAgIHJldHVybiB0cnVlCiAgICBlbmQKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PSBBdXRvIEFjdGl2YXRpb24g2LnZhtivINio2K/YoSDYp9mE2KrYtNi62YrZhCA9PT09PT09PT09PT09PT09PT09PQogIGRlZiBzZWxmLmF1dG9fYWN0aXZhdGVfb25fc3RhcnR1cAogICAgIyDYpdiw2Kcg2YPYp9mGINmF2YHYudmEINmF2LPYqNmC2KfZi9iMINmG2LHYrNi5IHRydWUKICAgIGlmIFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImFjdGl2YXRlZF9vbmNlIikKICAgICAgcmV0dXJuIHRydWUKICAgIGVuZAogICAgCiAgICAjINmF2K3Yp9mI2YTYqSDYp9mE2KrZgdi52YrZhCDYp9mE2KrZhNmC2KfYptmKCiAgICBiZWdpbgogICAgICBlbWFpbCA9IEZJWEVEX0VNQUlMCiAgICAgIGxpY2Vuc2UgPSBGSVhFRF9MSUNFTlNFCiAgICAgIAogICAgICAjINin2YTYqtmB2LnZitmEINin2YTZhdit2YTZiiDZhdio2KfYtNix2Kkg2KjYr9mI2YYg2KfYqti12KfZhCDYqNin2YTYs9mK2LHZgdixCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbWFpbCIsIGVtYWlsKQogICAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAibGljZW5zZSIsIGxpY2Vuc2UpCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJhY3RpdmF0ZWRfb25jZSIsIHRydWUpCiAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJsb2NhbF9hY3RpdmF0aW9uIiwgdHJ1ZSkKICAgICAgU2tldGNodXAud3JpdGVfZGVmYXVsdChQTFVHSU5fTkFNRSwgImF1dG9fYWN0aXZhdGVkIiwgVGltZS5ub3cudG9faSkKICAgICAgCiAgICAgIHB1dHMgIuKchSBNSERFU0lHTjog2KrZhSDYp9mE2KrZgdi52YrZhCDYp9mE2KrZhNmC2KfYptmKIgogICAgICByZXR1cm4gdHJ1ZQogICAgcmVzY3VlID0+IGUKICAgICAgcHV0cyAi4pqg77iPIE1IREVTSUdOOiDZgdi02YQg2KfZhNiq2YHYudmK2YQg2KfZhNiq2YTZgtin2KbZijogI3tlLm1lc3NhZ2V9IgogICAgICByZXR1cm4gZmFsc2UKICAgIGVuZAogIGVuZAoKICAjID09PT09PT09PT09PT09PT09PT09IFVzZXIgSW5mbyA9PT09PT09PT09PT09PT09PT09PQogIGRlZiBzZWxmLnNob3dfdXNlcl9pbmZvCiAgICBlbWFpbCAgID0gU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZW1haWwiKS50b19zCiAgICBsaWNlbnNlID0gU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAibGljZW5zZSIpLnRvX3MKICAgIGVuZHNfYXQgPSBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJlbmRzX2F0IikudG9fcwogICAgbG9jYWxfYWN0aXZhdGlvbiA9IFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImxvY2FsX2FjdGl2YXRpb24iKQoKICAgICMg2KXYsNinINmE2YUg2KrZg9mGINmH2YbYp9mDINio2YrYp9mG2KfYqtiMINmG2LPYqtiu2K/ZhSDYp9mE2KjZitin2YbYp9iqINin2YTYq9in2KjYqtipCiAgICBpZiBlbWFpbC5lbXB0eT8gfHwgbGljZW5zZS5lbXB0eT8KICAgICAgZW1haWwgPSBGSVhFRF9FTUFJTAogICAgICBsaWNlbnNlID0gRklYRURfTElDRU5TRQogICAgZW5kCgogICAgZW5kc190eHQgPSBlbmRzX2F0LnN0cmlwLmVtcHR5PyA/ICLYqtmB2LnZitmEINiv2KfYptmFIiA6IGVuZHNfYXQKICAgIGFjdGl2YXRpb25fdHlwZSA9IGxvY2FsX2FjdGl2YXRpb24gPyAi2YXYrdmE2YogKNio2K/ZiNmGINin2KrYtdin2YQpIiA6ICLYs9mK2LHZgdixIgoKICAgIFVJLm1lc3NhZ2Vib3goCiAgICAgICLwn5GkINio2YrYp9mG2KfYqiDYrdiz2KfYqNmDIChNSERFU0lHTilcblxuIiBcCiAgICAgICLwn5OnINin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZijpcbiN7ZW1haWx9XG5cbiIgXAogICAgICAi8J+UkSDZhdmB2KrYp9itINin2YTYqtix2K7Ziti1OlxuI3tsaWNlbnNlfVxuXG4iIFwKICAgICAgIvCfk4Ug2KfZhtiq2YfYp9ihINin2YTYqtmB2LnZitmEOlxuI3tlbmRzX3R4dH1cblxuIiBcCiAgICAgICLwn4yQINmG2YjYuSDYp9mE2KrZgdi52YrZhDpcbiN7YWN0aXZhdGlvbl90eXBlfSIKICAgICkKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PSBDYWNoZSA9PT09PT09PT09PT09PT09PT09PQogIGRlZiBzZWxmLmNsZWFyX2NhY2hlCiAgICBjYWNoZV9kaXIgPSBGaWxlLmpvaW4oRGlyLnRtcGRpciwgIm1oZGVzaWduX2NhY2hlXzEiKQogICAgRmlsZVV0aWxzLnJtX3JmKGNhY2hlX2RpcikgaWYgRmlsZS5kaXJlY3Rvcnk/KGNhY2hlX2RpcikKICAgIFVJLm1lc3NhZ2Vib3goIuKchSDYqtmFINin2YTYqtit2K/ZitirINio2YbYrNin2K0uIikKICByZXNjdWUgPT4gZQogICAgVUkubWVzc2FnZWJveCgi4p2MINmB2LTZhCDYp9mE2KrYrdiv2YrYqzogI3tlLm1lc3NhZ2V9IikKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PSBEeW5hbWljIGhlbHBlcnMgPT09PT09PT09PT09PT09PT09PT0KICBkZWYgc2VsZi5keW5hbWljPyhpbnN0YW5jZSkKICAgIHJldHVybiBmYWxzZSB1bmxlc3MgaW5zdGFuY2UuaXNfYT8oU2tldGNodXA6OkNvbXBvbmVudEluc3RhbmNlKQogICAgISFpbnN0YW5jZS5hdHRyaWJ1dGVfZGljdGlvbmFyeSgiZHluYW1pY19hdHRyaWJ1dGVzIiwgZmFsc2UpCiAgcmVzY3VlCiAgICBmYWxzZQogIGVuZAoKICBkZWYgc2VsZi51bndyYXBfdG9fZHluYW1pYyEoaW5zdGFuY2UpCiAgICByZXR1cm4gaW5zdGFuY2UgaWYgZHluYW1pYz8oaW5zdGFuY2UpCgogICAgZW50cyA9IGluc3RhbmNlLmRlZmluaXRpb24uZW50aXRpZXMudG9fYQogICAgY2hpbGRzID0gZW50cy5ncmVwKFNrZXRjaHVwOjpDb21wb25lbnRJbnN0YW5jZSkKICAgIGR5bl9jaGlsZHMgPSBjaGlsZHMuc2VsZWN0IHsgfGN8IGR5bmFtaWM/KGMpIH0KICAgIHJldHVybiBpbnN0YW5jZSBpZiBkeW5fY2hpbGRzLmVtcHR5PwoKICAgIG1vZGVsID0gU2tldGNodXAuYWN0aXZlX21vZGVsCiAgICBtb2RlbC5zdGFydF9vcGVyYXRpb24oIlVud3JhcCBEeW5hbWljIENvbXBvbmVudCIsIHRydWUpCiAgICBiZWdpbgogICAgICBwYXJlbnRfZW50cyA9IGluc3RhbmNlLnBhcmVudC5lbnRpdGllcwogICAgICBiZWZvcmVfaWRzID0gcGFyZW50X2VudHMudG9fYS5tYXAoJjplbnRpdHlJRCkKCiAgICAgIGluc3RhbmNlLmV4cGxvZGUKCiAgICAgIGFmdGVyID0gcGFyZW50X2VudHMudG9fYS5yZWplY3QgeyB8ZXwgYmVmb3JlX2lkcy5pbmNsdWRlPyhlLmVudGl0eUlEKSB9CiAgICAgIGFmdGVyX2luc3RzID0gYWZ0ZXIuZ3JlcChTa2V0Y2h1cDo6Q29tcG9uZW50SW5zdGFuY2UpCgogICAgICBkeW4gPSBhZnRlcl9pbnN0cy5maW5kIHsgfHh8IGR5bmFtaWM/KHgpIH0gfHwgYWZ0ZXJfaW5zdHMuZmlyc3QKICAgICAgbW9kZWwuc2VsZWN0aW9uLmNsZWFyCiAgICAgIG1vZGVsLnNlbGVjdGlvbi5hZGQoZHluKSBpZiBkeW4KICAgICAgbW9kZWwuY29tbWl0X29wZXJhdGlvbgogICAgICBkeW4gfHwgaW5zdGFuY2UKICAgIHJlc2N1ZQogICAgICBtb2RlbC5hYm9ydF9vcGVyYXRpb24gcmVzY3VlIG5pbAogICAgICBpbnN0YW5jZQogICAgZW5kCiAgZW5kCgogIGNsYXNzIFBsYWNlQW5kVW53cmFwT2JzZXJ2ZXIgPCBTa2V0Y2h1cDo6RW50aXRpZXNPYnNlcnZlcgogICAgZGVmIGluaXRpYWxpemUodGFyZ2V0X2RlZikKICAgICAgQHRhcmdldF9kZWYgPSB0YXJnZXRfZGVmCiAgICAgIEBkb25lID0gZmFsc2UKICAgIGVuZAoKICAgIGRlZiBvbkVsZW1lbnRBZGRlZChlbnRpdGllcywgZW50aXR5KQogICAgICByZXR1cm4gaWYgQGRvbmUKICAgICAgcmV0dXJuIHVubGVzcyBlbnRpdHkuaXNfYT8oU2tldGNodXA6OkNvbXBvbmVudEluc3RhbmNlKQogICAgICByZXR1cm4gdW5sZXNzIGVudGl0eS5kZWZpbml0aW9uID09IEB0YXJnZXRfZGVmCgogICAgICBAZG9uZSA9IHRydWUKICAgICAgbW9kZWwgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwKCiAgICAgIFVJLnN0YXJ0X3RpbWVyKDAuMCwgZmFsc2UpIGRvCiAgICAgICAgYmVnaW4KICAgICAgICAgIGluc3QyID0gTUhERVNJR04udW53cmFwX3RvX2R5bmFtaWMhKGVudGl0eSkKICAgICAgICAgIG1vZGVsLnNlbGVjdGlvbi5jbGVhcgogICAgICAgICAgbW9kZWwuc2VsZWN0aW9uLmFkZChpbnN0MikgaWYgaW5zdDIKICAgICAgICByZXNjdWUKICAgICAgICBlbnN1cmUKICAgICAgICAgIGJlZ2luCiAgICAgICAgICAgIGVudGl0aWVzLnJlbW92ZV9vYnNlcnZlcihzZWxmKQogICAgICAgICAgcmVzY3VlCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQKCiAgZGVmIHNlbGYuaW5zdGFsbF9wbGFjZV9vYnNlcnZlcl9mb3IoZGVmaW5pdGlvbikKICAgIGVudHMgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuZW50aXRpZXMKICAgIG9icyA9IFBsYWNlQW5kVW53cmFwT2JzZXJ2ZXIubmV3KGRlZmluaXRpb24pCiAgICBlbnRzLmFkZF9vYnNlcnZlcihvYnMpCgogICAgVUkuc3RhcnRfdGltZXIoMjAuMCwgZmFsc2UpIGRvCiAgICAgIGJlZ2luCiAgICAgICAgZW50cy5yZW1vdmVfb2JzZXJ2ZXIob2JzKQogICAgICByZXNjdWUKICAgICAgZW5kCiAgICBlbmQKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PSBEb3dubG9hZCBkZWZpbml0aW9uICsgcHJvZ3Jlc3MgPT09PT09PT09PT09PT09PT09PT0KICBkZWYgc2VsZi5mZXRjaF9kZWZpbml0aW9uX2FzeW5jKGNvbXAsICZibG9jaykKICAgIGJlZ2luCiAgICAgIHVybCA9IFVSSS5wYXJzZShjb21wWzp1cmxdLnRvX3MpCiAgICAgIGNhY2hlX2RpciA9IEZpbGUuam9pbihEaXIudG1wZGlyLCAibWhkZXNpZ25fY2FjaGVfMSIpCiAgICAgIEZpbGVVdGlscy5ta2Rpcl9wKGNhY2hlX2RpcikKCiAgICAgIGhhc2hfbmFtZSAgPSBEaWdlc3Q6OlNIQTI1Ni5oZXhkaWdlc3QodXJsLnRvX3MpWzAuLjE2XSArICIuc2twIgogICAgICBsb2NhbF9wYXRoID0gRmlsZS5qb2luKGNhY2hlX2RpciwgaGFzaF9uYW1lKQogICAgICBtb2RlbCAgICAgID0gU2tldGNodXAuYWN0aXZlX21vZGVsCgogICAgICBpZiBGaWxlLmV4aXN0Pyhsb2NhbF9wYXRoKSAmJiBGaWxlLnNpemUobG9jYWxfcGF0aCkgPiAwCiAgICAgICAgZGVmaW5pdGlvbiA9IG1vZGVsLmRlZmluaXRpb25zLmxvYWQobG9jYWxfcGF0aCwgYWxsb3dfbmV3ZXI6IHRydWUpCiAgICAgICAgYmxvY2suY2FsbChkZWZpbml0aW9uKSBpZiBibG9jawogICAgICAgIHJldHVybgogICAgICBlbmQKCiAgICAgIHByb2dyZXNzID0gVUk6Okh0bWxEaWFsb2cubmV3KHsKICAgICAgICA6ZGlhbG9nX3RpdGxlID0+ICLYqtit2YXZitmEINin2YTZhdmD2YjZhi4uLiIsCiAgICAgICAgOnByZWZlcmVuY2VzX2tleSA9PiAibWhkZXNpZ25fcHJvZ3Jlc3MiLAogICAgICAgIDpzY3JvbGxhYmxlID0+IGZhbHNlLAogICAgICAgIDpyZXNpemFibGUgPT4gZmFsc2UsCiAgICAgICAgOndpZHRoID0+IDMwMCwKICAgICAgICA6aGVpZ2h0ID0+IDE1MAogICAgICB9KQoKICAgICAgcHJvZ3Jlc3Muc2V0X2h0bWwgPDwtSFRNTAogICAgICAgIDxodG1sPjxoZWFkPgogICAgICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICAgICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1UYWphd2FsOndnaHRANDAwOzcwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CiAgICAgICAgICA8c3R5bGU+CiAgICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTonVGFqYXdhbCcsc2Fucy1zZXJpZjsgdGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbjowOyBwYWRkaW5nOjIwcHg7IGRpcmVjdGlvbjpydGw7IH0KICAgICAgICAgICAgaDMgeyBtYXJnaW46IDEwcHggMDsgfQogICAgICAgICAgICAjcHJvZ3Jlc3MtYmFyIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMjBweDsgYmFja2dyb3VuZDogI2RkZDsgYm9yZGVyLXJhZGl1czogMTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgICAgICAjcHJvZ3Jlc3MtZmlsbCB7IGhlaWdodDogMTAwJTsgd2lkdGg6IDAlOyBiYWNrZ3JvdW5kOiAjNGNhZjUwOyB0cmFuc2l0aW9uOiB3aWR0aCAwLjJzIGVhc2U7IH0KICAgICAgICAgICAgI3BlcmNlbnQgeyBtYXJnaW4tdG9wOiA4cHg7IGZvbnQtc2l6ZTogMTRweDsgfQogICAgICAgICAgPC9zdHlsZT4KICAgICAgICA8L2hlYWQ+PGJvZHk+CiAgICAgICAgICA8aDM+2KzYp9ix2Yog2KrYrdmF2YrZhCDYp9mE2YXZg9mI2YYuLi48L2gzPgogICAgICAgICAgPGRpdiBpZD0icHJvZ3Jlc3MtYmFyIj48ZGl2IGlkPSJwcm9ncmVzcy1maWxsIj48L2Rpdj48L2Rpdj4KICAgICAgICAgIDxkaXYgaWQ9InBlcmNlbnQiPjAlPC9kaXY+CiAgICAgICAgPC9ib2R5PjwvaHRtbD4KICAgICAgSFRNTAoKICAgICAgcHJvZ3Jlc3Muc2hvdwoKICAgICAgVUkuc3RhcnRfdGltZXIoMC4xLCBmYWxzZSkgZG8KICAgICAgICB0ZW1wZmlsZSA9IG5pbAogICAgICAgIGJlZ2luCiAgICAgICAgICBjb250ZW50X2xlbmd0aCA9IG5pbAogICAgICAgICAgdGVtcGZpbGUgPSBUZW1wZmlsZS5uZXcoIm1oY29tcG9uZW50IikKCiAgICAgICAgICBVUkkub3Blbih1cmwsCiAgICAgICAgICAgIGNvbnRlbnRfbGVuZ3RoX3Byb2M6IC0+KGxlbikgeyBjb250ZW50X2xlbmd0aCA9IGxlbiB9LAogICAgICAgICAgICBwcm9ncmVzc19wcm9jOiAtPihieXRlcykgewogICAgICAgICAgICAgIHBlcmNlbnQgPSBjb250ZW50X2xlbmd0aCA/ICgoYnl0ZXMudG9fZiAvIGNvbnRlbnRfbGVuZ3RoKSAqIDEwMCkudG9faSA6IDAKICAgICAgICAgICAgICBwcm9ncmVzcy5leGVjdXRlX3NjcmlwdCgiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzLWZpbGwnKS5zdHlsZS53aWR0aCA9ICcje3BlcmNlbnR9JSciKQogICAgICAgICAgICAgIHByb2dyZXNzLmV4ZWN1dGVfc2NyaXB0KCJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyY2VudCcpLmlubmVyVGV4dCA9ICcje3BlcmNlbnR9JSciKQogICAgICAgICAgICB9CiAgICAgICAgICApIGRvIHxyZW1vdGVfZmlsZXwKICAgICAgICAgICAgSU8uY29weV9zdHJlYW0ocmVtb3RlX2ZpbGUsIHRlbXBmaWxlKQogICAgICAgICAgZW5kCgogICAgICAgICAgdGVtcGZpbGUuY2xvc2UKICAgICAgICAgIEZpbGVVdGlscy5tdih0ZW1wZmlsZS5wYXRoLCBsb2NhbF9wYXRoKQogICAgICAgICAgcHJvZ3Jlc3MuY2xvc2UgaWYgcHJvZ3Jlc3MudmlzaWJsZT8KCiAgICAgICAgICBpZiBGaWxlLmV4aXN0Pyhsb2NhbF9wYXRoKSAmJiBGaWxlLnNpemUobG9jYWxfcGF0aCkgPiAwCiAgICAgICAgICAgIGRlZmluaXRpb24gPSBtb2RlbC5kZWZpbml0aW9ucy5sb2FkKGxvY2FsX3BhdGgsIGFsbG93X25ld2VyOiB0cnVlKQogICAgICAgICAgICBibG9jay5jYWxsKGRlZmluaXRpb24pIGlmIGJsb2NrCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDZhNmFINmK2KrZhSDYrdmB2Lgg2KfZhNmF2YTZgSDYqNi02YPZhCDYtdit2YrYrSIpCiAgICAgICAgICAgIGJsb2NrLmNhbGwobmlsKSBpZiBibG9jawogICAgICAgICAgZW5kCgogICAgICAgIHJlc2N1ZSA9PiBlCiAgICAgICAgICBiZWdpbgogICAgICAgICAgICB0ZW1wZmlsZS5jbG9zZSBpZiB0ZW1wZmlsZQogICAgICAgICAgICB0ZW1wZmlsZS51bmxpbmsgaWYgdGVtcGZpbGUKICAgICAgICAgIHJlc2N1ZQogICAgICAgICAgZW5kCiAgICAgICAgICBwcm9ncmVzcy5jbG9zZSBpZiBwcm9ncmVzcy52aXNpYmxlPwogICAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINiu2LfYoyDZgdmKINin2YTYqtit2YXZitmEINij2Ygg2KrYudix2YrZgSDYp9mE2YXZg9mI2YY6ICN7ZS5tZXNzYWdlfSIpCiAgICAgICAgICBibG9jay5jYWxsKG5pbCkgaWYgYmxvY2sKICAgICAgICBlbmQKICAgICAgZW5kCgogICAgcmVzY3VlID0+IGUKICAgICAgVUkubWVzc2FnZWJveCgi4p2MINiu2LfYozogI3tlLm1lc3NhZ2V9IikKICAgICAgYmxvY2suY2FsbChuaWwpIGlmIGJsb2NrCiAgICBlbmQKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PSBQbHVnaW5zIGxvYWRlciA9PT09PT09PT09PT09PT09PT09PQogIGRlZiBzZWxmLnNhZmVfbG9hZF9sb2NhbChmaWxlX25hbWUpCiAgICByZXR1cm4gZmFsc2UgdW5sZXNzIFBMVUdJTl9ESVIgJiYgRmlsZS5kaXJlY3Rvcnk/KFBMVUdJTl9ESVIpCiAgICBwYXRoID0gRmlsZS5qb2luKFBMVUdJTl9ESVIsIGZpbGVfbmFtZSkKICAgIHJldHVybiBmYWxzZSB1bmxlc3MgRmlsZS5leGlzdD8ocGF0aCkKICAgIGJlZ2luCiAgICAgIGxvYWQgcGF0aAogICAgICB0cnVlCiAgICByZXNjdWUgPT4gZQogICAgICBVSS5tZXNzYWdlYm94KCLinYwg2YHYtNmEINiq2K3ZhdmK2YQgI3tmaWxlX25hbWV9OlxuI3tlLm1lc3NhZ2V9IikKICAgICAgZmFsc2UKICAgIGVuZAogIGVuZAoKICBkZWYgc2VsZi5jYWxsX2ludm9pY2VfcGx1Z2luCiAgICB1bmxlc3Mgc2FmZV9sb2FkX2xvY2FsKCJpbnZvaWNlLnJiIikKICAgICAgVUkubWVzc2FnZWJveCgi4pqg77iPINmE2YUg2KPYrNivIGludm9pY2UucmIg2K/Yp9iu2YQg2YbZgdizINmB2YjZhNiv2LEg2KfZhNmF2YPYqtio2KkuIikKICAgICAgcmV0dXJuCiAgICBlbmQKICAgIGlmIGRlZmluZWQ/KE1IRGVzaWduKSAmJiBNSERlc2lnbi5jb25zdF9kZWZpbmVkPyg6TUhJbnZvaWNlKQogICAgICBtb2QgPSBNSERlc2lnbi5jb25zdF9nZXQoOk1ISW52b2ljZSkKICAgICAgaWYgbW9kLnJlc3BvbmRfdG8/KDpvcGVuX2ludm9pY2VfZGlhbG9nKQogICAgICAgIG1vZC5vcGVuX2ludm9pY2VfZGlhbG9nCiAgICAgIGVsc2UKICAgICAgICBVSS5tZXNzYWdlYm94KCLimqDvuI8gaW52b2ljZS5yYiDYp9iq2K3ZhdmR2YQg4pyFINmE2YPZhiDZhNmFINij2KzYryBvcGVuX2ludm9pY2VfZGlhbG9nINiv2KfYrtmEIE1IRGVzaWduOjpNSEludm9pY2UuIikKICAgICAgZW5kCiAgICBlbHNlCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyBpbnZvaWNlLnJiINin2KrYrdmF2ZHZhCDZhNmD2YYg2YTZhSDYo9is2K8gTUhEZXNpZ246Ok1ISW52b2ljZS4iKQogICAgZW5kCiAgZW5kCgogIGRlZiBzZWxmLmNhbGxfcmVwb3J0c19wbHVnaW4KICAgIHVubGVzcyBzYWZlX2xvYWRfbG9jYWwoInJlcG9ydF91bml0cy5yYiIpCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyDZhNmFINij2KzYryByZXBvcnRfdW5pdHMucmIg2K/Yp9iu2YQg2YbZgdizINmB2YjZhNiv2LEg2KfZhNmF2YPYqtio2KkuIikKICAgICAgcmV0dXJuCiAgICBlbmQKICAgIGlmIGRlZmluZWQ/KE1IREVTSUdOKSAmJiBNSERFU0lHTi5jb25zdF9kZWZpbmVkPyg6UmVwb3J0VW5pdHMpCiAgICAgIG1vZCA9IE1IREVTSUdOLmNvbnN0X2dldCg6UmVwb3J0VW5pdHMpCiAgICAgIFs6cnVuLCA6c3RhcnQsIDpvcGVuX2RpYWxvZywgOnNob3dfZGlhbG9nLCA6b3BlbiwgOnNob3csIDptYWluLCA6Z2VuZXJhdGVdLmVhY2ggZG8gfG18CiAgICAgICAgYmVnaW4KICAgICAgICAgIGlmIG1vZC5yZXNwb25kX3RvPyhtKQogICAgICAgICAgICBtb2Quc2VuZChtKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIGVuZAogICAgICAgIHJlc2N1ZQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgbGlzdCA9IChtb2QubWV0aG9kcyhmYWxzZSkubWFwKCY6dG9fcykuc29ydCByZXNjdWUgW10pCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyByZXBvcnRfdW5pdHMucmIg2KfYqtit2YXZkdmEIOKchSDZhNmD2YYg2YTZhSDYo9is2K8g2K/Yp9mE2Kkg2KrYtNi62YrZhC5cbtin2YTYr9mI2KfZhCDYp9mE2YXYqtin2K3YqSDYr9in2K7ZhCBNSERFU0lHTjo6UmVwb3J0VW5pdHM6XG4tICIgKyBsaXN0LmZpcnN0KDQwKS5qb2luKCJcbi0gIikpCiAgICBlbHNlCiAgICAgIFVJLm1lc3NhZ2Vib3goIuKaoO+4jyByZXBvcnRfdW5pdHMucmIg2KfYqtit2YXZkdmEINmE2YPZhiDZhNmFINij2KzYryBNSERFU0lHTjo6UmVwb3J0VW5pdHMuIikKICAgIGVuZAogIGVuZAoKICAjID09PT09PT09PT09PT09PT09PT09IE1ha2UgVW5pcXVlID09PT09PT09PT09PT09PT09PT09CiAgbW9kdWxlIE1IREVTSUdOX1VOSVFVSUZZCiAgICBkZWYgc2VsZi5tYWtlX2FsbF9jb21wb25lbnRzX3VuaXF1ZShlbnRpdGllcykKICAgICAgZW50aXRpZXMuZ3JlcChTa2V0Y2h1cDo6Q29tcG9uZW50SW5zdGFuY2UpLmVhY2ggZG8gfGluc3RhbmNlfAogICAgICAgIGluc3RhbmNlLm1ha2VfdW5pcXVlCiAgICAgICAgbWFrZV9hbGxfY29tcG9uZW50c191bmlxdWUoaW5zdGFuY2UuZGVmaW5pdGlvbi5lbnRpdGllcykKICAgICAgZW5kCiAgICBlbmQKICAgIGRlZiBzZWxmLm1ha2VfZGVmaW5pdGlvbnNfdW5pcXVlCiAgICAgIG1vZGVsID0gU2tldGNodXAuYWN0aXZlX21vZGVsCiAgICAgIG1vZGVsLmRlZmluaXRpb25zLmVhY2ggZG8gfGRlZmluaXRpb258CiAgICAgICAgbmV4dCBpZiBkZWZpbml0aW9uLmdyb3VwPyB8fCBkZWZpbml0aW9uLmltYWdlPwogICAgICAgIGRlZmluaXRpb24uaW5zdGFuY2VzLmVhY2ggZG8gfGluc3RhbmNlfAogICAgICAgICAgaW5zdGFuY2UubWFrZV91bmlxdWUKICAgICAgICAgIG1ha2VfYWxsX2NvbXBvbmVudHNfdW5pcXVlKGluc3RhbmNlLmRlZmluaXRpb24uZW50aXRpZXMpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgICBkZWYgc2VsZi5ydW5fdW5pcXVpZnkKICAgICAgbW9kZWwgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwKICAgICAgbW9kZWwuc3RhcnRfb3BlcmF0aW9uKCLYrNi52YQg2YPZhCDYp9mE2YXZg9mI2YbYp9iqINmB2LHZitiv2KkiLCB0cnVlKQogICAgICBtYWtlX2FsbF9jb21wb25lbnRzX3VuaXF1ZShtb2RlbC5lbnRpdGllcykKICAgICAgbWFrZV9kZWZpbml0aW9uc191bmlxdWUKICAgICAgbW9kZWwuY29tbWl0X29wZXJhdGlvbgogICAgICBVSS5tZXNzYWdlYm94KCLinIUg2KrZhSDYrNi52YQg2YPZhCDYp9mE2YPZhdio2YjZhtmG2KrYp9iqINmB2LHZitiv2KkuIikKICAgIGVuZAogIGVuZAoKICAjID09PT09PT09PT09PT09PT09PT09IOKchSBBRERFRDogV2luZG93cyAuQ1VSIGdlbmVyYXRvciAod29ya3MgZXZlbiB3aGVuIFBORyBjdXJzb3IgZmFpbHMpID09PT09PT09PT09PT09PT09PT09CiAgZGVmIHNlbGYuX2JsYW5rX3JnYmEodywgaCkKICAgIEFycmF5Lm5ldyh3ICogaCAqIDQsIDApCiAgZW5kCgogIGRlZiBzZWxmLl9zZXRfcHgocGl4ZWxzLCB3LCB4LCB5LCByPTAsIGc9MCwgYj0wLCBhPTI1NSkKICAgIHJldHVybiBpZiB4IDwgMCB8fCB5IDwgMCB8fCB4ID49IHcKICAgIGlkeCA9ICh5ICogdyArIHgpICogNAogICAgcGl4ZWxzW2lkeF0gICAgID0gcgogICAgcGl4ZWxzW2lkeCArIDFdID0gZwogICAgcGl4ZWxzW2lkeCArIDJdID0gYgogICAgcGl4ZWxzW2lkeCArIDNdID0gYQogIGVuZAoKICBkZWYgc2VsZi5fZHJhd19saW5lKHBpeGVscywgdywgeDAsIHkwLCB4MSwgeTEsIHI9MCwgZz0wLCBiPTAsIGE9MjU1KQogICAgZHggPSAoeDEgLSB4MCkuYWJzCiAgICBzeCA9IHgwIDwgeDEgPyAxIDogLTEKICAgIGR5ID0gLSh5MSAtIHkwKS5hYnMKICAgIHN5ID0geTAgPCB5MSA/IDEgOiAtMQogICAgZXJyID0gZHggKyBkeQogICAgbG9vcCBkbwogICAgICBfc2V0X3B4KHBpeGVscywgdywgeDAsIHkwLCByLCBnLCBiLCBhKQogICAgICBicmVhayBpZiB4MCA9PSB4MSAmJiB5MCA9PSB5MQogICAgICBlMiA9IDIgKiBlcnIKICAgICAgaWYgZTIgPj0gZHkKICAgICAgICBlcnIgKz0gZHkKICAgICAgICB4MCArPSBzeAogICAgICBlbmQKICAgICAgaWYgZTIgPD0gZHgKICAgICAgICBlcnIgKz0gZHgKICAgICAgICB5MCArPSBzeQogICAgICBlbmQKICAgIGVuZAogIGVuZAoKICBkZWYgc2VsZi5fZHJhd19hcnJvd19oZWFkKHBpeGVscywgdywgdGlweCwgdGlweSwgZGlyKQogICAgY2FzZSBkaXIKICAgIHdoZW4gOmxlZnQKICAgICAgX2RyYXdfbGluZShwaXhlbHMsIHcsIHRpcHgsIHRpcHksIHRpcHggKyA2LCB0aXB5IC0gNCkKICAgICAgX2RyYXdfbGluZShwaXhlbHMsIHcsIHRpcHgsIHRpcHksIHRpcHggKyA2LCB0aXB5ICsgNCkKICAgIHdoZW4gOnJpZ2h0CiAgICAgIF9kcmF3X2xpbmUocGl4ZWxzLCB3LCB0aXB4LCB0aXB5LCB0aXB4IC0gNiwgdGlweSAtIDQpCiAgICAgIF9kcmF3X2xpbmUocGl4ZWxzLCB3LCB0aXB4LCB0aXB5LCB0aXB4IC0gNiwgdGlweSArIDQpCiAgICBlbmQKICBlbmQKCiAgZGVmIHNlbGYuX3dyaXRlX2N1cihwYXRoLCB3LCBoLCBob3R4LCBob3R5LCBwaXhlbHNfcmdiYSkKICAgIHJhaXNlICJiYWQgc2l6ZSIgdW5sZXNzIHcgPiAwICYmIGggPiAwCiAgICB4b3Jfcm93X2J5dGVzID0gdyAqIDQKICAgIHhvcl9ieXRlcyA9IHhvcl9yb3dfYnl0ZXMgKiBoCgogICAgbWFza19yb3dfYnl0ZXMgPSAoKHcgKyAzMSkgLyAzMikgKiA0CiAgICBtYXNrX2J5dGVzID0gbWFza19yb3dfYnl0ZXMgKiBoCgogICAgYmlfc2l6ZSA9IDQwCiAgICBiaV93aWR0aCA9IHcKICAgIGJpX2hlaWdodCA9IGggKiAyCiAgICBiaV9wbGFuZXMgPSAxCiAgICBiaV9iaXRjb3VudCA9IDMyCiAgICBiaV9jb21wcmVzc2lvbiA9IDAKICAgIGJpX3NpemVpbWFnZSA9IHhvcl9ieXRlcyArIG1hc2tfYnl0ZXMKICAgIGJpX3hwcG0gPSAwCiAgICBiaV95cHBtID0gMAogICAgYmlfY2xydXNlZCA9IDAKICAgIGJpX2NscmltcG9ydGFudCA9IDAKCiAgICBoZWFkZXIgPSBbCiAgICAgIGJpX3NpemUsCiAgICAgIGJpX3dpZHRoLAogICAgICBiaV9oZWlnaHQsCiAgICAgIGJpX3BsYW5lcywKICAgICAgYmlfYml0Y291bnQsCiAgICAgIGJpX2NvbXByZXNzaW9uLAogICAgICBiaV9zaXplaW1hZ2UsCiAgICAgIGJpX3hwcG0sCiAgICAgIGJpX3lwcG0sCiAgICAgIGJpX2NscnVzZWQsCiAgICAgIGJpX2NscmltcG9ydGFudAogICAgXS5wYWNrKCJWM3YyVjYiKQoKICAgIHhvciA9ICsiIgogICAgKGgtMSkuZG93bnRvKDApIGRvIHx5fAogICAgICAoMC4uLncpLmVhY2ggZG8gfHh8CiAgICAgICAgaWR4ID0gKHkgKiB3ICsgeCkgKiA0CiAgICAgICAgciA9IHBpeGVsc19yZ2JhW2lkeF0KICAgICAgICBnID0gcGl4ZWxzX3JnYmFbaWR4ICsgMV0KICAgICAgICBiID0gcGl4ZWxzX3JnYmFbaWR4ICsgMl0KICAgICAgICBhID0gcGl4ZWxzX3JnYmFbaWR4ICsgM10KICAgICAgICB4b3IgPDwgYi5jaHIgPDwgZy5jaHIgPDwgci5jaHIgPDwgYS5jaHIKICAgICAgZW5kCiAgICBlbmQKCiAgICBhbmRfbWFzayA9ICJceDAwIiAqIG1hc2tfYnl0ZXMKICAgIGltYWdlX2RhdGEgPSBoZWFkZXIgKyB4b3IgKyBhbmRfbWFzawoKICAgIGljb25kaXIgPSBbMCwgMiwgMV0ucGFjaygidjMiKQoKICAgIHdpZHRoX2J5dGUgID0gKHcgPT0gMjU2ID8gMCA6IHcpCiAgICBoZWlnaHRfYnl0ZSA9IChoID09IDI1NiA/IDAgOiBoKQogICAgYnl0ZXNfaW5fcmVzID0gaW1hZ2VfZGF0YS5ieXRlc2l6ZQogICAgaW1hZ2Vfb2Zmc2V0ID0gNiArIDE2CgogICAgZW50cnkgPSBbCiAgICAgIHdpZHRoX2J5dGUsCiAgICAgIGhlaWdodF9ieXRlLAogICAgICAwLAogICAgICAwLAogICAgICBob3R4LAogICAgICBob3R5LAogICAgICBieXRlc19pbl9yZXMsCiAgICAgIGltYWdlX29mZnNldAogICAgXS5wYWNrKCJDNHYyVjIiKQoKICAgIEZpbGUuYmlud3JpdGUocGF0aCwgaWNvbmRpciArIGVudHJ5ICsgaW1hZ2VfZGF0YSkKICAgIHRydWUKICByZXNjdWUKICAgIGZhbHNlCiAgZW5kCgogIGRlZiBzZWxmLl9tYWtlX3JvdGF0ZV9waXhlbHModz0zMiwgaD0zMikKICAgIHB4ID0gX2JsYW5rX3JnYmEodywgaCkKICAgIHB0cyA9IFsKICAgICAgWzEwLCAxMF0sWzEzLCA4XSxbMTYsIDddLFsxOSwgOF0sWzIyLCAxMF0sWzI0LCAxM10sWzI1LCAxNl0sWzI0LCAxOV0sWzIyLCAyMl0sWzE5LCAyNF0sWzE2LCAyNV0sWzEzLCAyNF0sWzExLCAyMl0KICAgIF0KICAgICgwLi4ucHRzLmxlbmd0aC0xKS5lYWNoIHsgfGl8IF9kcmF3X2xpbmUocHgsIHcsIHB0c1tpXVswXSwgcHRzW2ldWzFdLCBwdHNbaSsxXVswXSwgcHRzW2krMV1bMV0sIDAsMCwwLDI1NSkgfQogICAgX2RyYXdfYXJyb3dfaGVhZChweCwgdywgMTAsIDEwLCA6bGVmdCkKICAgIHB4CiAgZW5kCgogIGRlZiBzZWxmLl9tYWtlX2ZsaXBfcGl4ZWxzKHc9MzIsIGg9MzIpCiAgICBweCA9IF9ibGFua19yZ2JhKHcsIGgpCiAgICBfZHJhd19saW5lKHB4LCB3LCA3LCAxNiwgMjUsIDE2LCAwLDAsMCwyNTUpCiAgICBfZHJhd19hcnJvd19oZWFkKHB4LCB3LCA3LCAxNiwgOmxlZnQpCiAgICBfZHJhd19hcnJvd19oZWFkKHB4LCB3LCAyNSwgMTYsIDpyaWdodCkKICAgIHB4CiAgZW5kCgogIGRlZiBzZWxmLl9jdXJzb3JfZnJvbV90ZW1wX2N1cihuYW1lKQogICAgcGF0aCA9IEZpbGUuam9pbihEaXIudG1wZGlyLCAibWhkX2N1cnNvcl8je25hbWV9LmN1ciIpCiAgICB3ID0gMzI7IGggPSAzMgogICAgaG90eCA9IDg7IGhvdHkgPSA4CgogICAgcGl4ZWxzID0KICAgICAgY2FzZSBuYW1lCiAgICAgIHdoZW4gOnJvdGF0ZSB0aGVuIF9tYWtlX3JvdGF0ZV9waXhlbHModywgaCkKICAgICAgd2hlbiA6ZmxpcCAgIHRoZW4gX21ha2VfZmxpcF9waXhlbHModywgaCkKICAgICAgZWxzZSBuaWwKICAgICAgZW5kCiAgICByZXR1cm4gbmlsIHVubGVzcyBwaXhlbHMKCiAgICBvayA9IF93cml0ZV9jdXIocGF0aCwgdywgaCwgaG90eCwgaG90eSwgcGl4ZWxzKQogICAgcmV0dXJuIG5pbCB1bmxlc3Mgb2sgJiYgRmlsZS5leGlzdD8ocGF0aCkgJiYgRmlsZS5zaXplKHBhdGgpID4gMAoKICAgIGlkID0gVUkuY3JlYXRlX2N1cnNvcihwYXRoLCBob3R4LCBob3R5KQogICAgcmV0dXJuIG5pbCBpZiBpZC5uaWw/IHx8IGlkLnRvX2kgPT0gMAogICAgaWQKICByZXNjdWUKICAgIG5pbAogIGVuZAoKICBST1RBVEVfQ1VSU09SX0lEID0gX2N1cnNvcl9mcm9tX3RlbXBfY3VyKDpyb3RhdGUpCiAgRkxJUF9DVVJTT1JfSUQgICA9IF9jdXJzb3JfZnJvbV90ZW1wX2N1cig6ZmxpcCkKICAjID09PT09PT09PT09PT09PT09PT09IC9BRERFRCA9PT09PT09PT09PT09PT09PT09PQoKICAjID09PT09PT09PT09PT09PT09PT09IOKchSBBRERFRDogUm90YXRlIDkwIFRvb2wgKFN0YWJsZSBDdXJzb3IpID09PT09PT09PT09PT09PT09PT09CiAgY2xhc3MgTUhEUm90YXRlOTBUb29sCiAgICBkZWYgX2FwcGx5X2N1cnNvcgogICAgICByZXR1cm4gZmFsc2UgdW5sZXNzIFJPVEFURV9DVVJTT1JfSUQgJiYgUk9UQVRFX0NVUlNPUl9JRC50b19pICE9IDAKICAgICAgVUkuc2V0X2N1cnNvcihST1RBVEVfQ1VSU09SX0lEKQogICAgICB0cnVlCiAgICByZXNjdWUKICAgICAgZmFsc2UKICAgIGVuZAoKICAgIGRlZiBvblNldEN1cnNvcjsgX2FwcGx5X2N1cnNvcjsgZW5kCiAgICBkZWYgb25Nb3VzZU1vdmUoZmxhZ3MsIHgsIHksIHZpZXcpOyBfYXBwbHlfY3Vyc29yOyBlbmQKICAgIGRlZiBvbktleURvd24oa2V5LCByZXBlYXQsIGZsYWdzLCB2aWV3KTsgX2FwcGx5X2N1cnNvcjsgZW5kCgogICAgZGVmIG9uTEJ1dHRvbkRvd24oZmxhZ3MsIHgsIHksIHZpZXcpCiAgICAgIG1vZGVsID0gU2tldGNodXAuYWN0aXZlX21vZGVsCiAgICAgIHBoID0gdmlldy5waWNrX2hlbHBlcgogICAgICBwaC5kb19waWNrKHgsIHkpCiAgICAgIGVudCA9IHBoLmJlc3RfcGlja2VkCiAgICAgIHJldHVybiB1bmxlc3MgZW50LmlzX2E/KFNrZXRjaHVwOjpDb21wb25lbnRJbnN0YW5jZSkgfHwgZW50LmlzX2E/KFNrZXRjaHVwOjpHcm91cCkKCiAgICAgIG1vZGVsLnN0YXJ0X29wZXJhdGlvbigiTUhEIFJvdGF0ZSA5MCIsIHRydWUpCiAgICAgIGJlZ2luCiAgICAgICAgY2VudGVyID0gZW50LmJvdW5kcy5jZW50ZXIKICAgICAgICBheGlzICAgPSBHZW9tOjpWZWN0b3IzZC5uZXcoMCwgMCwgMSkKICAgICAgICBhbmdsZSAgPSA0NS5kZWdyZWVzCiAgICAgICAgdHIgPSBHZW9tOjpUcmFuc2Zvcm1hdGlvbi5yb3RhdGlvbihjZW50ZXIsIGF4aXMsIGFuZ2xlKQogICAgICAgIGVudC50cmFuc2Zvcm0hKHRyKQogICAgICBlbnN1cmUKICAgICAgICBtb2RlbC5jb21taXRfb3BlcmF0aW9uCiAgICAgIGVuZAogICAgZW5kCiAgZW5kCgogIGRlZiBzZWxmLmFjdGl2YXRlX3JvdGF0ZV90b29sCiAgICBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwuc2VsZWN0X3Rvb2woTUhEUm90YXRlOTBUb29sLm5ldykKICBlbmQKCiAgIyA9PT09PT09PT09PT09PT09PT09PSDinIUgQURERUQ6IEZsaXAgTGVmdC9SaWdodCBUb29sIChTdGFibGUgQ3Vyc29yKSA9PT09PT09PT09PT09PT09PT09PQogIGNsYXNzIE1IREZsaXBMUlRvb2wKICAgIGRlZiBfYXBwbHlfY3Vyc29yCiAgICAgIHJldHVybiBmYWxzZSB1bmxlc3MgRkxJUF9DVVJTT1JfSUQgJiYgRkxJUF9DVVJTT1JfSUQudG9faSAhPSAwCiAgICAgIFVJLnNldF9jdXJzb3IoRkxJUF9DVVJTT1JfSUQpCiAgICAgIHRydWUKICAgIHJlc2N1ZQogICAgICBmYWxzZQogICAgZW5kCgogICAgZGVmIG9uU2V0Q3Vyc29yOyBfYXBwbHlfY3Vyc29yOyBlbmQKICAgIGRlZiBvbk1vdXNlTW92ZShmbGFncywgeCwgeSwgdmlldyk7IF9hcHBseV9jdXJzb3I7IGVuZAogICAgZGVmIG9uS2V5RG93bihrZXksIHJlcGVhdCwgZmxhZ3MsIHZpZXcpOyBfYXBwbHlfY3Vyc29yOyBlbmQKCiAgICBkZWYgb25MQnV0dG9uRG93bihmbGFncywgeCwgeSwgdmlldykKICAgICAgbW9kZWwgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwKICAgICAgcGggPSB2aWV3LnBpY2tfaGVscGVyCiAgICAgIHBoLmRvX3BpY2soeCwgeSkKICAgICAgZW50ID0gcGguYmVzdF9waWNrZWQKICAgICAgcmV0dXJuIHVubGVzcyBlbnQuaXNfYT8oU2tldGNodXA6OkNvbXBvbmVudEluc3RhbmNlKSB8fCBlbnQuaXNfYT8oU2tldGNodXA6Okdyb3VwKQoKICAgICAgbW9kZWwuc3RhcnRfb3BlcmF0aW9uKCJNSEQgRmxpcCBML1IiLCB0cnVlKQogICAgICBiZWdpbgogICAgICAgIHRyID0gZW50LnRyYW5zZm9ybWF0aW9uCiAgICAgICAgb3JpZ2luID0gdHIub3JpZ2luCiAgICAgICAgeGF4aXMgID0gdHIueGF4aXMKICAgICAgICB5YXhpcyAgPSB0ci55YXhpcwogICAgICAgIHpheGlzICA9IHRyLnpheGlzCgogICAgICAgIGJhc2lzID0gR2VvbTo6VHJhbnNmb3JtYXRpb24uYXhlcyhvcmlnaW4sIHhheGlzLCB5YXhpcywgemF4aXMpCiAgICAgICAgbWlycm9yX2xvY2FsID0gR2VvbTo6VHJhbnNmb3JtYXRpb24uc2NhbGluZygtMSwgMSwgMSkKICAgICAgICBtaXJyb3Jfd29ybGQgPSBiYXNpcyAqIG1pcnJvcl9sb2NhbCAqIGJhc2lzLmludmVyc2UKCiAgICAgICAgZW50LnRyYW5zZm9ybSEobWlycm9yX3dvcmxkKQogICAgICBlbnN1cmUKICAgICAgICBtb2RlbC5jb21taXRfb3BlcmF0aW9uCiAgICAgIGVuZAogICAgZW5kCiAgZW5kCgogIGRlZiBzZWxmLmFjdGl2YXRlX2ZsaXBfbHJfdG9vbAogICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnNlbGVjdF90b29sKE1IREZsaXBMUlRvb2wubmV3KQogIGVuZAoKICAjID09PT09PT09PT09PT09PT09PT09IOKchSBBRERFRDogQ2xpY2sgU2lkZSBTbmFwIFRvb2wgKFZpc2libGUgQm91bmRzKSA9PT09PT09PT09PT09PT09PT09PQogIGNsYXNzIENsaWNrU2lkZVNuYXBUb29sX1Zpc2libGVCb3VuZHMKICAgIGRlZiBhY3RpdmF0ZQogICAgICBAbW92aW5nID0gbmlsCiAgICAgIFNrZXRjaHVwLnN0YXR1c190ZXh0ID0gIjEpINin2K7Yqtin2LEg2KfZhNmI2K3Yr9ipINin2YTZhNmKINmH2KrYqtit2LHZgyIKICAgIGVuZAoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSGVscGVyczogUGljayBpbnN0YW5jZSArIGNsaWNrIHBvaW50CiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBkZWYgcGlja19pbnN0YW5jZSh2aWV3LCB4LCB5KQogICAgICBpcCA9IFNrZXRjaHVwOjpJbnB1dFBvaW50Lm5ldwogICAgICBpcC5waWNrKHZpZXcsIHgsIHkpCiAgICAgIHJldHVybiBbbmlsLCBuaWxdIHVubGVzcyBpcC52YWxpZD8KCiAgICAgIHBoID0gdmlldy5waWNrX2hlbHBlcgogICAgICBwaC5kb19waWNrKHgsIHkpCiAgICAgIGJlc3QgPSBwaC5iZXN0X3BpY2tlZAoKICAgICAgcGF0aCA9IG5pbAogICAgICBiZWdpbgogICAgICAgIHBhdGggPSBwaC5wYXRoX2F0KDApCiAgICAgIHJlc2N1ZQogICAgICAgIHBhdGggPSBuaWwKICAgICAgZW5kCgogICAgICBpbnN0ID0gbmlsCiAgICAgIGlmIGJlc3QuaXNfYT8oU2tldGNodXA6OkNvbXBvbmVudEluc3RhbmNlKSB8fCBiZXN0LmlzX2E/KFNrZXRjaHVwOjpHcm91cCkKICAgICAgICBpbnN0ID0gYmVzdAogICAgICBlbHNpZiBwYXRoCiAgICAgICAgcGF0aC5yZXZlcnNlX2VhY2ggZG8gfGV8CiAgICAgICAgICBpZiBlLmlzX2E/KFNrZXRjaHVwOjpDb21wb25lbnRJbnN0YW5jZSkgfHwgZS5pc19hPyhTa2V0Y2h1cDo6R3JvdXApCiAgICAgICAgICAgIGluc3QgPSBlCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCgogICAgICBbaW5zdCwgaXAucG9zaXRpb25dCiAgICBlbmQKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFZpc2libGUgYm91bmRzIChpZ25vcmUgaGlkZGVuICsgaW52aXNpYmxlIHRhZ3MpIHdpdGggZGVlcCB0cmF2ZXJzYWwKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGRlZiBsYXllcl92aXNpYmxlPyhlbnQpCiAgICAgIGJlZ2luCiAgICAgICAgbCA9IGVudC5sYXllcgogICAgICAgIHJldHVybiB0cnVlIGlmIGwubmlsPwogICAgICAgIHJldHVybiBsLnZpc2libGU/CiAgICAgIHJlc2N1ZQogICAgICAgIHRydWUKICAgICAgZW5kCiAgICBlbmQKCiAgICBkZWYgZW50aXR5X3Zpc2libGU/KGVudCkKICAgICAgcmV0dXJuIGZhbHNlIGlmIGVudC5kZWxldGVkPwogICAgICByZXR1cm4gZmFsc2UgaWYgZW50LmhpZGRlbj8KICAgICAgcmV0dXJuIGZhbHNlIHVubGVzcyBsYXllcl92aXNpYmxlPyhlbnQpCiAgICAgIHRydWUKICAgIGVuZAoKICAgIGRlZiByb290X2VudGl0aWVzX29mKGluc3QpCiAgICAgIGlmIGluc3QuaXNfYT8oU2tldGNodXA6OkNvbXBvbmVudEluc3RhbmNlKQogICAgICAgIGluc3QuZGVmaW5pdGlvbi5lbnRpdGllcwogICAgICBlbHNlCiAgICAgICAgaW5zdC5lbnRpdGllcwogICAgICBlbmQKICAgIGVuZAoKICAgIGRlZiBjb2xsZWN0X3Zpc2libGVfcG9pbnRzKGVudGl0aWVzLCB0cl9hY2N1bSwgcHRzKQogICAgICBlbnRpdGllcy5lYWNoIGRvIHxlfAogICAgICAgIG5leHQgdW5sZXNzIGVudGl0eV92aXNpYmxlPyhlKQoKICAgICAgICBjYXNlIGUKICAgICAgICB3aGVuIFNrZXRjaHVwOjpGYWNlCiAgICAgICAgICBlLnZlcnRpY2VzLmVhY2ggZG8gfHZ4fAogICAgICAgICAgICBwdHMgPDwgdngucG9zaXRpb24udHJhbnNmb3JtKHRyX2FjY3VtKQogICAgICAgICAgZW5kCiAgICAgICAgd2hlbiBTa2V0Y2h1cDo6R3JvdXAKICAgICAgICAgIGNvbGxlY3RfdmlzaWJsZV9wb2ludHMoZS5lbnRpdGllcywgdHJfYWNjdW0gKiBlLnRyYW5zZm9ybWF0aW9uLCBwdHMpCiAgICAgICAgd2hlbiBTa2V0Y2h1cDo6Q29tcG9uZW50SW5zdGFuY2UKICAgICAgICAgIGNvbGxlY3RfdmlzaWJsZV9wb2ludHMoZS5kZWZpbml0aW9uLmVudGl0aWVzLCB0cl9hY2N1bSAqIGUudHJhbnNmb3JtYXRpb24sIHB0cykKICAgICAgICBlbHNlCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCgogICAgZGVmIHZpc2libGVfYm91bmRzX3dvcmxkKGluc3QpCiAgICAgIHB0cyA9IFtdCiAgICAgIGJhc2VfdHIgPSBpbnN0LnRyYW5zZm9ybWF0aW9uCiAgICAgIGNvbGxlY3RfdmlzaWJsZV9wb2ludHMocm9vdF9lbnRpdGllc19vZihpbnN0KSwgYmFzZV90ciwgcHRzKQoKICAgICAgaWYgcHRzLmVtcHR5PwogICAgICAgIHJldHVybiBpbnN0LmJvdW5kcwogICAgICBlbmQKCiAgICAgIGJiID0gR2VvbTo6Qm91bmRpbmdCb3gubmV3CiAgICAgIHB0cy5lYWNoIHsgfHB8IGJiLmFkZChwKSB9CiAgICAgIGJiCiAgICBlbmQKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNpZGUgZGVjaXNpb24gYmFzZWQgb24gdGFyZ2V0IHZpc2libGUgYm91bmRzICsgY2xpY2sgcG9zaXRpb24KICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGRlZiBkZWNpZGVfc2lkZSh0YXJnZXRfYmIsIGNsaWNrX3B0KQogICAgICBkeF9taW4gPSAoY2xpY2tfcHQueCAtIHRhcmdldF9iYi5taW4ueCkuYWJzCiAgICAgIGR4X21heCA9ICh0YXJnZXRfYmIubWF4LnggLSBjbGlja19wdC54KS5hYnMKICAgICAgZHlfbWluID0gKGNsaWNrX3B0LnkgLSB0YXJnZXRfYmIubWluLnkpLmFicwogICAgICBkeV9tYXggPSAodGFyZ2V0X2JiLm1heC55IC0gY2xpY2tfcHQueSkuYWJzCgogICAgICBbCiAgICAgICAgWzpsZWZ0LCAgZHhfbWluXSwKICAgICAgICBbOnJpZ2h0LCBkeF9tYXhdLAogICAgICAgIFs6YmFjaywgIGR5X21pbl0sCiAgICAgICAgWzpmcm9udCwgZHlfbWF4XQogICAgICBdLm1pbl9ieSB7IHxfLCB2fCB2IH1bMF0KICAgIGVuZAoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgTWFpbgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZGVmIG9uTEJ1dHRvbkRvd24oZmxhZ3MsIHgsIHksIHZpZXcpCiAgICAgIGVudCwgY2xpY2tfcHQgPSBwaWNrX2luc3RhbmNlKHZpZXcsIHgsIHkpCiAgICAgIHJldHVybiB1bmxlc3MgZW50CgogICAgICBpZiBAbW92aW5nLm5pbD8KICAgICAgICBAbW92aW5nID0gZW50CiAgICAgICAgU2tldGNodXAuc3RhdHVzX3RleHQgPSAiMikg2KfYrtiq2KfYsSDYp9mE2YjYrdiv2Kkg2KfZhNmH2K/ZgSAo2YjYr9mI2LMg2LnZhNmJINin2YTYrNmG2Kgg2KfZhNmE2Yog2LnYp9mK2LIg2KrZhNiy2YIg2LnZhNmK2YcpIgogICAgICAgIHJldHVybgogICAgICBlbmQKCiAgICAgIG1vdmluZyA9IEBtb3ZpbmcKICAgICAgdGFyZ2V0ID0gZW50CiAgICAgIEBtb3ZpbmcgPSBuaWwKCiAgICAgIGlmIG1vdmluZyA9PSB0YXJnZXQKICAgICAgICBTa2V0Y2h1cC5zdGF0dXNfdGV4dCA9ICLYp9iu2KrYp9ixINmI2K3Yr9ipINmF2K7YqtmE2YHYqS4iCiAgICAgICAgcmV0dXJuCiAgICAgIGVuZAoKICAgICAgbW9kZWwgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwKICAgICAgbW9kZWwuc3RhcnRfb3BlcmF0aW9uKCJDbGljayBTaWRlIFNuYXAgKFZpc2libGUgQm91bmRzKSIsIHRydWUpCgogICAgICBiZWdpbgogICAgICAgIGJtID0gdmlzaWJsZV9ib3VuZHNfd29ybGQobW92aW5nKQogICAgICAgIGJ0ID0gdmlzaWJsZV9ib3VuZHNfd29ybGQodGFyZ2V0KQoKICAgICAgICBzaWRlID0gZGVjaWRlX3NpZGUoYnQsIGNsaWNrX3B0KQoKICAgICAgICBkeiA9IGJ0Lm1pbi56IC0gYm0ubWluLnoKCiAgICAgICAgY2FzZSBzaWRlCiAgICAgICAgd2hlbiA6cmlnaHQKICAgICAgICAgIGR4ID0gYnQubWF4LnggLSBibS5taW4ueAogICAgICAgICAgZHkgPSBidC5jZW50ZXIueSAtIGJtLmNlbnRlci55CiAgICAgICAgICB2ICA9IEdlb206OlZlY3RvcjNkLm5ldyhkeCwgZHksIGR6KQoKICAgICAgICB3aGVuIDpsZWZ0CiAgICAgICAgICBkeCA9IGJ0Lm1pbi54IC0gYm0ubWF4LngKICAgICAgICAgIGR5ID0gYnQuY2VudGVyLnkgLSBibS5jZW50ZXIueQogICAgICAgICAgdiAgPSBHZW9tOjpWZWN0b3IzZC5uZXcoZHgsIGR5LCBkeikKCiAgICAgICAgd2hlbiA6ZnJvbnQKICAgICAgICAgIGR5ID0gYnQubWF4LnkgLSBibS5taW4ueQogICAgICAgICAgZHggPSBidC5jZW50ZXIueCAtIGJtLmNlbnRlci54CiAgICAgICAgICB2ICA9IEdlb206OlZlY3RvcjNkLm5ldyhkeCwgZHksIGR6KQoKICAgICAgICB3aGVuIDpiYWNrCiAgICAgICAgICBkeSA9IGJ0Lm1pbi55IC0gYm0ubWF4LnkKICAgICAgICAgIGR4ID0gYnQuY2VudGVyLnggLSBibS5jZW50ZXIueAogICAgICAgICAgdiAgPSBHZW9tOjpWZWN0b3IzZC5uZXcoZHgsIGR5LCBkeikKICAgICAgICBlbmQKCiAgICAgICAgbW92aW5nLnRyYW5zZm9ybSEoR2VvbTo6VHJhbnNmb3JtYXRpb24udHJhbnNsYXRpb24odikpCgogICAgICBlbnN1cmUKICAgICAgICBtb2RlbC5jb21taXRfb3BlcmF0aW9uCiAgICAgICAgU2tldGNodXAuc3RhdHVzX3RleHQgPSAiMSkg2KfYrtiq2KfYsSDYp9mE2YjYrdiv2Kkg2KfZhNmE2Yog2YfYqtiq2K3YsdmDIgogICAgICBlbmQKICAgIGVuZAogIGVuZAoKICBkZWYgc2VsZi5hY3RpdmF0ZV9jbGlja19zaWRlX3NuYXBfdG9vbAogICAgU2tldGNodXAuYWN0aXZlX21vZGVsLnNlbGVjdF90b29sKENsaWNrU2lkZVNuYXBUb29sX1Zpc2libGVCb3VuZHMubmV3KQogIGVuZAogICMgPT09PT09PT09PT09PT09PT09PT0gL0FEREVEID09PT09PT09PT09PT09PT09PT09CgogICMgPT09PT09PT09PT09PT09PT09PT0gTGlicmFyeSBVSSA9PT09PT09PT09PT09PT09PT09PQogIGRlZiBzZWxmLnNob3dfbGlicmFyeQogICAgIyDYp9mE2KrYrdmC2YIg2KfZhNiq2YTZgtin2KbZiiDYo9mI2YTYp9mLCiAgICB1bmxlc3MgU2tldGNodXAucmVhZF9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiYWN0aXZhdGVkX29uY2UiKQogICAgICBhdXRvX2FjdGl2YXRlX29uX3N0YXJ0dXAKICAgIGVuZAoKICAgICMg2KXYsNinINmE2YUg2YrZg9mGINmF2YHYudmEINio2LnYr9iMINmG2YHYudmR2YQKICAgIHVubGVzcyBhY3RpdmF0ZShmYWxzZSkKICAgICAgYWN0aXZhdGUodHJ1ZSkKICAgICAgcmV0dXJuIHVubGVzcyBTa2V0Y2h1cC5yZWFkX2RlZmF1bHQoUExVR0lOX05BTUUsICJhY3RpdmF0ZWRfb25jZSIpCiAgICBlbmQKCiAgICBkbGcgPSBVSTo6SHRtbERpYWxvZy5uZXcoewogICAgICA6ZGlhbG9nX3RpdGxlID0+ICJNSERFU0lHTiBMaWJyYXJ5IiwKICAgICAgOnByZWZlcmVuY2VzX2tleSA9PiAibWhkZXNpZ25fbGlicmFyeV9wcm9fYXV0b2V4cGxvZGUiLAogICAgICA6c2Nyb2xsYWJsZSA9PiB0cnVlLAogICAgICA6cmVzaXphYmxlID0+IHRydWUsCiAgICAgIDp3aWR0aCA9PiAxMjAwLAogICAgICA6aGVpZ2h0ID0+IDcyMAogICAgfSkKCiAgICBmb290ZXJfMSA9ICLYqtmFINiq2LXZhdmK2YUg2YfYsNmHINin2YTZhdmD2KrYqNipINio2YjYp9iz2LfYqSBtaGRlc2lnbi1lZy5jb20iCiAgICBmb290ZXJfMiA9ICIwMTEwMDIxMTM0MCIKCiAgICBodG1sID0gPDwtSFRNTAogICAgPGh0bWw+CiAgICA8aGVhZD4KICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVRhamF3YWw6d2dodEA0MDA7NzAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgICAgPHN0eWxlPgogICAgICAgIDpyb290ewogICAgICAgICAgLS1ibHVlMTojMjYzMjM4Oy0tYmx1ZTI6IzM0NDU0ZDstLWdyZWVuOiMyZTdkMzI7LS1ncmVlbjI6IzQzYTA0NzsKICAgICAgICAgIC0tYmc6I2YzZjVmNzstLWNhcmQ6I2ZmZjstLXRleHQ6IzFiMWYyNzstLW11dGVkOiM3Yzg3OTg7LS1saW5lOiNlOGViZjA7CiAgICAgICAgICAtLXJpZ2h0dzogMjYwcHg7CiAgICAgICAgICAtLXNidzogNzRweDsKICAgICAgICAgIC0tcmlnaHRNaW5pOiA1NHB4OwogICAgICAgIH0KICAgICAgICAqe2JveC1zaXppbmc6Ym9yZGVyLWJveH0KICAgICAgICBib2R5e21hcmdpbjowO2ZvbnQtZmFtaWx5OidUYWphd2FsJyxzYW5zLXNlcmlmO2RpcmVjdGlvbjpydGw7YmFja2dyb3VuZDp2YXIoLS1iZyk7Y29sb3I6dmFyKC0tdGV4dCk7b3ZlcmZsb3c6aGlkZGVuO30KCiAgICAgICAgLmFwcHtoZWlnaHQ6MTAwdmg7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczp2YXIoLS1zYncpIDFmciB2YXIoLS1yaWdodHcpO30KCiAgICAgICAgLyog4pyFINmB2Yog2YjYtti5INin2YTZhdmK2YbZijog2KfYrtmB2Yog2KfZhNi52YXZiNiv2YrZhiDZiNiz2YrYqCDYudmF2YjYryDYp9mE2KPYr9mI2KfYqiDZgdmC2LcgKi8KICAgICAgICBib2R5Lm1pbmkgLmFwcHtncmlkLXRlbXBsYXRlLWNvbHVtbnM6dmFyKC0tc2J3KTt9CiAgICAgICAgYm9keS5taW5pICNtYWluQ29se2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30KICAgICAgICBib2R5Lm1pbmkgI3JpZ2h0Q29se2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30KICAgICAgICBib2R5Lm1pbmkgI3Jlc2l6ZXJ7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fQogICAgICAgIGJvZHkubWluaSAuY2F0c09wZW5CdG57IGRpc3BsYXk6bm9uZSAhaW1wb3J0YW50OyB9CgogICAgICAgIC5zaWRlYmFyewogICAgICAgICAgYmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLHZhcigtLWJsdWUyKSx2YXIoLS1ibHVlMSkpOwogICAgICAgICAgY29sb3I6I2ZmZjsKICAgICAgICAgIHBhZGRpbmc6MTBweCA4cHg7CiAgICAgICAgICBkaXNwbGF5OmZsZXg7CiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjpjb2x1bW47CiAgICAgICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgICAgICBnYXA6MTBweDsKICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlOwogICAgICAgIH0KCiAgICAgICAgLyog4pyFINiy2LHYp9ixINin2YTYt9mKL9in2YTZgdiq2K0g2KzZiNmHINin2YTYudmF2YjYryDZgdmI2YIg2K7Yp9mE2LUgKi8KICAgICAgICAubWluaVRvZ2dsZXsKICAgICAgICAgIHdpZHRoOjU0cHg7CiAgICAgICAgICBoZWlnaHQ6MzRweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6MTRweDsKICAgICAgICAgIGJhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuMDgpOwogICAgICAgICAgYm94LXNoYWRvdzppbnNldCAwIDAgMCAxcHggcmdiYSgyNTUsMjU1LDI1NSwuMTApOwogICAgICAgICAgYm9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LC4xMCk7CiAgICAgICAgICBkaXNwbGF5OmZsZXg7CiAgICAgICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOwogICAgICAgICAgY3Vyc29yOnBvaW50ZXI7CiAgICAgICAgICB1c2VyLXNlbGVjdDpub25lOwogICAgICAgICAgdHJhbnNpdGlvbjouMThzIGVhc2U7CiAgICAgICAgfQogICAgICAgIC5taW5pVG9nZ2xlOmhvdmVyeyBiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsLjEyKTsgdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTFweCk7IH0KICAgICAgICAubWluaVRvZ2dsZSBzcGFuewogICAgICAgICAgY29sb3I6I2ZmZjsKICAgICAgICAgIGZvbnQtc2l6ZToxOHB4OwogICAgICAgICAgZm9udC13ZWlnaHQ6NzAwOwogICAgICAgICAgbGV0dGVyLXNwYWNpbmc6MXB4OwogICAgICAgICAgb3BhY2l0eTouOTU7CiAgICAgICAgICBsaW5lLWhlaWdodDoxOwogICAgICAgIH0KCiAgICAgICAgLnBpbGx7d2lkdGg6NTRweDtib3JkZXItcmFkaXVzOjI2cHg7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC4wOCk7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWV2ZW5seTtib3gtc2hhZG93Omluc2V0IDAgMCAwIDFweCByZ2JhKDI1NSwyNTUsMjU1LC4wOCk7cGFkZGluZzo4cHggMDtnYXA6NnB4O30KICAgICAgICAuaWNvbnt3aWR0aDo0MnB4O2hlaWdodDo0MnB4O2JvcmRlci1yYWRpdXM6MTRweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjouMThzIGVhc2U7dXNlci1zZWxlY3Q6bm9uZTtmb250LXNpemU6MThweDt9CiAgICAgICAgLmljb246aG92ZXJ7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC4xMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTFweCl9CiAgICAgICAgLnNiLXNwYWNlcntmbGV4OjF9CgogICAgICAgIC5tYWlue3BhZGRpbmc6MTZweCAxNHB4O292ZXJmbG93OmhpZGRlbjtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDoxMnB4O30KCiAgICAgICAgLnRvcGJhcnsKICAgICAgICAgIGJhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuNzUpOwogICAgICAgICAgYm9yZGVyOjFweCBzb2xpZCB2YXIoLS1saW5lKTsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6MTRweDsKICAgICAgICAgIHBhZGRpbmc6MTBweCAxMnB4OwogICAgICAgICAgZGlzcGxheTpmbGV4OwogICAgICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgICAgIGdhcDoxMHB4OwogICAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7CiAgICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjsKICAgICAgICB9CiAgICAgICAgLnRvcGJhciA+IGRpdjpmaXJzdC1jaGlsZHsKICAgICAgICAgIGZsZXg6MTsKICAgICAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsKICAgICAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAgICAgIHRleHQtYWxpZ246Y2VudGVyOwogICAgICAgIH0KICAgICAgICAudG9wYmFyIC50aXRsZXtmb250LXNpemU6MTZweDtmb250LXdlaWdodDo3MDA7Y29sb3I6IzBlMWIzM30KICAgICAgICAudG9wYmFyIC5zdWJ7Zm9udC1zaXplOjEycHg7Y29sb3I6dmFyKC0tbXV0ZWQpfQoKICAgICAgICAuZ3JpZFdyYXB7b3ZlcmZsb3c6YXV0bztwYWRkaW5nLXJpZ2h0OjRweDt9CiAgICAgICAgLmdyaWR7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoYXV0by1maWxsLG1pbm1heCgyMzBweCwxZnIpKTtnYXA6MTJweDtwYWRkaW5nOjJweDt9CiAgICAgICAgLmNhcmR7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWxpbmUpO2JvcmRlci1yYWRpdXM6MTRweDtvdmVyZmxvdzpoaWRkZW47Ym94LXNoYWRvdzowIDhweCAxOHB4IHJnYmEoMCwwLDAsLjA2KTt0cmFuc2l0aW9uOi4xOHMgZWFzZTtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO21pbi1oZWlnaHQ6MzEwcHg7fQogICAgICAgIC5jYXJkOmhvdmVye3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0ycHgpO2JveC1zaGFkb3c6MCAxNHB4IDI2cHggcmdiYSgwLDAsMCwuMTApfQogICAgICAgIC50aHVtYntwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MTkwcHg7YmFja2dyb3VuZDojZjBmMWYzO30KICAgICAgICAudGh1bWIgaW1ne3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7b2JqZWN0LWZpdDpjb3Zlcjt9CiAgICAgICAgLmNvbnRlbnR7cGFkZGluZzoxMHB4IDEwcHggMTJweDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDo2cHg7ZmxleDoxfQogICAgICAgIC5uYW1le2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjojMGUxYjMzO2ZvbnQtc2l6ZToxNHB4O2xpbmUtaGVpZ2h0OjEuMn0KICAgICAgICAuZGVzY3tmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS1tdXRlZCk7bWluLWhlaWdodDozNHB4fQogICAgICAgIC5idG5Sb3d7ZGlzcGxheTpmbGV4O2dhcDo4cHg7bWFyZ2luLXRvcDphdXRvfQogICAgICAgIC5idG57ZmxleDoxO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MTJweDtwYWRkaW5nOjlweCAxMHB4O2ZvbnQtZmFtaWx5OidUYWphd2FsJyxzYW5zLXNlcmlmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxM3B4O2ZvbnQtd2VpZ2h0OjcwMDt0cmFuc2l0aW9uOi4xOHMgZWFzZTt9CiAgICAgICAgLmJ0bi5wcmltYXJ5e2JhY2tncm91bmQ6dmFyKC0tZ3JlZW4yKTtjb2xvcjojZmZmfQogICAgICAgIC5idG4ucHJpbWFyeTpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLWdyZWVuKX0KCiAgICAgICAgLnJpZ2h0e2JhY2tncm91bmQ6I2ZmZjtib3JkZXItbGVmdDoxcHggc29saWQgdmFyKC0tbGluZSk7cGFkZGluZzoxMnB4O2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjEycHg7b3ZlcmZsb3c6aGlkZGVuO21pbi13aWR0aDoyMDBweDt9CiAgICAgICAgLmJyYW5ke2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjEwcHg7cGFkZGluZzoxMHB4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tbGluZSk7Ym9yZGVyLXJhZGl1czoxNHB4O30KICAgICAgICAubG9nb0JveHtoZWlnaHQ6MTEwcHg7Ym9yZGVyLXJhZGl1czoxMnB4O2JhY2tncm91bmQ6I2Y1ZjZmODtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7b3ZlcmZsb3c6aGlkZGVuO30KICAgICAgICAubG9nb0JveCBpbWd7bWF4LXdpZHRoOjEwMCU7bWF4LWhlaWdodDoxMDAlO29iamVjdC1maXQ6Y29udGFpbn0KICAgICAgICAuc2VhcmNoe3dpZHRoOjEwMCU7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1saW5lKTtib3JkZXItcmFkaXVzOjEycHg7cGFkZGluZzoxMHB4IDEwcHg7Zm9udC1zaXplOjEzcHg7Zm9udC1mYW1pbHk6J1RhamF3YWwnLHNhbnMtc2VyaWY7b3V0bGluZTpub25lO30KCiAgICAgICAgLmNhdHN7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1saW5lKTtib3JkZXItcmFkaXVzOjE0cHg7cGFkZGluZzoxMHB4O292ZXJmbG93OmF1dG87ZmxleDoxO30KICAgICAgICAuY2F0e3BhZGRpbmc6MTBweCAxMHB4O2JvcmRlci1yYWRpdXM6MTJweDtjdXJzb3I6cG9pbnRlcjtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6Y2VudGVyO3RyYW5zaXRpb246LjE1cyBlYXNlO2NvbG9yOiMyYjNhNTU7Zm9udC1zaXplOjEzcHg7fQogICAgICAgIC5jYXQ6aG92ZXJ7YmFja2dyb3VuZDojZjNmNWY3fQogICAgICAgIC5jYXQuYWN0aXZle2JhY2tncm91bmQ6I2U4ZjVlOTtjb2xvcjp2YXIoLS1ncmVlbik7Zm9udC13ZWlnaHQ6NzAwfQogICAgICAgIC5jb3VudHtmb250LXNpemU6MTJweDtjb2xvcjojN2M4Nzk4fQoKICAgICAgICAucmlnaHRGb290ZXJ7CiAgICAgICAgICBtYXJnaW4tdG9wOjhweDsKICAgICAgICAgIHRleHQtYWxpZ246Y2VudGVyOwogICAgICAgICAgZm9udC1zaXplOjEycHg7CiAgICAgICAgICBjb2xvcjojOGE5NGE2OwogICAgICAgICAgcGFkZGluZzoxMHB4IDZweDsKICAgICAgICAgIHVzZXItc2VsZWN0OnRleHQ7CiAgICAgICAgfQogICAgICAgIC5yaWdodEZvb3RlciAucGhvbmV7Y29sb3I6IzVhNjQ3NTtmb250LXdlaWdodDo3MDB9CiAgICAgICAgLnJpZ2h0Rm9vdGVyIC5waG9uZUljb257bWFyZ2luLXJpZ2h0OjZweH0KCiAgICAgICAgLnJlc2l6ZXJ7CiAgICAgICAgICBwb3NpdGlvbjpmaXhlZDsKICAgICAgICAgIHRvcDowOwogICAgICAgICAgYm90dG9tOjA7CiAgICAgICAgICB3aWR0aDoxMHB4OwogICAgICAgICAgY3Vyc29yOmNvbC1yZXNpemU7CiAgICAgICAgICB6LWluZGV4Ojk5OTk7CiAgICAgICAgICBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50OwogICAgICAgIH0KICAgICAgICAucmVzaXplcjo6YWZ0ZXJ7CiAgICAgICAgICBjb250ZW50OiIiOwogICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7CiAgICAgICAgICB0b3A6MDtib3R0b206MDsKICAgICAgICAgIGxlZnQ6NHB4OwogICAgICAgICAgd2lkdGg6MnB4OwogICAgICAgICAgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLC4xNCk7CiAgICAgICAgICBib3JkZXItcmFkaXVzOjJweDsKICAgICAgICB9CiAgICAgICAgLmRyYWdnaW5nICp7IGN1cnNvcjpjb2wtcmVzaXplICFpbXBvcnRhbnQ7IHVzZXItc2VsZWN0Om5vbmUgIWltcG9ydGFudDsgfQoKICAgICAgICAuY2F0c0hlYWR7CiAgICAgICAgICBkaXNwbGF5OmZsZXg7CiAgICAgICAgICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsKICAgICAgICAgIGdhcDoxMHB4OwogICAgICAgICAgbWFyZ2luOjAgMCAxMHB4OwogICAgICAgIH0KICAgICAgICAuY2F0c0hlYWQgaDR7IG1hcmdpbjowOyBjb2xvcjojMGUxYjMzOyBmb250LXNpemU6MTRweDsgfQoKICAgICAgICAuY2F0c0Nsb3NlQnRuewogICAgICAgICAgd2lkdGg6MjZweDsKICAgICAgICAgIGhlaWdodDoyNnB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czo4cHg7CiAgICAgICAgICBib3JkZXI6MXB4IHNvbGlkIHZhcigtLWxpbmUpOwogICAgICAgICAgYmFja2dyb3VuZDojZmZmOwogICAgICAgICAgY3Vyc29yOnBvaW50ZXI7CiAgICAgICAgICBmb250LWZhbWlseTonVGFqYXdhbCcsc2Fucy1zZXJpZjsKICAgICAgICAgIGZvbnQtc2l6ZToxNnB4OwogICAgICAgICAgbGluZS1oZWlnaHQ6MTsKICAgICAgICAgIGRpc3BsYXk6ZmxleDsKICAgICAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICAgICAgICB0cmFuc2l0aW9uOi4xNXMgZWFzZTsKICAgICAgICB9CiAgICAgICAgLmNhdHNDbG9zZUJ0bjpob3ZlcnsgYmFja2dyb3VuZDojZjNmNWY3OyB0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KTsgfQoKICAgICAgICBib2R5LnJpZ2h0Q29sbGFwc2VkIC5hcHB7CiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6dmFyKC0tc2J3KSAxZnIgdmFyKC0tcmlnaHRNaW5pKSAhaW1wb3J0YW50OwogICAgICAgIH0KICAgICAgICBib2R5LnJpZ2h0Q29sbGFwc2VkICNyaWdodENvbHsKICAgICAgICAgIGRpc3BsYXk6ZmxleCAhaW1wb3J0YW50OwogICAgICAgICAgcGFkZGluZzo4cHggIWltcG9ydGFudDsKICAgICAgICAgIGdhcDo4cHggIWltcG9ydGFudDsKICAgICAgICAgIGFsaWduLWl0ZW1zOmZsZXgtc3RhcnQgIWltcG9ydGFudDsKICAgICAgICAgIGp1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0ICFpbXBvcnRhbnQ7CiAgICAgICAgfQogICAgICAgIGJvZHkucmlnaHRDb2xsYXBzZWQgI3JpZ2h0Q29sIC5icmFuZCwKICAgICAgICBib2R5LnJpZ2h0Q29sbGFwc2VkICNyaWdodENvbCAuY2F0cywKICAgICAgICBib2R5LnJpZ2h0Q29sbGFwc2VkICNyaWdodENvbCAucmlnaHRGb290ZXJ7CiAgICAgICAgICBkaXNwbGF5Om5vbmUgIWltcG9ydGFudDsKICAgICAgICB9CiAgICAgICAgYm9keS5yaWdodENvbGxhcHNlZCAjcmVzaXplcnsgZGlzcGxheTpub25lICFpbXBvcnRhbnQ7IH0KCiAgICAgICAgLmNhdHNPcGVuQnRuewogICAgICAgICAgd2lkdGg6MjZweDsKICAgICAgICAgIGhlaWdodDoyNnB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czo4cHg7CiAgICAgICAgICBib3JkZXI6MXB4IHNvbGlkIHZhcigtLWxpbmUpOwogICAgICAgICAgYmFja2dyb3VuZDojZmZmOwogICAgICAgICAgY29sb3I6IzBlMWIzMzsKICAgICAgICAgIGRpc3BsYXk6bm9uZTsKICAgICAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAgICAgIGp1c3RpZnktY29udGVudDpjZW50ZXI7CiAgICAgICAgICBjdXJzb3I6cG9pbnRlcjsKICAgICAgICAgIHVzZXItc2VsZWN0Om5vbmU7CiAgICAgICAgICBmb250LWZhbWlseTonVGFqYXdhbCcsc2Fucy1zZXJpZjsKICAgICAgICAgIGZvbnQtc2l6ZToxNnB4OwogICAgICAgICAgbGluZS1oZWlnaHQ6MTsKICAgICAgICAgIHRyYW5zaXRpb246LjE1cyBlYXNlOwogICAgICAgICAgYm94LXNoYWRvdzpub25lOwogICAgICAgIH0KICAgICAgICAuY2F0c09wZW5CdG46aG92ZXJ7IGJhY2tncm91bmQ6I2YzZjVmNzsgdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTFweCk7IH0KICAgICAgICBib2R5LnJpZ2h0Q29sbGFwc2VkIC5jYXRzT3BlbkJ0bnsgZGlzcGxheTpmbGV4OyB9CiAgICAgIDwvc3R5bGU+CiAgICA8L2hlYWQ+CgogICAgPGJvZHkgb25jb250ZXh0bWVudT0icmV0dXJuIGZhbHNlIj4KICAgICAgPGRpdiBjbGFzcz0iYXBwIiBpZD0iYXBwUm9vdCI+CgogICAgICAgIDxkaXYgY2xhc3M9InNpZGViYXIiIGlkPSJzaWRlYmFyQ29sIj4KCiAgICAgICAgICA8ZGl2IGNsYXNzPSJtaW5pVG9nZ2xlIiBpZD0ibWluaVRvZ2dsZSIgdGl0bGU9Iti32Yov2YHYqtitIj48c3BhbiBpZD0ibWluaUFycm93Ij7in6o8L3NwYW4+PC9kaXY+CgogICAgICAgICAgPGRpdiBjbGFzcz0icGlsbCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imljb24iIHRpdGxlPSLZhdi52YTZiNmF2KfYqiDYp9mE2K3Ys9in2KgiIG9uY2xpY2s9ImRvQWN0aW9uKCd1c2VyX2luZm8nKSI+8J+RpDwvZGl2PgogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgPGRpdiBjbGFzcz0icGlsbCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imljb24iIHRpdGxlPSLYp9i12K/Yp9ixINmB2KfYqtmI2LHZhyIgb25jbGljaz0iZG9BY3Rpb24oJ2ludm9pY2UnKSI+8J+nvjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpY29uIiB0aXRsZT0i2KXZhti02KfYoSDYqtmC2LHZitixIiBvbmNsaWNrPSJkb0FjdGlvbigncmVwb3J0JykiPvCfk4Q8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iaWNvbiIgdGl0bGU9Itiq2LHZgtmK2YUg2KfZhNmI2K3Yr9in2KoiIG9uY2xpY2s9ImRvQWN0aW9uKCd1bmlxdWUnKSI+8J+UgTwvZGl2PgogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgPGRpdiBjbGFzcz0icGlsbCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imljb24iIHRpdGxlPSLYqtiv2YjZitixIDQ1wrAiIG9uY2xpY2s9ImRvQWN0aW9uKCdyb3RhdGU5MCcpIj7ihrs8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iaWNvbiIgdGl0bGU9ItmC2YTYqCDZitmF2YrZhi/YtNmF2KfZhCIgb25jbGljaz0iZG9BY3Rpb24oJ2ZsaXBfbHInKSI+4oeGPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imljb24iIHRpdGxlPSLZhNiy2YIg2KzZhtioINio2KzZhtioIChDbGljayBTaWRlIFNuYXApIiBvbmNsaWNrPSJkb0FjdGlvbignc25hcF9zaWRlJykiPvCfp7I8L2Rpdj4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIDxkaXYgY2xhc3M9InNiLXNwYWNlciI+PC9kaXY+CgogICAgICAgICAgPGRpdiBjbGFzcz0icGlsbCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imljb24iIHRpdGxlPSLYqtit2K/ZitirINin2YTZhdmD2KrYqNmHIiBvbmNsaWNrPSJkb0FjdGlvbigncmVmcmVzaF9jYWNoZScpIj7imbs8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJtYWluIiBpZD0ibWFpbkNvbCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b3BiYXIiPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRpdGxlIj7ZhdmD2KrYqNipIE1IREVTSUdOPC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3ViIj7YqtmFINiq2LXZhdmK2YUg2YfYsNmHINin2YTZhdmD2KrYqNipINio2YjYp9iz2LfYqSDYp9mF2KrYtNiv2YrYstin2YrZhiDZiCDYp9mKINiq2LXYsdmBINmB2YrZh9inINio2K/ZiNmGINil2LDZhiDZiti52KrYqNixINin2YbYqtmH2KfZg9inINmE2K3ZgtmI2YIg2KfZhNmF2YTZg9mK2Kkg2YjYp9mD2YjZhiDYrti12YrZhdmDINin2YXYp9mFINin2YTZhNmHPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZFdyYXAiPgogICAgICAgICAgICA8ZGl2IGlkPSJncmlkIiBjbGFzcz0iZ3JpZCI+PC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBjbGFzcz0icmlnaHQiIGlkPSJyaWdodENvbCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXRzT3BlbkJ0biIgaWQ9ImNhdHNPcGVuQnRuIiB0aXRsZT0i2KXYuNmH2KfYsSDYp9mE2KrYtdmG2YrZgdin2KoiPuKYsDwvZGl2PgoKICAgICAgICAgIDxkaXYgY2xhc3M9ImJyYW5kIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibG9nb0JveCI+CiAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vbWFobW91ZGRlc2lnbi5jb20vU0tFVENIVVAvY29tcG9uZW50cy9sb2dvLnBuZyIgYWx0PSJNSERFU0lHTiIgLz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxpbnB1dCBpZD0ic2VhcmNoIiBjbGFzcz0ic2VhcmNoIiBwbGFjZWhvbGRlcj0iU2VhcmNoIC4uLiIgLz4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIDxkaXYgY2xhc3M9ImNhdHMiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXRzSGVhZCI+CiAgICAgICAgICAgICAgPGg0Ptin2YTYqti12YbZitmB2KfYqjwvaDQ+CiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY2F0c0Nsb3NlQnRuIiBpZD0iY2F0c0Nsb3NlQnRuIiB0aXRsZT0i2KXYrtmB2KfYoSDYp9mE2KrYtdmG2YrZgdin2KoiPuKclTwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBpZD0iY2F0cyI+PC9kaXY+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICA8ZGl2IGNsYXNzPSJyaWdodEZvb3RlciI+CiAgICAgICAgICAgICN7Zm9vdGVyXzF9PGJyPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0icGhvbmVJY29uIj7wn5OePC9zcGFuPjxzcGFuIGNsYXNzPSJwaG9uZSI+I3tmb290ZXJfMn08L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICA8ZGl2IGNsYXNzPSJyZXNpemVyIiBpZD0icmVzaXplciI+PC9kaXY+CgogICAgICA8c2NyaXB0PgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZT0+ZS5wcmV2ZW50RGVmYXVsdCgpKTsKCiAgICAgICAgY29uc3QgYWxsQ29tcG9uZW50cyA9ICN7Q09NUE9ORU5UUy50b19qc29ufTsKICAgICAgICBsZXQgYWN0aXZlQ2F0ID0gImFsbCI7CiAgICAgICAgbGV0IHEgPSAiIjsKCiAgICAgICAgY29uc3QgcmlnaHRDb2wgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJpZ2h0Q29sIik7CiAgICAgICAgY29uc3QgcmVzaXplciAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlc2l6ZXIiKTsKICAgICAgICBjb25zdCBtaW5pVG9nZ2xlPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWluaVRvZ2dsZSIpOwogICAgICAgIGNvbnN0IG1pbmlBcnJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtaW5pQXJyb3ciKTsKCiAgICAgICAgY29uc3QgY2F0c0Nsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhdHNDbG9zZUJ0biIpOwogICAgICAgIGNvbnN0IGNhdHNPcGVuQnRuICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYXRzT3BlbkJ0biIpOwoKICAgICAgICBjb25zdCBLRVlfVyA9ICJtaF9yaWdodF9jb2xfd2lkdGhfdjEiOwogICAgICAgIGNvbnN0IEtFWV9FWFBfVyA9ICJtaF91aV9leHBhbmRlZF93X3YxIjsKICAgICAgICBjb25zdCBLRVlfRVhQX0ggPSAibWhfdWlfZXhwYW5kZWRfaF92MSI7CiAgICAgICAgY29uc3QgS0VZX1JJR0hUX0NPTExBUFNFRCA9ICJtaF9yaWdodF9jb2xsYXBzZWRfdjEiOwoKICAgICAgICBjb25zdCBNSU5fVyA9IDIwMDsKICAgICAgICBjb25zdCBNQVhfVyA9IDUyMDsKCiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplKHMpeyByZXR1cm4gKHN8fCIiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkudHJpbSgpOyB9CiAgICAgICAgZnVuY3Rpb24gZXNjYXBlSHRtbChzKXsKICAgICAgICAgIHJldHVybiAoc3x8IiIpLnRvU3RyaW5nKCkKICAgICAgICAgICAgLnJlcGxhY2VBbGwoIiYiLCImYW1wOyIpLnJlcGxhY2VBbGwoIjwiLCImbHQ7IikKICAgICAgICAgICAgLnJlcGxhY2VBbGwoIj4iLCImZ3Q7IikKICAgICAgICAgICAgLnJlcGxhY2VBbGwoJyInLCImcXVvdDsiKS5yZXBsYWNlQWxsKCInIiwiJiMwMzk7Iik7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGVzY2FwZUh0bWxBdHRyKHMpeyByZXR1cm4gZXNjYXBlSHRtbChzKS5yZXBsYWNlQWxsKCJgIiwiIik7IH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0UmlnaHRXaWR0aCgpewogICAgICAgICAgY29uc3Qgc2F2ZWQgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShLRVlfVykgfHwgIiIsIDEwKTsKICAgICAgICAgIHJldHVybiBpc05hTihzYXZlZCkgPyAyNjAgOiBzYXZlZDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNldFJpZ2h0V2lkdGgocHgpewogICAgICAgICAgcHggPSBNYXRoLm1heChNSU5fVywgTWF0aC5taW4oTUFYX1csIHB4KSk7CiAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoIi0tcmlnaHR3IiwgcHggKyAicHgiKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEtFWV9XLCBTdHJpbmcocHgpKTsKICAgICAgICAgIHBvc2l0aW9uQ29udHJvbHMoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlzTWluaSgpewogICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCJtaW5pIik7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpc1JpZ2h0Q29sbGFwc2VkKCl7CiAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoInJpZ2h0Q29sbGFwc2VkIik7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhcHBseVJpZ2h0Q29sbGFwc2VkKHN0YXRlKXsKICAgICAgICAgIGlmKHN0YXRlKXsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCJyaWdodENvbGxhcHNlZCIpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShLRVlfUklHSFRfQ09MTEFQU0VELCAiMSIpOwogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgicmlnaHRDb2xsYXBzZWQiKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oS0VZX1JJR0hUX0NPTExBUFNFRCwgIjAiKTsKICAgICAgICAgIH0KICAgICAgICAgIHNldFRpbWVvdXQocG9zaXRpb25Db250cm9scywgMCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwb3NpdGlvbkNvbnRyb2xzKCl7CiAgICAgICAgICBpZihpc01pbmkoKSB8fCBpc1JpZ2h0Q29sbGFwc2VkKCkpewogICAgICAgICAgICByZXNpemVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IHIgPSByaWdodENvbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgIGNvbnN0IHggPSAoci5yaWdodCAtIDUpOwogICAgICAgICAgcmVzaXplci5zdHlsZS5sZWZ0ID0geCArICJweCI7CiAgICAgICAgICByZXNpemVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgIH0KCiAgICAgICAgbGV0IGRyYWdnaW5nID0gZmFsc2U7CiAgICAgICAgcmVzaXplci5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLCAoZSk9PnsKICAgICAgICAgIGlmKGlzTWluaSgpIHx8IGlzUmlnaHRDb2xsYXBzZWQoKSkgcmV0dXJuOwogICAgICAgICAgZHJhZ2dpbmcgPSB0cnVlOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCJkcmFnZ2luZyIpOwogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIH0pOwoKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCAoZSk9PnsKICAgICAgICAgIGlmKCFkcmFnZ2luZykgcmV0dXJuOwogICAgICAgICAgY29uc3QgdyA9IGUuY2xpZW50WDsKICAgICAgICAgIHNldFJpZ2h0V2lkdGgodyk7CiAgICAgICAgfSk7CgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCAoKT0+ewogICAgICAgICAgaWYoIWRyYWdnaW5nKSByZXR1cm47CiAgICAgICAgICBkcmFnZ2luZyA9IGZhbHNlOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCJkcmFnZ2luZyIpOwogICAgICAgIH0pOwoKICAgICAgICBmdW5jdGlvbiBzYXZlRXhwYW5kZWRTaXplKCl7CiAgICAgICAgICB0cnl7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEtFWV9FWFBfVywgU3RyaW5nKHdpbmRvdy5pbm5lcldpZHRoKSk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEtFWV9FWFBfSCwgU3RyaW5nKHdpbmRvdy5pbm5lckhlaWdodCkpOwogICAgICAgICAgfWNhdGNoKGUpe30KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFwcGx5TWluaVN0YXRlKG1pbmksIG5vdGlmeVJ1YnkpewogICAgICAgICAgaWYobWluaSl7CiAgICAgICAgICAgIHNhdmVFeHBhbmRlZFNpemUoKTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCJtaW5pIik7CiAgICAgICAgICAgIG1pbmlBcnJvdy50ZXh0Q29udGVudCA9ICLin6oiOwogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgibWluaSIpOwogICAgICAgICAgICBtaW5pQXJyb3cudGV4dENvbnRlbnQgPSAi4p+rIjsKICAgICAgICAgIH0KCiAgICAgICAgICBzZXRUaW1lb3V0KHBvc2l0aW9uQ29udHJvbHMsIDApOwoKICAgICAgICAgIGlmKG5vdGlmeVJ1YnkpewogICAgICAgICAgICBjb25zdCBleHBXID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oS0VZX0VYUF9XKSB8fCAiMTIwMCIsIDEwKSB8fCAxMjAwOwogICAgICAgICAgICBjb25zdCBleHBIID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oS0VZX0VYUF9IKSB8fCAiNzIwIiwgMTApIHx8IDcyMDsKCiAgICAgICAgICAgIGNvbnN0IHNid1N0ciA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKCItLXNidyIpLnRyaW0oKTsKICAgICAgICAgICAgbGV0IG1pbmlXID0gcGFyc2VJbnQoc2J3U3RyLCAxMCk7CiAgICAgICAgICAgIGlmIChpc05hTihtaW5pVykgfHwgbWluaVcgPCA0MCkgbWluaVcgPSA3NDsKCiAgICAgICAgICAgIG1pbmlXID0gbWluaVcgKyAyOwoKICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsKICAgICAgICAgICAgICBtaW5pOiBtaW5pID8gMSA6IDAsCiAgICAgICAgICAgICAgbWluaVc6IG1pbmlXLAogICAgICAgICAgICAgIGV4cFc6IGV4cFcsCiAgICAgICAgICAgICAgZXhwSDogZXhwSAogICAgICAgICAgICB9OwogICAgICAgICAgICBza2V0Y2h1cC51aVN0YXRlKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIG1pbmlUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKT0+ewogICAgICAgICAgYXBwbHlNaW5pU3RhdGUoIWlzTWluaSgpLCB0cnVlKTsKICAgICAgICB9KTsKCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsICgpPT57CiAgICAgICAgICB0cnl7CiAgICAgICAgICAgIGlmKCFpc01pbmkoKSl7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oS0VZX0VYUF9XLCBTdHJpbmcod2luZG93LmlubmVyV2lkdGgpKTsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShLRVlfRVhQX0gsIFN0cmluZyh3aW5kb3cuaW5uZXJIZWlnaHQpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfWNhdGNoKGUpe30KICAgICAgICAgIHNldFRpbWVvdXQocG9zaXRpb25Db250cm9scywgMCk7CiAgICAgICAgfSk7CgogICAgICAgIGNhdHNDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpPT57IGFwcGx5UmlnaHRDb2xsYXBzZWQodHJ1ZSk7IH0pOwogICAgICAgIGNhdHNPcGVuQnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgICgpPT57IGFwcGx5UmlnaHRDb2xsYXBzZWQoZmFsc2UpOyB9KTsKCiAgICAgICAgZnVuY3Rpb24gZmlsdGVyTGlzdCgpewogICAgICAgICAgcmV0dXJuIGFsbENvbXBvbmVudHMuZmlsdGVyKGl0PT57CiAgICAgICAgICAgIGNvbnN0IGNhdE9rID0gKGFjdGl2ZUNhdCA9PT0gImFsbCIpID8gdHJ1ZSA6IChpdC5jYXRlZ29yeSA9PT0gYWN0aXZlQ2F0KTsKICAgICAgICAgICAgY29uc3QgdGV4dCA9IG5vcm1hbGl6ZSgoaXQubmFtZXx8IiIpICsgIiAiICsgKGl0LmRlc2N8fCIiKSArICIgIiArIChpdC5jYXRlZ29yeXx8IiIpKTsKICAgICAgICAgICAgY29uc3QgcU9rID0gcSA/IHRleHQuaW5jbHVkZXMocSkgOiB0cnVlOwogICAgICAgICAgICByZXR1cm4gY2F0T2sgJiYgcU9rOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb3VudEJ5Q2F0KCl7CiAgICAgICAgICBjb25zdCBtYXAgPSB7fTsKICAgICAgICAgIGFsbENvbXBvbmVudHMuZm9yRWFjaChpdD0+ewogICAgICAgICAgICBjb25zdCBjID0gaXQuY2F0ZWdvcnkgfHwgIti62YrYsSDZhdi12YbZgSI7CiAgICAgICAgICAgIG1hcFtjXSA9IChtYXBbY118fDApICsgMTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIG1hcDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckNhdHMoKXsKICAgICAgICAgIGNvbnN0IG1hcCA9IGNvdW50QnlDYXQoKTsKICAgICAgICAgIGNvbnN0IGNhdHNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYXRzIik7CiAgICAgICAgICBjb25zdCBjYXRzID0gWyJhbGwiLCAuLi5PYmplY3Qua2V5cyhtYXApXTsKICAgICAgICAgIGNhdHNFbC5pbm5lckhUTUwgPSBjYXRzLm1hcChjPT57CiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gKGM9PT0iYWxsIikgPyAi2KfZhNmD2YQiIDogYzsKICAgICAgICAgICAgY29uc3QgY250ID0gKGM9PT0iYWxsIikgPyBhbGxDb21wb25lbnRzLmxlbmd0aCA6IG1hcFtjXTsKICAgICAgICAgICAgY29uc3QgY2xzID0gKGFjdGl2ZUNhdCA9PT0gYykgPyAiY2F0IGFjdGl2ZSIgOiAiY2F0IjsKICAgICAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPSIke2Nsc30iIG9uY2xpY2s9InNldENhdCgnJHtlc2NhcGVIdG1sQXR0cihjKX0nKSI+CiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2VzY2FwZUh0bWwodGl0bGUpfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjb3VudCI+JHtjbnR9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICB9KS5qb2luKCIiKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckdyaWQoKXsKICAgICAgICAgIGNvbnN0IGxpc3QgPSBmaWx0ZXJMaXN0KCk7CiAgICAgICAgICBjb25zdCBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImdyaWQiKTsKICAgICAgICAgIGdyaWQuaW5uZXJIVE1MID0gbGlzdC5tYXAoaXQ9PnsKICAgICAgICAgICAgY29uc3Qgc2FmZSA9IGVzY2FwZUh0bWxBdHRyKEpTT04uc3RyaW5naWZ5KGl0KSk7CiAgICAgICAgICAgIHJldHVybiBgCiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0aHVtYiI+CiAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIke2VzY2FwZUh0bWxBdHRyKGl0LmltYWdlKX0iIGFsdD0iIiAvPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250ZW50Ij4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmFtZSI+JHtlc2NhcGVIdG1sKGl0Lm5hbWUpfTwvZGl2PgogICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZXNjIj4ke2VzY2FwZUh0bWwoaXQuZGVzYyB8fCAiIil9PC9kaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJ0blJvdyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIHByaW1hcnkiIG9uY2xpY2s9J2luc2VydE9yaWdpbmFsKCR7c2FmZX0pJz7Ypdiv2LHYp9isPC9idXR0b24+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICB9KS5qb2luKCIiKTsKCiAgICAgICAgICBzZXRUaW1lb3V0KHBvc2l0aW9uQ29udHJvbHMsIDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2V0Q2F0KGNhdCl7CiAgICAgICAgICBhY3RpdmVDYXQgPSAoY2F0PT09ImFsbCIpID8gImFsbCIgOiBjYXQ7CiAgICAgICAgICByZW5kZXJDYXRzKCk7CiAgICAgICAgICByZW5kZXJHcmlkKCk7CiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VhcmNoIikuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCAoZSk9PnsKICAgICAgICAgIHEgPSBub3JtYWxpemUoZS50YXJnZXQudmFsdWUpOwogICAgICAgICAgcmVuZGVyR3JpZCgpOwogICAgICAgIH0pOwoKICAgICAgICB3aW5kb3cuaW5zZXJ0T3JpZ2luYWwgPSBmdW5jdGlvbihjb21wKXsKICAgICAgICAgIHNrZXRjaHVwLmluc2VydE9yaWdpbmFsKEpTT04uc3RyaW5naWZ5KGNvbXApKTsKICAgICAgICB9CiAgICAgICAgd2luZG93LmRvQWN0aW9uID0gZnVuY3Rpb24obmFtZSl7CiAgICAgICAgICBza2V0Y2h1cC5kb0FjdGlvbihuYW1lKTsKICAgICAgICB9CgogICAgICAgIHNldFJpZ2h0V2lkdGgoZ2V0UmlnaHRXaWR0aCgpKTsKICAgICAgICByZW5kZXJDYXRzKCk7CiAgICAgICAgcmVuZGVyR3JpZCgpOwoKICAgICAgICBhcHBseU1pbmlTdGF0ZShmYWxzZSwgdHJ1ZSk7CgogICAgICAgIGNvbnN0IHNhdmVkQ29sbGFwc2VkID0gKGxvY2FsU3RvcmFnZS5nZXRJdGVtKEtFWV9SSUdIVF9DT0xMQVBTRUQpIHx8ICIwIikgPT09ICIxIjsKICAgICAgICBhcHBseVJpZ2h0Q29sbGFwc2VkKHNhdmVkQ29sbGFwc2VkKTsKCiAgICAgICAgc2V0VGltZW91dChwb3NpdGlvbkNvbnRyb2xzLCA2MCk7CiAgICAgIDwvc2NyaXB0PgogICAgPC9ib2R5PgogICAgPC9odG1sPgogICAgSFRNTAoKICAgIGRsZy5zZXRfaHRtbChodG1sKQoKICAgIGRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJpbnNlcnRPcmlnaW5hbCIpIGRvIHxfLCBjb21wX2pzb258CiAgICAgIGNvbXAgPSBKU09OLnBhcnNlKGNvbXBfanNvbiwgc3ltYm9saXplX25hbWVzOiB0cnVlKQogICAgICBmZXRjaF9kZWZpbml0aW9uX2FzeW5jKGNvbXApIGRvIHxkZWZpbml0aW9ufAogICAgICAgIG5leHQgdW5sZXNzIGRlZmluaXRpb24KICAgICAgICBiZWdpbgogICAgICAgICAgbW9kZWwgPSBTa2V0Y2h1cC5hY3RpdmVfbW9kZWwKICAgICAgICAgIGluc3RhbGxfcGxhY2Vfb2JzZXJ2ZXJfZm9yKGRlZmluaXRpb24pCiAgICAgICAgICBtb2RlbC5wbGFjZV9jb21wb25lbnQoZGVmaW5pdGlvbikKICAgICAgICByZXNjdWUgPT4gZQogICAgICAgICAgVUkubWVzc2FnZWJveCgi4p2MINiu2LfYoyDYo9ir2YbYp9ihINin2YTYpdiv2LHYp9isOiAje2UubWVzc2FnZX0iKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAoKICAgIGRsZy5hZGRfYWN0aW9uX2NhbGxiYWNrKCJ1aVN0YXRlIikgZG8gfF8sIHBheWxvYWRfanNvbnwKICAgICAgYmVnaW4KICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShwYXlsb2FkX2pzb24pIHJlc2N1ZSB7fQogICAgICAgIG1pbmkgPSBkYXRhWyJtaW5pIl0udG9faSA9PSAxCgogICAgICAgIGVuc3VyZV9zaXplID0gbGFtYmRhIGRvIHx0YXJnZXRfdywgdGFyZ2V0X2gsIGF0dGVtcHRzfAogICAgICAgICAgYmVnaW4KICAgICAgICAgICAgZGxnLnNldF9zaXplKHRhcmdldF93LCB0YXJnZXRfaCkgcmVzY3VlIG5pbAogICAgICAgICAgcmVzY3VlCiAgICAgICAgICBlbmQKCiAgICAgICAgICBVSS5zdGFydF90aW1lcigwLjA1LCBmYWxzZSkgZG8KICAgICAgICAgICAgYmVnaW4KICAgICAgICAgICAgICBjdXJfdywgY3VyX2ggPSBkbGcuZ2V0X3NpemUKICAgICAgICAgICAgICBjdXJfdyA9IGN1cl93LnRvX2kKICAgICAgICAgICAgICBjdXJfaCA9IGN1cl9oLnRvX2kKCiAgICAgICAgICAgICAgaWYgY3VyX2ggPCB0YXJnZXRfaAogICAgICAgICAgICAgICAgZGlmZiAgPSAodGFyZ2V0X2ggLSBjdXJfaCkKICAgICAgICAgICAgICAgIG5ld19oID0gdGFyZ2V0X2ggKyBkaWZmICsgMgogICAgICAgICAgICAgICAgZGxnLnNldF9zaXplKHRhcmdldF93LCBuZXdfaCkgcmVzY3VlIG5pbAogICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICBpZiBhdHRlbXB0cyA+IDEKICAgICAgICAgICAgICAgIFVJLnN0YXJ0X3RpbWVyKDAuMDYsIGZhbHNlKSBkbwogICAgICAgICAgICAgICAgICBlbnN1cmVfc2l6ZS5jYWxsKHRhcmdldF93LCB0YXJnZXRfaCwgYXR0ZW1wdHMgLSAxKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJlc2N1ZQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICBpZiBtaW5pCiAgICAgICAgICB3ID0gKGRhdGFbIm1pbmlXIl0gfHwgNzQpLnRvX2kKCiAgICAgICAgICByYl9oID0gKFNrZXRjaHVwLnJlYWRfZGVmYXVsdChQTFVHSU5fTkFNRSwgImRsZ19oIikgfHwgNzIwKS50b19pCiAgICAgICAgICByYl9oID0gNzIwIGlmIHJiX2ggPCAzMDAKCiAgICAgICAgICBkbGcuc2V0X3NpemUodywgcmJfaCkgcmVzY3VlIG5pbAogICAgICAgIGVsc2UKICAgICAgICAgIHcgPSAoZGF0YVsiZXhwVyJdIHx8IDEyMDApLnRvX2kKICAgICAgICAgIGggPSAoZGF0YVsiZXhwSCJdIHx8IDcyMCkudG9faQogICAgICAgICAgdyA9IDEyMDAgaWYgdyA8IDMwMAogICAgICAgICAgaCA9IDcyMCAgaWYgaCA8IDMwMAoKICAgICAgICAgIFNrZXRjaHVwLndyaXRlX2RlZmF1bHQoUExVR0lOX05BTUUsICJkbGdfdyIsIHcpCiAgICAgICAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZGxnX2giLCBoKQoKICAgICAgICAgIGVuc3VyZV9zaXplLmNhbGwodywgaCwgMykKICAgICAgICBlbmQKICAgICAgcmVzY3VlCiAgICAgIGVuZAogICAgZW5kCgogICAgZGxnLmFkZF9hY3Rpb25fY2FsbGJhY2soImRvQWN0aW9uIikgZG8gfF8sIG5hbWV8CiAgICAgIGNhc2UgbmFtZS50b19zCiAgICAgIHdoZW4gInVzZXJfaW5mbyIgICAgIHRoZW4gc2hvd191c2VyX2luZm8KICAgICAgd2hlbiAiaW52b2ljZSIgICAgICAgdGhlbiBjYWxsX2ludm9pY2VfcGx1Z2luCiAgICAgIHdoZW4gInJlcG9ydCIgICAgICAgIHRoZW4gY2FsbF9yZXBvcnRzX3BsdWdpbgogICAgICB3aGVuICJ1bmlxdWUiICAgICAgICB0aGVuIE1IREVTSUdOX1VOSVFVSUZZLnJ1bl91bmlxdWlmeQogICAgICB3aGVuICJyZWZyZXNoX2NhY2hlIiB0aGVuIGNsZWFyX2NhY2hlCgogICAgICB3aGVuICJyb3RhdGU5MCIKICAgICAgICBiZWdpbjsgZGxnLm1pbmltaXplOyByZXNjdWU7IGVuZAogICAgICAgIGFjdGl2YXRlX3JvdGF0ZV90b29sCgogICAgICB3aGVuICJmbGlwX2xyIgogICAgICAgIGJlZ2luOyBkbGcubWluaW1pemU7IHJlc2N1ZTsgZW5kCiAgICAgICAgYWN0aXZhdGVfZmxpcF9scl90b29sCgogICAgICB3aGVuICJzbmFwX3NpZGUiCiAgICAgICAgYmVnaW47IGRsZy5taW5pbWl6ZTsgcmVzY3VlOyBlbmQKICAgICAgICBhY3RpdmF0ZV9jbGlja19zaWRlX3NuYXBfdG9vbAogICAgICBlbmQKICAgIGVuZAoKICAgIGJlZ2luCiAgICAgIGRsZy5zZXRfb25fY2xvc2VkIGRvCiAgICAgICAgYmVnaW4KICAgICAgICAgIHcsIGggPSBkbGcuZ2V0X3NpemUKICAgICAgICAgIHcgPSB3LnRvX2kKICAgICAgICAgIGggPSBoLnRvX2kKICAgICAgICAgIGlmIHcgPiAyMDAgJiYgaCA+IDIwMAogICAgICAgICAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZGxnX3ciLCB3KQogICAgICAgICAgICBTa2V0Y2h1cC53cml0ZV9kZWZhdWx0KFBMVUdJTl9OQU1FLCAiZGxnX2giLCBoKQogICAgICAgICAgZW5kCiAgICAgICAgcmVzY3VlCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgcmVzY3VlCiAgICBlbmQKCiAgICBkbGcuc2hvdwogIGVuZAoKICAjID09PT09PT09PT09PT09PT09PT09IE1lbnVzICsgVG9vbGJhciA9PT09PT09PT09PT09PT09PT09PQogIEZJTEVfTE9BREVEX0tFWSA9ICJtaGRlc2lnbl9saWJyYXJ5X2xvYWRlZF92MSIKCiAgQHRvb2xiYXIgPSBuaWwKICBAY21kID0gbmlsCgogIHVubGVzcyBmaWxlX2xvYWRlZD8oRklMRV9MT0FERURfS0VZKQogICAgIyDYp9mE2KrZgdi52YrZhCDYp9mE2KrZhNmC2KfYptmKINi52YbYryDYqNiv2KEg2KfZhNiq2LTYutmK2YQKICAgIFVJLnN0YXJ0X3RpbWVyKDIuMCwgZmFsc2UpIGRvCiAgICAgIGF1dG9fYWN0aXZhdGVfb25fc3RhcnR1cAogICAgZW5kCiAgICAKICAgIFVJLm1lbnUoIlBsdWdpbnMiKS5hZGRfaXRlbSgiI3tQTFVHSU5fTkFNRX0gLSDYqtmB2LnZitmEIikgeyBhY3RpdmF0ZSh0cnVlKSB9CiAgICBVSS5tZW51KCJQbHVnaW5zIikuYWRkX2l0ZW0oIiN7UExVR0lOX05BTUV9IC0g2KjZitin2YbYp9iqINin2YTYrdiz2KfYqCIpIHsgc2hvd191c2VyX2luZm8gfQogICAgVUkubWVudSgiUGx1Z2lucyIpLmFkZF9pdGVtKCJNSERFU0lHTiAtINiq2K3Yr9mK2Ksg2KfZhNmF2YPYqtio2KkiKSB7IGNsZWFyX2NhY2hlIH0KCiAgICBAdG9vbGJhciA9IFVJOjpUb29sYmFyLm5ldyhQTFVHSU5fTkFNRSkKICAgIEBjbWQgPSBVSTo6Q29tbWFuZC5uZXcoItmF2YPYqtio2KkgI3tQTFVHSU5fTkFNRX0iKSB7IHNob3dfbGlicmFyeSB9CgogICAgaWNvbl9wYXRoID0gKFBMVUdJTl9ESVIgPyBGaWxlLmpvaW4oUExVR0lOX0RJUiwgImljb24ucG5nIikgOiBuaWwpIHJlc2N1ZSBuaWwKICAgIGlmIGljb25fcGF0aCAmJiBGaWxlLmV4aXN0PyhpY29uX3BhdGgpCiAgICAgIEBjbWQuc21hbGxfaWNvbiA9IGljb25fcGF0aAogICAgICBAY21kLmxhcmdlX2ljb24gPSBpY29uX3BhdGgKICAgIGVuZAoKICAgIEBjbWQudG9vbHRpcCA9ICLYqti02LrZitmEINmF2YPYqtio2KkgTUhERVNJR04iCiAgICBAdG9vbGJhci5hZGRfaXRlbShAY21kKQoKICAgIEB0b29sYmFyLnJlc3RvcmUKICAgIGZpbGVfbG9hZGVkKEZJTEVfTE9BREVEX0tFWSkKICBlbmQKZW5k"  //     base64
}
